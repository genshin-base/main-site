{"version":3,"file":"main.ru.0c732885.js","mappings":"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","sources":["webpack://gi_builds/webpack/runtime/load script","webpack://gi_builds/./node_modules/preact/dist/preact.module.js","webpack://gi_builds/./node_modules/preact/hooks/dist/hooks.module.js","webpack://gi_builds/./node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","webpack://gi_builds/./node_modules/preact/compat/src/portals.js","webpack://gi_builds/./www/src/utils/preact-compat.tsx","webpack://gi_builds/./node_modules/preact/compat/src/memo.js","webpack://gi_builds/./node_modules/preact/compat/src/util.js","webpack://gi_builds/./lib/utils/values.js","webpack://gi_builds/webpack/bootstrap","webpack://gi_builds/webpack/runtime/define property getters","webpack://gi_builds/webpack/runtime/ensure chunk","webpack://gi_builds/webpack/runtime/get javascript chunk filename","webpack://gi_builds/webpack/runtime/get mini-css chunk filename","webpack://gi_builds/webpack/runtime/hasOwnProperty shorthand","webpack://gi_builds/webpack/runtime/make namespace object","webpack://gi_builds/webpack/runtime/publicPath","webpack://gi_builds/webpack/runtime/jsonp chunk loading","webpack://gi_builds/./www/src/errors/rollbar.ts","webpack://gi_builds/./www/src/errors/index.ts","webpack://gi_builds/./www/src/errors/catch.ts","webpack://gi_builds/./node_modules/preact-render-to-string/dist/index.mjs","webpack://gi_builds/./www/src/components/page-wrap.tsx","webpack://gi_builds/./www/src/utils/links.tsx","webpack://gi_builds/./www/src/i18n/i18n.tsx","webpack://gi_builds/./lib/utils/collections.js","webpack://gi_builds/./www/src/utils/bootstrap.tsx","webpack://gi_builds/./www/src/utils/hooks.tsx","webpack://gi_builds/./www/src/modals/report-bug.tsx","webpack://gi_builds/./www/src/containers/footer.tsx","webpack://gi_builds/./www/src/api/generated.js","webpack://gi_builds/./www/src/routes/paths.js","webpack://gi_builds/./www/src/routes/router.tsx","webpack://gi_builds/./www/src/utils/typography.tsx","webpack://gi_builds/./www/src/components/globe-icon.tsx","webpack://gi_builds/./www/src/components/nav.tsx","webpack://gi_builds/./www/src/containers/header.tsx","webpack://gi_builds/./lib/genshin.js","webpack://gi_builds/./lib/utils/date.js","webpack://gi_builds/./www/src/api/utils.ts","webpack://gi_builds/./www/src/api/endpoints.ts","webpack://gi_builds/./www/src/api/index.ts","webpack://gi_builds/./www/src/components/spinners.tsx","webpack://gi_builds/./www/src/media/circlet.png","webpack://gi_builds/./www/src/media/flower.png","webpack://gi_builds/./www/src/media/goblet.png","webpack://gi_builds/./www/src/media/plume.png","webpack://gi_builds/./www/src/media/sands.png","webpack://gi_builds/./www/src/utils/artifacts.tsx","webpack://gi_builds/./www/src/components/block-header.tsx","webpack://gi_builds/./www/src/components/select.tsx","webpack://gi_builds/./www/src/components/tabs.tsx","webpack://gi_builds/./www/src/utils/calc-pos-for-dd.tsx","webpack://gi_builds/./www/src/containers/item-cards/item-detail-dd-portal.tsx","webpack://gi_builds/./www/src/components/tooltip.tsx","webpack://gi_builds/./www/src/utils/local-storage-keys.tsx","webpack://gi_builds/./www/src/modules/builds/common.tsx","webpack://gi_builds/./www/src/utils/items.tsx","webpack://gi_builds/./www/src/media/Icon_Bow.png","webpack://gi_builds/./www/src/media/Icon_Catalyst.png","webpack://gi_builds/./www/src/media/Icon_Claymore.png","webpack://gi_builds/./www/src/media/Icon_Polearm.png","webpack://gi_builds/./www/src/utils/weapons.tsx","webpack://gi_builds/./www/src/media/Icon_Sword.png","webpack://gi_builds/./www/src/containers/alchemy-calculator.tsx","webpack://gi_builds/./www/src/containers/item-cards/dd-cards.tsx","webpack://gi_builds/./www/src/utils/domains.tsx","webpack://gi_builds/./www/src/utils/enemies.tsx","webpack://gi_builds/./www/src/media/Element_Anemo.png","webpack://gi_builds/./www/src/media/Element_Cryo.png","webpack://gi_builds/./www/src/media/Element_Electro.png","webpack://gi_builds/./www/src/media/Element_Geo.png","webpack://gi_builds/./www/src/media/Element_Hydro.png","webpack://gi_builds/./www/src/utils/elements.tsx","webpack://gi_builds/./www/src/media/Element_Pyro.png","webpack://gi_builds/./www/src/utils/characters.tsx","webpack://gi_builds/./www/src/containers/item-cards/item-avatars.tsx","webpack://gi_builds/./www/src/containers/character-picker/mobile-character-picker.tsx","webpack://gi_builds/./www/src/containers/character-picker/character-picker.tsx","webpack://gi_builds/./www/src/containers/character-picker/favorite-characters.tsx","webpack://gi_builds/./www/src/components/characters.tsx","webpack://gi_builds/./www/src/modules/builds/character-build-detailed.tsx","webpack://gi_builds/./www/src/modules/equipment/weapons-list.tsx","webpack://gi_builds/./www/src/modules/equipment/equipment.tsx","webpack://gi_builds/./www/src/containers/farm-today.tsx","webpack://gi_builds/./www/src/containers/region-switch.tsx","webpack://gi_builds/./www/src/containers/time-until-day-reset.tsx","webpack://gi_builds/./www/src/modules/builds/character-build-preview.tsx","webpack://gi_builds/./www/src/pages/front-page.tsx","webpack://gi_builds/./www/src/App.tsx","webpack://gi_builds/./www/src/pages/builds.tsx","webpack://gi_builds/./www/src/pages/equipment.tsx","webpack://gi_builds/./www/src/index.tsx"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"gi_builds:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\t\tscript.type = \"module\";\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var n,l,u,i,t,o,r,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function h(n){var l=n.parentNode;l&&l.removeChild(n)}function v(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return y(l,f,t,o,null)}function y(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function p(){return{current:null}}function d(n){return n.children}function _(n,l){this.props=n,this.context=l}function k(n,l){if(null==l)return n.__?k(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?k(n):null}function b(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return b(n)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||r!==l.debounceRendering)&&((r=l.debounceRendering)||o)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=a({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?k(t):o,t.__h),z(u,t),t.__e!=o&&b(t)))})}function w(n,l,u,i,t,o,r,f,s,a){var h,v,p,_,b,m,g,w=i&&i.__k||c,A=w.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(_=u.__k[h]=null==(_=l[h])||\"boolean\"==typeof _?null:\"string\"==typeof _||\"number\"==typeof _||\"bigint\"==typeof _?y(null,_,null,null,_):Array.isArray(_)?y(d,{children:_},null,null,null):_.__b>0?y(_.type,_.props,_.key,null,_.__v):_)){if(_.__=u,_.__b=u.__b+1,null===(p=w[h])||p&&_.key==p.key&&_.type===p.type)w[h]=void 0;else for(v=0;v<A;v++){if((p=w[v])&&_.key==p.key&&_.type===p.type){w[v]=void 0;break}p=null}j(n,_,p=p||e,t,o,r,f,s,a),b=_.__e,(v=_.ref)&&p.ref!=v&&(g||(g=[]),p.ref&&g.push(p.ref,null,_),g.push(v,_.__c||b,_)),null!=b?(null==m&&(m=b),\"function\"==typeof _.type&&_.__k===p.__k?_.__d=s=x(_,s,n):s=P(n,_,p,w,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&p.__e==s&&s.parentNode!=n&&(s=k(p))}for(u.__e=m,h=A;h--;)null!=w[h]&&(\"function\"==typeof u.type&&null!=w[h].__e&&w[h].__e==u.__d&&(u.__d=k(i,h+1)),N(w[h],w[h]));if(g)for(h=0;h<g.length;h++)M(g[h],g[++h],g[++h])}function x(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?x(i,l,u):P(u,i,i,t,i.__e,l));return l}function A(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){A(n,l)}):l.push(n)),l}function P(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||s.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink[H:h]/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var s,h,v,y,p,k,b,m,g,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(s=l.__b)&&s(u);try{n:if(\"function\"==typeof P){if(m=u.props,g=(s=P.contextType)&&t[s.__c],x=s?g?g.props.value:s.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in P&&P.prototype.render?u.__c=h=new P(m,x):(u.__c=h=new _(m,x),h.constructor=P,h.render=O),g&&g.sub(h),h.props=m,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=P.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=a({},h.__s)),a(h.__s,P.getDerivedStateFromProps(m,h.__s))),y=h.props,p=h.state,v)null==P.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,x)||u.__v===i.__v){h.props=m,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,p,k)})}h.context=x,h.props=m,h.state=h.__s,(s=l.__r)&&s(u),h.__d=!1,h.__v=u,h.__P=n,s=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(t=a(a({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,p)),A=null!=s&&s.type===d&&null==s.key?s.props.children:s,w(n,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(s=l.diffed)&&s(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,f,c){var s,a,v,y=i.props,p=u.props,d=u.type,_=0;if(\"svg\"===d&&(o=!0),null!=r)for(;_<r.length;_++)if((s=r[_])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[_]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),a=(y=i.props||e).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},_=0;_<l.attributes.length;_++)y[l.attributes[_].name]=l.attributes[_].value;(v||a)&&(v&&(a&&v.__html==a.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(_=u.props.children,w(l,Array.isArray(_)?_:[_],u,i,t,o&&\"foreignObject\"!==d,r,f,r?r[0]:i.__k&&k(i,0),c),null!=r)for(_=r.length;_--;)null!=r[_]&&h(r[_]);c||(\"value\"in p&&void 0!==(_=p.value)&&(_!==l.value||\"progress\"===d&&!_||\"option\"===d&&_!==y.value)&&H(l,\"value\",_,y.value,!1),\"checked\"in p&&void 0!==(_=p.checked)&&_!==l.checked&&H(l,\"checked\",_,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,\"function\"!=typeof n.type);i||null==n.__e||h(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function S(u,i,t){var o,r,f;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,f=[],j(i,u=(!o&&t||i).__k=v(d,null,[u]),r||e,e,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,f,!o&&t?t:r?r.__e:i.firstChild,o),z(f,u)}function q(n,l){S(n,l,q)}function B(l,u,i){var t,o,r,f=a({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),y(l.type,f,t||l.key,o||l.ref,null)}function D(n,l){var u={__c:l=\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(m)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=c.slice,l={__e:function(n,l){for(var u,i,t;l=l.__;)if((u=l.__c)&&!u.__)try{if((i=u.constructor)&&null!=i.getDerivedStateFromError&&(u.setState(i.getDerivedStateFromError(n)),t=u.__d),null!=u.componentDidCatch&&(u.componentDidCatch(n),t=u.__d),t)return u.__E=u}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},_.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(a({},u),this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),m(this))},_.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),m(this))},_.prototype.render=d,t=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,f=0;export{S as render,q as hydrate,v as createElement,v as h,d as Fragment,p as createRef,i as isValidElement,_ as Component,B as cloneElement,D as createContext,A as toChildArray,l as options};\n//# sourceMappingURL=preact.module.js.map\n","import{options as n}from\"preact\";var t,u,r,o=0,i=[],c=n.__b,f=n.__r,e=n.diffed,a=n.__c,v=n.unmount;function m(t,r){n.__h&&n.__h(u,t,o||r),o=0;var i=u.__H||(u.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function l(n){return o=1,p(w,n)}function p(n,r,o){var i=m(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):w(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function y(r,o){var i=m(t++,3);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__H.__h.push(i))}function h(r,o){var i=m(t++,4);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__h.push(i))}function s(n){return o=5,d(function(){return{current:n}},[])}function _(n,t,u){o=6,h(function(){\"function\"==typeof n?n(t()):n&&(n.current=t())},null==u?u:u.concat(n))}function d(n,u){var r=m(t++,7);return k(r.__H,u)&&(r.__=n(),r.__H=u,r.__h=n),r.__}function A(n,t){return o=8,d(function(){return n},t)}function F(n){var r=u.context[n.__c],o=m(t++,9);return o.c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function T(t,u){n.useDebugValue&&n.useDebugValue(u?u(t):t)}function q(n){var r=m(t++,10),o=l();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function x(){for(var t;t=i.shift();)if(t.__P)try{t.__H.__h.forEach(g),t.__H.__h.forEach(j),t.__H.__h=[]}catch(u){t.__H.__h=[],n.__e(u,t.__v)}}n.__b=function(n){u=null,c&&c(n)},n.__r=function(n){f&&f(n),t=0;var r=(u=n.__c).__H;r&&(r.__h.forEach(g),r.__h.forEach(j),r.__h=[])},n.diffed=function(t){e&&e(t);var o=t.__c;o&&o.__H&&o.__H.__h.length&&(1!==i.push(o)&&r===n.requestAnimationFrame||((r=n.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),b&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);b&&(t=requestAnimationFrame(u))})(x)),u=null},n.__c=function(t,u){u.some(function(t){try{t.__h.forEach(g),t.__h=t.__h.filter(function(n){return!n.__||j(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],n.__e(r,t.__v)}}),a&&a(t,u)},n.unmount=function(t){v&&v(t);var u,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{g(n)}catch(n){u=n}}),u&&n.__e(u,r.__v))};var b=\"function\"==typeof requestAnimationFrame;function g(n){var t=u,r=n.__c;\"function\"==typeof r&&(n.__c=void 0,r()),u=t}function j(n){var t=u;n.__c=n.__(),u=t}function k(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function w(n,t){return\"function\"==typeof t?t(n):t}export{l as useState,p as useReducer,y as useEffect,h as useLayoutEffect,s as useRef,_ as useImperativeHandle,d as useMemo,A as useCallback,F as useContext,T as useDebugValue,q as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","import{options as r,Fragment as _}from\"preact\";export{Fragment}from\"preact\";var o=0;function e(_,e,n,t,f){var l,s,u={};for(s in e)\"ref\"==s?l=e[s]:u[s]=e[s];var a={type:_,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--o,__source:t,__self:f};if(\"function\"==typeof _&&(l=_.defaultProps))for(s in l)void 0===u[s]&&(u[s]=l[s]);return r.vnode&&r.vnode(a),a}export{e as jsx,e as jsxs,e as jsxDEV};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function() {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props._vnode) {\n\t\tif (!_this._temp) {\n\t\t\t_this._container = container;\n\n\t\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t\t_this._temp = {\n\t\t\t\tnodeType: 1,\n\t\t\t\tparentNode: container,\n\t\t\t\tchildNodes: [],\n\t\t\t\tappendChild(child) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tinsertBefore(child, before) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tremoveChild(child) {\n\t\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t\t_this._container.removeChild(child);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Render our wrapping element into temp.\n\t\trender(\n\t\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t\t_this._temp\n\t\t);\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._temp) {\n\t\t_this.componentWillUnmount();\n\t}\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { _vnode: vnode, _container: container });\n}\n","// direct imports to avoid kilobytes of side-effects from 'preact/compat'\n// normal imports (preact/compat/src/memo) do not work with webpack (it strictly follows 'exports' field in package.json)\nimport { memo as memo_ } from '#src/../../node_modules/preact/compat/src/memo'\nimport { createPortal as createPortal_ } from '#src/../../node_modules/preact/compat/src/portals'\n\nimport type { createPortal as createPortalOrig } from 'preact/compat'\nimport type { memo as memoOrig } from 'preact/compat'\n\nexport const createPortal = createPortal_ as typeof createPortalOrig\nexport const memo = memo_ as typeof memoOrig\n","import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","/**\n * @template T\n * @param {T|null} val\n * @returns {T}\n */\nexport function mustBeNotNull(val) {\n\tif (val === null) throw new Error('value is null, this should not happen')\n\treturn val\n}\n\n/**\n * @template T\n * @param {T|undefined} val\n * @returns {T}\n */\nexport function mustBeDefined(val) {\n\tif (val === undefined) throw new Error('value is undefined, this should not happen')\n\treturn val\n}\n\n/**\n * @template T\n * @param {T|undefined} x\n * @returns {x is T}\n */\nexport function isDefined(x) {\n\treturn x !== undefined\n}\n\n/**\n * @param {never[]} values\n * @returns {never}\n */\nexport function mustBeNever(...values) {\n\tthrow new Error('must not be reachable')\n}\n\n/**\n * @param {never[]} values\n * @returns {void}\n */\nexport function staticNever(...values) {\n\t// пустая функция, для тайпчекера\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function simpleDeepEqual(a, b) {\n\tif (Array.isArray(a) && Array.isArray(b)) {\n\t\tif (a.length !== b.length) return false\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif (!simpleDeepEqual(a[i], b[i])) return false\n\t\t}\n\t\treturn true\n\t}\n\tif (typeof a === 'object' && typeof b === 'object' && a !== null && b !== null) {\n\t\tif (Object.keys(a).length !== Object.keys(b).length) return false\n\t\tfor (const attr in a) {\n\t\t\tif (!simpleDeepEqual(a[attr], b[attr])) return false\n\t\t}\n\t\treturn true\n\t}\n\treturn a === b\n}\n\n/**\n * @template TVal\n * @template TKey\n * @param {Iterable<TVal>} items\n * @param {(item:TVal) => TKey} keyFunc\n * @returns {Map<TKey, TVal[]>}\n */\nexport function groupByToMap(items, keyFunc) {\n\tconst map = /**@type {Map<TKey, TVal[]>}*/ (new Map())\n\tfor (const item of items) {\n\t\tconst key = keyFunc(item)\n\t\tconst cur = map.get(key)\n\t\tif (cur) cur.push(item)\n\t\telse map.set(key, [item])\n\t}\n\treturn map\n}\n\n/**\n * @param {number} min\n * @param {number} val\n * @param {number} max\n * @returns {number}\n */\nexport function clamp(min, val, max) {\n\treturn val < min ? min : val > max ? max : val\n}\n\n/** @returns {Promise<never>} */\nexport function promiseNever() {\n\treturn new Promise(() => undefined)\n}\n\n/**\n * @class\n * @template T\n */\nexport function Deferred() {\n\t/** @type {Promise<T>} */\n\tthis.promise = new Promise((res, rej) => {\n\t\tthis.resolve = res\n\t\tthis.reject = rej\n\t})\n}\n\n/**\n * @template T\n * @param {T | Promise<T>} value\n * @returns {value is Promise<T>}\n */\nexport function isPromise(value) {\n\treturn typeof value === 'object' && value !== null && 'then' in value\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"async\" + \".ru.\" + \"7fe5d8df\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgi_builds\"] = self[\"webpackChunkgi_builds\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","const ROLLBAR_TOKEN = 'f5661155727c4a9e9db4d770357a0bcf'\n\nexport function sendError(class_: string, message: string): Promise<void> {\n\treturn sendNewItem('error', {\n\t\ttrace: {\n\t\t\tframes: [],\n\t\t\texception: {\n\t\t\t\tclass: class_,\n\t\t\t\tmessage,\n\t\t\t\t// description: '',\n\t\t\t},\n\t\t},\n\t})\n}\n\nexport function sendMessage(msg: string): Promise<void> {\n\treturn sendNewItem('warning', {\n\t\tmessage: {\n\t\t\tbody: msg,\n\t\t},\n\t})\n}\n\n/**\n * {@link https://explorer.docs.rollbar.com/#operation/create-item}\n */\nfunction sendNewItem(level, rollbarBody) {\n\tconst body = JSON.stringify({\n\t\tdata: {\n\t\t\tenvironment: process.env.NODE_ENV,\n\t\t\tbody: rollbarBody,\n\t\t\tlevel,\n\t\t\tcode_version: BUNDLE_ENV.COMMIT_HASH,\n\t\t\tplatform: 'browser',\n\t\t\tcontext: location.href,\n\t\t\tclient: {\n\t\t\t\tjavascript: {\n\t\t\t\t\tbrowser: navigator.userAgent,\n\t\t\t\t\t// code_version: '' TODO\n\t\t\t\t\t// source_map_enabled: false,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\tconst headers = {\n\t\t'X-Rollbar-Access-Token': ROLLBAR_TOKEN,\n\t\t'Content-Type': 'application/json',\n\t}\n\treturn fetch('https://api.rollbar.com/api/1/item/', { method: 'POST', body, headers })\n\t\t.then(r => r.json())\n\t\t.then(resp => {\n\t\t\tif (resp.err !== 0) throw new Error(`rollbar: ` + resp.message)\n\t\t})\n}\n","import { sendError } from './rollbar'\n\nexport function logErrorExt(message: string | null, anyError: unknown, silent: boolean): void {\n\tconst error = anyError ? (anyError instanceof Error ? anyError : new Error(anyError + '')) : null\n\n\tif (!silent) console.error(message, error)\n\n\tconst class_ = error ? error.constructor.name : 'Message'\n\tconst text = (message ? message + '\\n' : '') + (error ? error.stack : '')\n\tsendError(class_, text).catch(console.error)\n}\n\nexport function logError(error: unknown): void {\n\tlogErrorExt(null, error, false)\n}\n","import './rollbar'\n\nimport { logErrorExt } from './'\n\nif (!BUNDLE_ENV.IS_SSR) {\n\twindow.addEventListener('error', e => {\n\t\t// похоже на ошибку во внешнем плагине, игнорируем её\n\t\tif (e.message === 'Script error.' && e.filename === '') return\n\t\t// e.message обычно начинается с \"Uncaught Error:\", можно не добавлять свой префикс\n\t\tconst msg = `${e.message} in ${e.filename}:${e.lineno}:${e.colno}`\n\t\tlogErrorExt(msg, e.error, true)\n\t})\n\n\twindow.addEventListener('unhandledrejection', e => {\n\t\t// при Promise.reject(123) у ошибки не будет ни сообщения, ни стека; такой \"reason\" отправляем просто текстом\n\t\tconst msg = 'Unhandled Rejection: ' + (e.reason?.message ? e.reason.message : e.reason + '')\n\t\tlogErrorExt(msg, e.reason, true)\n\t})\n}\n","import{options as e,Fragment as t}from\"preact\";var r=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,n=/[&<>\"]/;function o(e){var t=String(e);return n.test(t)?t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\"):t}var a=function(e,t){return String(e).replace(/(\\n+)/g,\"$1\"+(t||\"\\t\"))},i=function(e,t,r){return String(e).length>(t||40)||!r&&-1!==String(e).indexOf(\"\\n\")||-1!==String(e).indexOf(\"<\")},l={};function s(e){var t=\"\";for(var n in e){var o=e[n];null!=o&&\"\"!==o&&(t&&(t+=\" \"),t+=\"-\"==n[0]?n:l[n]||(l[n]=n.replace(/([A-Z])/g,\"-$1\").toLowerCase()),t+=\": \",t+=o,\"number\"==typeof o&&!1===r.test(n)&&(t+=\"px\"),t+=\";\")}return t||void 0}function f(e,t){for(var r in t)e[r]=t[r];return e}function u(e,t){return Array.isArray(t)?t.reduce(u,e):null!=t&&!1!==t&&e.push(t),e}var c={shallow:!0},p=[],_=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,v=/[\\s\\n\\\\/='\"\\0<>]/,d=function(){};m.render=m;var g=function(e,t){return m(e,t,c)},h=[];function m(t,r,n){r=r||{},n=n||{};var o=e.__s;e.__s=!0;var a=x(t,r,n);return e.__c&&e.__c(t,h),h.length=0,e.__s=o,a}function x(r,n,l,c,g,h){if(null==r||\"boolean\"==typeof r)return\"\";if(\"object\"!=typeof r)return o(r);var m=l.pretty,y=m&&\"string\"==typeof m?m:\"\\t\";if(Array.isArray(r)){for(var b=\"\",S=0;S<r.length;S++)m&&S>0&&(b+=\"\\n\"),b+=x(r[S],n,l,c,g,h);return b}var w,k=r.type,O=r.props,C=!1;if(\"function\"==typeof k){if(C=!0,!l.shallow||!c&&!1!==l.renderRootComponent){if(k===t){var A=[];return u(A,r.props.children),x(A,n,l,!1!==l.shallowHighOrder,g,h)}var H,j=r.__c={__v:r,context:n,props:r.props,setState:d,forceUpdate:d,__h:[]};if(e.__b&&e.__b(r),e.__r&&e.__r(r),k.prototype&&\"function\"==typeof k.prototype.render){var F=k.contextType,M=F&&n[F.__c],T=null!=F?M?M.props.value:F.__:n;(j=r.__c=new k(O,T)).__v=r,j._dirty=j.__d=!0,j.props=O,null==j.state&&(j.state={}),null==j._nextState&&null==j.__s&&(j._nextState=j.__s=j.state),j.context=T,k.getDerivedStateFromProps?j.state=f(f({},j.state),k.getDerivedStateFromProps(j.props,j.state)):j.componentWillMount&&(j.componentWillMount(),j.state=j._nextState!==j.state?j._nextState:j.__s!==j.state?j.__s:j.state),H=j.render(j.props,j.state,j.context)}else{var $=k.contextType,L=$&&n[$.__c];H=k.call(r.__c,O,null!=$?L?L.props.value:$.__:n)}return j.getChildContext&&(n=f(f({},n),j.getChildContext())),e.diffed&&e.diffed(r),x(H,n,l,!1!==l.shallowHighOrder,g,h)}k=(w=k).displayName||w!==Function&&w.name||function(e){var t=(Function.prototype.toString.call(e).match(/^\\s*function\\s+([^( ]+)/)||\"\")[1];if(!t){for(var r=-1,n=p.length;n--;)if(p[n]===e){r=n;break}r<0&&(r=p.push(e)-1),t=\"UnnamedComponent\"+r}return t}(w)}var E,D,N=\"<\"+k;if(O){var P=Object.keys(O);l&&!0===l.sortAttributes&&P.sort();for(var R=0;R<P.length;R++){var U=P[R],W=O[U];if(\"children\"!==U){if(!v.test(U)&&(l&&l.allAttributes||\"key\"!==U&&\"ref\"!==U&&\"__self\"!==U&&\"__source\"!==U)){if(\"defaultValue\"===U)U=\"value\";else if(\"className\"===U){if(void 0!==O.class)continue;U=\"class\"}else g&&U.match(/^xlink:?./)&&(U=U.toLowerCase().replace(/^xlink:?/,\"xlink:\"));if(\"htmlFor\"===U){if(O.for)continue;U=\"for\"}\"style\"===U&&W&&\"object\"==typeof W&&(W=s(W)),\"a\"===U[0]&&\"r\"===U[1]&&\"boolean\"==typeof W&&(W=String(W));var q=l.attributeHook&&l.attributeHook(U,W,n,l,C);if(q||\"\"===q)N+=q;else if(\"dangerouslySetInnerHTML\"===U)D=W&&W.__html;else if(\"textarea\"===k&&\"value\"===U)E=W;else if((W||0===W||\"\"===W)&&\"function\"!=typeof W){if(!(!0!==W&&\"\"!==W||(W=U,l&&l.xml))){N+=\" \"+U;continue}if(\"value\"===U){if(\"select\"===k){h=W;continue}\"option\"===k&&h==W&&(N+=\" selected\")}N+=\" \"+U+'=\"'+o(W)+'\"'}}}else E=W}}if(m){var z=N.replace(/\\n\\s*/,\" \");z===N||~z.indexOf(\"\\n\")?m&&~N.indexOf(\"\\n\")&&(N+=\"\\n\"):N=z}if(N+=\">\",v.test(k))throw new Error(k+\" is not a valid HTML tag name in \"+N);var I,V=_.test(k)||l.voidElements&&l.voidElements.test(k),Z=[];if(D)m&&i(D)&&(D=\"\\n\"+y+a(D,y)),N+=D;else if(null!=E&&u(I=[],E).length){for(var B=m&&~N.indexOf(\"\\n\"),G=!1,J=0;J<I.length;J++){var K=I[J];if(null!=K&&!1!==K){var Q=x(K,n,l,!0,\"svg\"===k||\"foreignObject\"!==k&&g,h);if(m&&!B&&i(Q)&&(B=!0),Q)if(m){var X=Q.length>0&&\"<\"!=Q[0];G&&X?Z[Z.length-1]+=Q:Z.push(Q),G=X}else Z.push(Q)}}if(m&&B)for(var Y=Z.length;Y--;)Z[Y]=\"\\n\"+y+a(Z[Y],y)}if(Z.length||D)N+=Z.join(\"\");else if(l&&l.xml)return N.substring(0,N.length-1)+\" />\";return!V||I||D?(m&&~N.indexOf(\"\\n\")&&(N+=\"\\n\"),N+=\"</\"+k+\">\"):N=N.replace(/>$/,\" />\"),N}m.shallowRender=g;export default m;export{m as render,m as renderToStaticMarkup,m as renderToString,g as shallowRender};\n//# sourceMappingURL=index.module.js.map\n","export function PageWrap({ children }): JSX.Element {\n\treturn <div className=\"page py-4\">{children}</div>\n}\n","export const LINK_DISCORD_INVITE = 'https://discord.gg/YapnrQ63bD'\r\n","import {\n\tGI_ArtifactGroupCode,\n\tGI_ArtifactTypeCode,\n\tGI_KnownStatBonusCode,\n\tGI_WeaponObtainSource,\n\tGI_WeaponTypeCode,\n\tMapCode,\n} from '#lib/genshin'\nimport { GI_TalentCode } from '#lib/parsing/helperteam/types'\nimport { LINK_DISCORD_INVITE } from '#src/utils/links'\n\ntype Lang = 'en' | 'ru'\nconst LANG = BUNDLE_ENV.LANG as Lang\nexport const I18N_LANG_NAMES: Record<Lang, string> = {\n\ten: 'English',\n\tru: 'Русский',\n}\nexport const I18N_LANG_NAME = I18N_LANG_NAMES[LANG]\n\nexport const I18N_DASHBOARD = { en: 'Dashboard', ru: 'Самое важное' }[LANG]\nexport const I18N_REGION = { en: 'Region', ru: 'Регион' }[LANG]\nexport const I18N_UNTIL_DAY_RESET = { en: 'Until Day Reset', ru: 'До нового дня' }[LANG]\nexport const I18N_ALCHEMY_CALC = { en: 'Alchemy Calculator', ru: 'Калькулятор алхимии' }[LANG]\nexport const I18N_WHAT_TO_FARM = { en: 'What to Farm', ru: 'Что фармить' }[LANG]\nexport const I18N_BUILDS = { en: 'Builds', ru: 'Сборки персонажей' }[LANG]\nexport const I18N_ASIA = { en: 'Asia', ru: 'Азия' }[LANG]\nexport const I18N_NORH_AMERICA = { en: 'North America', ru: 'Северная Америка' }[LANG]\nexport const I18N_EUROPE = { en: 'Europe', ru: 'Европа' }[LANG]\nexport const I18N_MINUTE = { en: 'minute', ru: 'минута' }[LANG]\nexport const I18N_MINUTES = { en: 'minutes', ru: 'минуты' }[LANG]\nexport const I18N_MINUTES_3 = { en: 'minutes', ru: 'минут' }[LANG]\nexport const I18N_TODAY = { en: 'today', ru: 'сегодня' }[LANG]\nexport const I18N_WEEKDAYS = {\n\ten: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],\n\tru: ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота', 'Воскресенье'],\n}[LANG]\nexport const I18N_TOMORROW = { en: 'tomorrow', ru: 'завтра' }[LANG]\nexport const I18N_DUNGEONS = { en: 'Dungeons', ru: 'Подземелья' }[LANG]\nexport const I18N_TALENTS = { en: 'Talents', ru: 'Таланты' }[LANG]\nexport const I18N_WEAPONS = { en: 'Weapons', ru: 'Оружие' }[LANG]\nexport const I18N_WEAPON_STACKS_COUNT = {\n\ten: (stacks: number) => stacks + ' ' + pluralizeEN(stacks, 'stack', 'stacks'),\n\tru: (stacks: number) => stacks + ' ' + pluralizeRU(stacks, 'стак', 'стака', 'стаков'),\n}[LANG]\nexport const I18N_WEAPON_REFINE = {\n\ten: (refine: string) => 'R' + refine,\n\tru: (refine: string) => 'Р' + refine,\n}[LANG]\nexport const I18N_WHY_ADD_TO_FAVS_TIP = {\n\ten: 'Add characters, weapons or items to your favorites to see them marked here.',\n\tru: 'Добавьте персонажей, оружие и предметы в избранные, чтобы отметить их здесь',\n}[LANG]\nexport const I18N_FAV_CHARACTERS = { en: 'Favorite characters', ru: 'Избранные персонажи' }[LANG]\nexport const I18N_CHOOSE_FROM_FAV = {\n\ten: 'Choose from favorite',\n\tru: 'Выберите из избранных',\n}[LANG]\nexport const I18N_ARTIFACTS = { en: 'Artifacts', ru: 'Артефакты' }[LANG]\nexport const I18N_ART_STATS_PRIORITY = { en: 'Artifact stats priority', ru: 'Приоритетные главстаты' }[LANG]\nexport const I18N_SUBSTATS_PRIORITY = { en: 'Substats priority', ru: 'Приоритетные допстаты' }[LANG]\nexport const I18N_TALENTS_PRIORITY = { en: 'Talents Priority', ru: 'Приоритетные таланты' }[LANG]\nexport const I18N_ASC_MATERIALS = { en: 'Ascension materials', ru: 'Материалы возвышения' }[LANG]\nexport const I18N_FULL_BUILD_INFO = { en: 'Full build info', ru: 'Полная информация о билде' }[LANG]\nexport const I18N_CHAR_LORE = { en: 'Character lore', ru: 'Лор персонажа' }[LANG]\nexport const I18N_MORE_ON_BUILDS_PAGE = {\n\ten: 'more on build page',\n\tru: 'продолжение на странице билда',\n}[LANG]\nexport const I18N_BACK = { en: 'Back', ru: 'Назад' }[LANG]\nexport const I18N_NOTES = { en: 'Notes', ru: 'Примечания' }[LANG]\n\nconst artTypeNamesRU: Record<GI_ArtifactTypeCode, string> = {\n\tflower: 'цветок',\n\tplume: 'перо',\n\tsands: 'часы',\n\tgoblet: 'кубок',\n\tcirclet: 'корона',\n}\nexport const I18N_ART_TYPE = {\n\ten: (code: GI_ArtifactTypeCode) => code as string,\n\tru: (code: GI_ArtifactTypeCode) => artTypeNamesRU[code],\n}[LANG]\n\nconst statNamesRu: Record<GI_KnownStatBonusCode, string> = {\n\tdef: 'защита',\n\t'def%': '% защиты',\n\tdmg: 'урон',\n\t'dmg%': '% урона',\n\tatk: 'атака',\n\t'atk%': '% атаки',\n\thp: 'ХП',\n\t'hp%': '% ХП',\n\tem: 'мастерство стихий',\n\ter: 'восстановление энергии',\n\t'er%': '% восстановления энергии',\n\thealing: 'лечение',\n\t'healing%': '% лечения',\n\t'crit-rate': 'шанс крита',\n\t'crit-rate%': '%шанса крита',\n\t'crit-dmg': 'крит урон',\n\t'crit-dmg%': '% крит урона',\n\t'phys-dmg': 'физ урон',\n\t'cryo-dmg': 'крио урон',\n\t'geo-dmg': 'гео урон',\n\t'anemo-dmg': 'анемо урон',\n\t'hydro-dmg': 'гидро урон',\n\t'electro-dmg': 'электро урон',\n\t'pyro-dmg': 'пиро урон',\n\t'phys-dmg%': '% физ урона',\n\t'cryo-dmg%': '% крио урона',\n\t'geo-dmg%': '% гео урона',\n\t'anemo-dmg%': '% анемо урона',\n\t'hydro-dmg%': '% гидро урона',\n\t'electro-dmg%': '% электро урона',\n\t'pyro-dmg%': '% пиро урона',\n}\nexport const I18N_STAT_NAME = {\n\ten: (code: string) => code.replace(/-/g, ' '),\n\tru: (code: string) => statNamesRu[code] ?? code,\n}[LANG]\n\ntype TalentTypeNames = Record<GI_TalentCode, string>\nconst talentTypesNamesRU: TalentTypeNames = {\n\tattack: 'обычная атака',\n\tskill: 'элементальный навык',\n\tburst: 'взрыв стихии',\n}\nexport const I18N_TALENT_NAME = {\n\ten: (code: GI_TalentCode) => code,\n\tru: (code: GI_TalentCode) => talentTypesNamesRU[code],\n}[LANG]\n\ntype ConjuctionType = 'or' | 'and'\nexport const I18N_CONJUCTIONS: Record<ConjuctionType, string> = {\n\ten: { or: 'or', and: 'and' },\n\tru: { or: 'или', and: 'и' },\n}[LANG]\n\nexport const I18N_RECOMENDED_FOR = { en: 'Recommended for', ru: 'Рекомендуется для' }[LANG]\nexport const I18N_FOR_NOBODY = { en: 'Nobody', ru: 'Никого' }[LANG]\nexport const I18N_SOURCE = { en: 'Source', ru: 'Источник' }[LANG]\nexport const I18N_SCROLL_TO_ZOOM = { en: 'Scroll to zoom', ru: 'Зум колёсиком' }[LANG]\nexport const I18N_PINCH_TO_ZOOM = { en: 'Pinch to zoom', ru: 'Зум щипком' }[LANG]\nexport const I18N_CANCEL = { en: 'cancel', ru: 'отмена' }[LANG]\nexport const I18N_SUBMIT = { en: 'submit', ru: 'отправить' }[LANG]\nexport const I18N_SUBMIT_BUG_SUCCESS = { en: 'Message sent. Thank you', ru: 'Сообщение отправлено. Спасибо' }[\n\tLANG\n]\nexport const I18N_SUBMIT_BUG_ERROR = {\n\ten: 'Error happened while sending message. Please try again later, or contact us on Discord',\n\tru: 'Не удалось отправить сообщение. Попробуйте позже, или напишите нам в Дискорде',\n}[LANG]\nexport const I18N_YOUR_MESSAGE_HERE = { en: 'Your message here', ru: 'Текст сообщения' }[LANG]\nexport const I18N_REPORT_BUG_GUIDE = {\n\ten: (\n\t\t<>\n\t\t\t<p>\n\t\t\t\tPlease describe your problem here. You can upload images on{' '}\n\t\t\t\t<a href=\"https://imgur.com/upload\" target=\"_blank\">\n\t\t\t\t\timgur.com\n\t\t\t\t</a>{' '}\n\t\t\t\tand use generated links to them in your message.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tOr message us on{' '}\n\t\t\t\t<a href={LINK_DISCORD_INVITE} target=\"_blank\">\n\t\t\t\t\tour Discord server\n\t\t\t\t</a>\n\t\t\t\t!\n\t\t\t</p>\n\t\t</>\n\t),\n\tru: (\n\t\t<>\n\t\t\t<p>\n\t\t\t\tПожалуйста, опишите проблему в поле ниже. Если требуется, вы можете загрузить скриншоты на\n\t\t\t\tсайт{' '}\n\t\t\t\t<a href=\"https://imgur.com/upload\" target=\"_blank\">\n\t\t\t\t\timgur.com\n\t\t\t\t</a>{' '}\n\t\t\t\tи вставить ссылки на скриншоты в своё сообщение.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tИли напишите нам на{' '}\n\t\t\t\t<a href={LINK_DISCORD_INVITE} target=\"_blank\">\n\t\t\t\t\tнaшем сервере в Дискорде\n\t\t\t\t</a>\n\t\t\t\t!\n\t\t\t</p>\n\t\t</>\n\t),\n}[LANG]\nexport const I18N_ERROR = { en: 'Error, reload page', ru: 'Ошибка, перезагрузите страницу' }[LANG]\nexport const I18N_PIECE_BONUS = {\n\ten: (n: number) => `${n} piece bonus`,\n\tru: (n: number) => `Бонус ${n} части`,\n}[LANG]\nexport const I18N_PIECES_BONUS = {\n\ten: (n: number) => `${n} pieces bonus`,\n\tru: (n: number) => `Бонус ${n} частей`,\n}[LANG]\nexport const I18N_BASE_ATTACK = { en: 'Base attack', ru: 'Базовая атака' }[LANG]\nexport const I18N_SECONDARY_STAT = { en: 'Secondary Stat', ru: 'Пассивная способность' }[LANG]\ntype MapCodeName = Record<MapCode, string>\nexport const I18N_MAP_CODES_NAME: MapCodeName = {\n\ten: { teyvat: 'Teyvat', enkanomiya: 'Enkanomiya' },\n\tru: { teyvat: 'Тейват', enkanomiya: 'Энканомия' },\n}[LANG]\nexport const I18N_CHAR_BUILD_RECS = {\n\ten: 'Character builds recomendations',\n\tru: 'Рекомендуемые сборки персонажей',\n}[LANG]\nexport const I18N_SELECT_CHAR_ABOVE = { en: 'Select character above', ru: 'Выберите персонажа' }[LANG]\nexport const I18N_BUILD_RECS_FOR = { en: 'build recomendations', ru: 'билд' }[LANG]\nexport const I18N_BASED_ON_GIHT = {\n\ten: \"Based on Genshin Impact Helper Team's Character Builds\",\n\tru: 'Основано на табличке Геншин Импакт Хелпер Тимы (англ.)',\n}[LANG]\nexport const I18N_ABOUT_SITE = { en: 'About', ru: 'О сайте' }[LANG]\nexport const I18N_OUR_DISCORD = { en: 'Our Discord', ru: 'Наш Дискорд' }[LANG]\nexport const I18N_CREATED_BY_US = {\n\ten: 'Designed and coded by Absolute Evil Studio',\n\tru: 'Задизайнено и закожено в Абсолют Ивел студии',\n}[LANG]\nexport const I18N_REPORT_BUG = {\n\ten: 'Report a bug',\n\tru: 'Сообщить об ошибке',\n}[LANG]\n\ntype WeaponTypeNames = Record<GI_WeaponTypeCode, string>\nconst weaponTypeNamesRU: WeaponTypeNames = {\n\tclaymore: 'Двуручный меч',\n\tsword: 'Меч',\n\tcatalyst: 'Катализатор',\n\tpolearm: 'Копье',\n\tbow: 'Лук',\n}\nexport const I18N_WEAPON_TYPE_NAME = {\n\ten: (code: GI_WeaponTypeCode) => code,\n\tru: (code: GI_WeaponTypeCode) => weaponTypeNamesRU[code],\n}[LANG]\n\ntype WeaponObtainSourceNames = Record<GI_WeaponObtainSource, string>\nconst weaponObtainSourceNamesRU: WeaponObtainSourceNames = {\n\twishes: 'молитвы',\n\t'event-wishes': 'молитвы события',\n\tevents: 'события',\n\t'battle-pass': 'батл-пасс',\n\t'in-game-shop': 'внутриигровой магазин',\n\tforging: 'ковка',\n\tfishing: 'рыболовля',\n\t'npc-shop': 'магазин НПС',\n\tchests: 'сундуки',\n\tquests: 'квесты',\n\tpuzzles: 'паззл',\n\tinvestigation: 'исследование мира',\n\t'adventure-rank-10': '10 ранг приключений',\n\tplaystation: 'плейстейшн',\n}\nexport const I18N_WEAPON_OBTAIN_SOURCE_NAME = {\n\ten: (code: GI_WeaponObtainSource) => code.replace(/-/g, ' ').replace(/\\bnpc\\b/, 'NPC'),\n\tru: (code: GI_WeaponObtainSource) => weaponObtainSourceNamesRU[code],\n}[LANG]\nexport const I18N_OBTAINED_DURING_STORYLINE = {\n\ten: 'Obtained during storyline quests',\n\tru: 'Выдаётся во время прохождения сюжетных заданий',\n}[LANG]\nexport const I18N_ART_GROUP_NAME: Record<GI_ArtifactGroupCode, string> = {\n\ten: { '18%-atk': 'ATK +18%', '20%-er': 'Energy Recharge +20%' },\n\tru: { '18%-atk': 'Сила атаки +18%', '20%-er': 'Восстановление энергии +20%' },\n}[LANG]\n\nconst pluralizeHours = {\n\ten: (hours: number) => pluralizeEN(hours, 'hour', 'hours'),\n\tru: (hours: number) => pluralizeRU(hours, 'час', 'часа', 'часов'),\n}[LANG]\nconst pluralizeMinutes = {\n\ten: (minutes: number) => pluralizeEN(minutes, 'minute', 'minutes'),\n\tru: (minutes: number) => pluralizeRU(minutes, 'минута', 'минуты', 'минут'),\n}[LANG]\nexport function I18N_MS_TO_HM_WORDS(duration: number): string {\n\tconst minutes = Math.floor((duration / (1000 * 60)) % 60)\n\tconst hours = Math.floor((duration / (1000 * 60 * 60)) % 24)\n\treturn `${hours} ${pluralizeHours(hours)} ${minutes} ${pluralizeMinutes(minutes)}`\n}\n\nfunction pluralizeEN(n: number, w0: string, w1: string): string {\n\tif (n < 0) n = -n\n\tconst d0 = n % 10\n\tconst d10 = n % 100\n\n\tif (d10 === 11 || d10 === 12 || d0 === 0 || (d0 >= 2 && d0 <= 9)) return w1\n\treturn w0\n}\nfunction pluralizeRU(n: number, w0: string, w1: string, w3: string): string {\n\tif (n < 0) n = -n\n\tif (n % 10 === 1 && n % 100 !== 11) {\n\t\treturn w0\n\t} else if (n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20)) {\n\t\treturn w1\n\t} else {\n\t\treturn w3\n\t}\n}\n","/**\n * @template T\n * @param {T[]} arr\n * @returns {T[]}\n */\nexport function arrSimpleUniq(arr) {\n\tfor (let i = arr.length - 1; i >= 0; i--) {\n\t\tconst index = arr.indexOf(arr[i], i + 1)\n\t\tif (index < i) arr.splice(i, 1)\n\t}\n\treturn arr\n}\n\n/**\n * @template T\n * @param {T[]} arr\n * @param {T[]} items\n * @returns {number}\n */\nexport function arrPushIfNew(arr, ...items) {\n\tfor (let i = 0; i < items.length; i++)\n\t\tif (!arr.includes(items[i])) {\n\t\t\tarr.push(items[i])\n\t\t}\n\treturn arr.length\n}\n\n/**\n * @template TKey\n * @template TVal\n * @param {Map<TKey, TVal[]>} map\n * @param {TKey} key\n * @param {TVal} val\n * @returns {TVal[]}\n */\nexport function mappedArrPush(map, key, val) {\n\tlet values = map.get(key)\n\tif (values) {\n\t\tvalues.push(val)\n\t} else {\n\t\tvalues = [val]\n\t\tmap.set(key, values)\n\t}\n\treturn values\n}\n\n/**\n * @template T\n * @param {T[]} arr\n * @param {(item:T) => boolean} func\n * @returns {T[][]}\n */\nexport function arrSplitFn(arr, func) {\n\tconst res = /**@type {T[][]}*/ ([[]])\n\tfor (let i = 0; i < arr.length; i++) {\n\t\tconst item = arr[i]\n\t\tif (func(item)) res.push([])\n\t\telse res[res.length - 1].push(item)\n\t}\n\treturn res\n}\n\n/**\n * @param {unknown[]} a\n * @param {unknown[]} b\n */\nexport function arrShallowEqualAsSets(a, b) {\n\tif (a.length !== b.length) return false\n\tfor (let i = 0; i < a.length; i++) if (!b.includes(a[i])) return false\n\treturn true\n}\n\n/**\n * @param {unknown[]} a\n * @param {unknown[]} b\n */\nexport function arrShallowEqual(a, b) {\n\tif (a.length !== b.length) return false\n\tfor (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return false\n\treturn true\n}\n\n/**\n * @template {string} TKey\n * @template TVal\n * @param {Record<TKey, TVal>} obj\n * @param {(a:[TKey,TVal], b:[TKey,TVal]) => number} sortFunc\n * @returns {Record<TKey, TVal>}\n */\nexport function sortObject(obj, sortFunc) {\n\tconst entries = /**@type {[TKey,TVal][]}*/ (Object.entries(obj)).sort(sortFunc)\n\tfor (const key in obj) delete obj[key]\n\tfor (const [key, val] of entries) obj[key] = val\n\treturn obj\n}\n/**\n * @template T\n * @param {T[]} arr\n * @param {T} item\n * @param {1|-1} [direction]\n * @returns {T}\n */\nexport function arrGetAfter(arr, item, direction = 1) {\n\tconst index = arr.indexOf(item)\n\treturn arr[(index + direction + arr.length) % arr.length]\n}\n\n/**\n * @template TKey\n * @template TVal\n * @param {Map<TKey, TVal>} map\n * @param {TKey} key\n * @param {() => TVal} defaultFunc\n * @returns {TVal}\n */\nexport function mapGetOrSet(map, key, defaultFunc) {\n\tlet value = map.get(key)\n\tif (value === undefined) {\n\t\tvalue = defaultFunc()\n\t\tmap.set(key, value)\n\t}\n\treturn value\n}\n\n/**\n * @template {string} TKey\n * @template TVal\n * @param {Partial<Record<TKey, TVal>>} obj\n * @param {TKey} key\n * @param {() => TVal} defaultFunc\n * @returns {TVal}\n */\nexport function objGetOrSet(obj, key, defaultFunc) {\n\tlet value = obj[key]\n\tif (value === undefined) {\n\t\tobj[key] = value = defaultFunc()\n\t}\n\treturn /**@type {TVal}*/ (value)\n}\n\n/**\n * @param {unknown} obj\n * @param {(item:unknown) => undefined|true|'skip-children'} func return true to abort iteration\n * @returns {boolean}\n */\nexport function objForEach(obj, func) {\n\tconst res = func(obj)\n\tif (res === 'skip-children') return false\n\tif (res) return true\n\n\tif (Array.isArray(obj)) {\n\t\tfor (const item of obj) if (objForEach(item, func)) return true\n\t} else if (typeof obj === 'object' && obj !== null) {\n\t\tfor (const attr in obj) if (objForEach(obj[attr], func)) return true\n\t}\n\treturn false\n}\n\n/**\n * @template T\n * @param {T | T[]} item\n * @returns {T[]}\n */\nexport function arrOrItemToArr(item) {\n\treturn Array.isArray(item) ? item : [item]\n}\n/**\n * @template T\n * @param {T[]} arr\n * @returns {T[] | T}\n */\nexport function arrItemIfSingle(arr) {\n\treturn arr.length === 1 ? arr[0] : arr\n}\n","export type BS_BreakpointCode = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl'\nexport const BS_BreakpointsCodes: BS_BreakpointCode[] = ['xs', 'sm', 'md', 'lg', 'xl', 'xxl']\n\nexport const BS_BreakpointsMap = { xs: 0, sm: 576, md: 768, lg: 992, xl: 1200, xxl: 1400 }\nexport function BS_getCurrBreakpoint(screenWidth: number): BS_BreakpointCode {\n\treturn (\n\t\t//todo правильные типы\n\t\t(Object.keys(BS_BreakpointsMap).find(k => screenWidth < BS_BreakpointsMap[k]) as BS_BreakpointCode) ||\n\t\t('xxl' as BS_BreakpointCode)\n\t)\n}\nexport function BS_isBreakpointLessThen(br: BS_BreakpointCode, targetBr: BS_BreakpointCode): boolean {\n\treturn BS_BreakpointsCodes.indexOf(br) <= BS_BreakpointsCodes.indexOf(targetBr)\n}\n","import { RefObject } from 'preact'\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks'\n\nimport { arrShallowEqual } from '#lib/utils/collections'\nimport { isPromise } from '#lib/utils/values'\nimport { logError } from '#src/errors'\nimport { BS_BreakpointCode, BS_getCurrBreakpoint } from '#src/utils/bootstrap'\n\ntype Pending = { _type: 'pending' }\n\nexport const PENDING: Pending = {} as never\n\nexport type LoadingState<T> = T | Error | Pending\n\nexport function isLoaded<T>(value: LoadingState<T>): value is T {\n\treturn value !== PENDING && !(value instanceof Error)\n}\n\nexport function useFetch<T>(\n\tloadFunc: (abortSignal: AbortSignal) => T,\n\targs: unknown[],\n): LoadingState<Awaited<T>> {\n\tconst controller = useRef<AbortController | null>(null)\n\tconst prevArgs = useRef<unknown[] | null>(null)\n\tconst data = useRef<LoadingState<Awaited<T>>>(PENDING)\n\tconst foceUpdate = useForceUpdate()\n\n\tif (prevArgs.current === null || !arrShallowEqual(prevArgs.current, args)) {\n\t\tif (controller.current !== null) controller.current.abort()\n\t\tconst ac: AbortController | null = new AbortController()\n\t\tcontroller.current = ac\n\n\t\tconst res = loadFunc(ac.signal)\n\t\tif (isPromise(res)) {\n\t\t\tres.then(res => (data.current = res as Awaited<T>))\n\t\t\t\t.catch(err => (data.current = err))\n\t\t\t\t.finally(foceUpdate)\n\t\t\tdata.current = PENDING\n\t\t} else {\n\t\t\tdata.current = res as Awaited<T>\n\t\t}\n\n\t\tprevArgs.current = args\n\t}\n\n\t// абортим при отмонтировании компонента\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (controller.current !== null) controller.current.abort()\n\t\t}\n\t}, [])\n\treturn data.current\n}\n\nexport function useFetchWithPrev<T>(\n\tloadFunc: (abortSignal: AbortSignal) => Promise<T> | T,\n\targs: unknown[],\n): [data: LoadingState<T>, isUpdating: boolean] {\n\tconst prevDataRef = useRef<LoadingState<T>>(PENDING)\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst data = useFetch(loadFunc, args)\n\tif (isLoaded(data)) prevDataRef.current = data\n\treturn [isLoaded(data) ? data : prevDataRef.current, data === PENDING]\n}\n\nexport const useToggle = (initial: boolean): [boolean, () => void] => {\n\tconst [flagState, setFlagState] = useState(initial)\n\treturn [flagState, useCallback(() => setFlagState(status => !status), [])]\n}\n\nexport const useClickAway = (ref: preact.RefObject<HTMLElement>, callback?: () => void): void => {\n\tconst handleClick = (e: MouseEvent | TouchEvent) => {\n\t\tif (ref.current && e.target instanceof HTMLElement && !ref.current.contains(e.target)) {\n\t\t\tcallback && callback()\n\t\t}\n\t}\n\tuseEffect(() => {\n\t\tdocument.addEventListener('mousedown', handleClick)\n\t\tdocument.addEventListener('touchstart', handleClick)\n\t\t// document.addEventListener('click', handleClick)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('mousedown', handleClick)\n\t\t\tdocument.removeEventListener('touchstart', handleClick)\n\t\t\t// document.removeEventListener('click', handleClick)\n\t\t}\n\t})\n}\n\ninterface WindowSize {\n\twidth: number | undefined\n\theight: number | undefined\n\tbreakpoint: BS_BreakpointCode\n}\nexport function useWindowSize(): WindowSize {\n\tconst [windowSize, setWindowSize] = useState<WindowSize>({\n\t\twidth: window?.innerWidth,\n\t\theight: window?.innerHeight,\n\t\tbreakpoint: BS_getCurrBreakpoint(window?.innerWidth || 0),\n\t})\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tsetWindowSize({\n\t\t\t\twidth: window.innerWidth,\n\t\t\t\theight: window.innerHeight,\n\t\t\t\tbreakpoint: BS_getCurrBreakpoint(window.innerWidth),\n\t\t\t})\n\t\t}\n\t\twindow.addEventListener('resize', handleResize)\n\t\thandleResize()\n\t\treturn () => window.removeEventListener('resize', handleResize)\n\t}, [])\n\treturn windowSize\n}\n\ndeclare global {\n\tinterface WindowEventMap {\n\t\t'x-local-tab-storage': CustomEvent & { detail: { key: string } }\n\t}\n}\n\nexport function useLocalStorage<T>(key: string, initialValue: T): [T, (val: T) => unknown] {\n\tconst [value, setValueInner] = useState(() => {\n\t\ttry {\n\t\t\tconst curRecord = localStorage.getItem(key) //reading 'localStorage' from window may fail with SecurityError\n\t\t\treturn curRecord ? JSON.parse(curRecord) : initialValue //JSON parsing may fail\n\t\t} catch (ex) {\n\t\t\tlogError(ex)\n\t\t\treturn initialValue\n\t\t}\n\t})\n\n\tconst setValueAndSave = useCallback(\n\t\t(val: T) => {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(key, JSON.stringify(val)) //reading 'localStorage' from window may fail with SecurityError\n\t\t\t} catch (ex) {\n\t\t\t\t// ¯\\_(ツ)_/¯\n\t\t\t}\n\t\t\tsetValueInner(val)\n\t\t\tdispatchEvent(new CustomEvent('x-local-tab-storage', { detail: { key } }))\n\t\t},\n\t\t[key],\n\t)\n\n\tuseEffect(() => {\n\t\tfunction onStorage(e: StorageEvent | { detail: { key: string } }) {\n\t\t\tconst affectedKey = 'detail' in e ? e.detail.key : e.key\n\t\t\tif (affectedKey === key) {\n\t\t\t\ttry {\n\t\t\t\t\tconst curRecord = localStorage.getItem(key) //reading 'localStorage' from window may fail with SecurityError\n\t\t\t\t\tif (curRecord) setValueInner(JSON.parse(curRecord)) //JSON parsing may fail\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tconsole.log(ex)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\taddEventListener('storage', onStorage)\n\t\taddEventListener('x-local-tab-storage', onStorage)\n\t\treturn () => {\n\t\t\tremoveEventListener('storage', onStorage)\n\t\t\tremoveEventListener('x-local-tab-storage', onStorage)\n\t\t}\n\t}, [key])\n\n\treturn [value, setValueAndSave]\n}\n\nexport function useHover<T extends Element>(): [RefObject<T>, boolean] {\n\tconst [value, setValue] = useState<boolean>(false)\n\tconst ref = useRef<T | null>(null)\n\tuseEffect(\n\t\t() => {\n\t\t\tconst node = ref.current\n\t\t\tif (!node) return\n\n\t\t\tconst handleMouseOver = () => setValue(true)\n\t\t\tconst handleMouseOut = () => setValue(false)\n\t\t\tnode.addEventListener('mouseover', handleMouseOver)\n\t\t\tnode.addEventListener('mouseout', handleMouseOut)\n\t\t\treturn () => {\n\t\t\t\tsetValue(false)\n\t\t\t\tnode.removeEventListener('mouseover', handleMouseOver)\n\t\t\t\tnode.removeEventListener('mouseout', handleMouseOut)\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[ref.current],\n\t)\n\treturn [ref, value]\n}\n\nexport const useWindowVisibility = () => {\n\tconst [isVisible, setIsVisible] = useState(\n\t\t// Focus for first render\n\t\tBUNDLE_ENV.IS_SSR ? true : document.visibilityState === 'visible',\n\t)\n\tuseEffect(() => {\n\t\tconst onVisibilityChange = () => setIsVisible(document.visibilityState === 'visible')\n\t\tconst onPageHide = () => setIsVisible(false)\n\t\tconst onPageShow = () => setIsVisible(true)\n\t\tdocument.addEventListener('visibilitychange', onVisibilityChange)\n\t\twindow.addEventListener('pagehide', onPageHide)\n\t\twindow.addEventListener('pageshow ', onPageShow)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('visibilitychange', onVisibilityChange)\n\t\t\twindow.removeEventListener('pagehide', onPageHide)\n\t\t\twindow.removeEventListener('pageshow ', onPageShow)\n\t\t}\n\t}, [])\n\treturn isVisible\n}\n/*\n * not used\n *\nexport function useInterval(callback: () => void, delay: number | null) {\n\tconst savedCallback = useRef(callback)\n\t// Remember the latest callback if it changes.\n\tuseLayoutEffect(() => {\n\t\tsavedCallback.current = callback\n\t}, [callback])\n\n\t// Set up the interval.\n\tuseEffect(() => {\n\t\t// Don't schedule if no delay is specified.\n\t\t// Note: 0 is a valid value for delay.\n\t\tif (!delay && delay !== 0) {\n\t\t\treturn\n\t\t}\n\n\t\tconst id = setInterval(() => savedCallback.current(), delay)\n\t\treturn () => clearInterval(id)\n\t}, [delay])\n}\n*/\nexport function useForceUpdate(): () => void {\n\tconst setValue = useState(0)[1]\n\treturn useRef(() => setValue(v => ~v)).current\n}\nexport function useVisibleTicker(callback: () => void, interval: number) {\n\tconst isVisible = useWindowVisibility()\n\n\tuseEffect(() => {\n\t\tif (!isVisible) return\n\t\tlet id\n\t\tfunction callbackInner() {\n\t\t\tcallback()\n\t\t\tid = setTimeout(callbackInner, interval - (Date.now() % interval) + 10)\n\t\t}\n\t\tcallbackInner()\n\t\treturn () => clearTimeout(id)\n\t\t// калбек не должен перезапускать таймер\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [interval, isVisible])\n}\n","import { sendMessage } from '#src/errors/rollbar'\r\nimport {\r\n\tI18N_CANCEL,\r\n\tI18N_REPORT_BUG,\r\n\tI18N_REPORT_BUG_GUIDE,\r\n\tI18N_SUBMIT,\r\n\tI18N_SUBMIT_BUG_ERROR,\r\n\tI18N_SUBMIT_BUG_SUCCESS,\r\n\tI18N_YOUR_MESSAGE_HERE,\r\n} from '#src/i18n/i18n'\r\nimport { useClickAway } from '#src/utils/hooks'\r\nimport { createPortal } from '#src/utils/preact-compat'\r\nimport { useCallback, useRef, useState } from 'preact/hooks'\r\n\r\nlet modalsEl: Element | null = null\r\n\r\nexport const ReportBugModal = ({ onClickAway }: { onClickAway(): void }): JSX.Element => {\r\n\tconst [message, setMessage] = useState<string>('')\r\n\tconst [isInvalid, setIsInvalid] = useState<boolean>(false)\r\n\tconst onMessageChange = useCallback(\r\n\t\te => {\r\n\t\t\tsetMessage(e.target.value)\r\n\t\t\tisInvalid && setIsInvalid(false)\r\n\t\t},\r\n\t\t[setMessage, isInvalid, setIsInvalid],\r\n\t)\r\n\tmodalsEl ??= document.querySelector('.modals') as Element\r\n\tconst modalRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\r\n\tuseClickAway(modalRef, onClickAway)\r\n\tconst tryToSendMessage = useCallback(() => {\r\n\t\tif (!message.length) return setIsInvalid(true)\r\n\t\tsendMessage('message from bug report modal: ' + message)\r\n\t\t\t.then(() => alert(I18N_SUBMIT_BUG_SUCCESS))\r\n\t\t\t.catch(() => alert(I18N_SUBMIT_BUG_ERROR))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tonClickAway()\r\n\t\t\t})\r\n\t}, [message, onClickAway, setIsInvalid])\r\n\treturn createPortal(\r\n\t\t<>\r\n\t\t\t<div className=\"modal-backdrop show d-block\"></div>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"modal d-block\"\r\n\t\t\t\tid=\"exampleModal\"\r\n\t\t\t\ttab-index=\"-1\"\r\n\t\t\t\taria-labelledby=\"exampleModalLabel\"\r\n\t\t\t\taria-hidden=\"true\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"modal-dialog modal-dialog-scrollable\" ref={modalRef}>\r\n\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n\t\t\t\t\t\t\t\t{I18N_REPORT_BUG}\r\n\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn-close btn-sm\"\r\n\t\t\t\t\t\t\t\taria-label=\"Close\"\r\n\t\t\t\t\t\t\t\tonClick={onClickAway}\r\n\t\t\t\t\t\t\t></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t<div className=\"text-muted\">{I18N_REPORT_BUG_GUIDE}</div>\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tvalue={message}\r\n\t\t\t\t\t\t\t\tplaceholder={I18N_YOUR_MESSAGE_HERE}\r\n\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\tclassName={`w-100 bg-light border ${\r\n\t\t\t\t\t\t\t\t\tisInvalid ? 'border-2 border-danger' : 'border-light'\r\n\t\t\t\t\t\t\t\t} rounded`}\r\n\t\t\t\t\t\t\t\tonInput={onMessageChange}\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-link text-decoration-none text-capitalize\"\r\n\t\t\t\t\t\t\t\tonClick={onClickAway}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{I18N_CANCEL}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-primary text-capitalize\"\r\n\t\t\t\t\t\t\t\tonClick={tryToSendMessage}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{I18N_SUBMIT}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>,\r\n\t\tmodalsEl,\r\n\t)\r\n}\r\n","import { I18N_CREATED_BY_US, I18N_REPORT_BUG } from '#src/i18n/i18n'\nimport { ReportBugModal } from '#src/modals/report-bug'\nimport { useCallback, useState } from 'preact/hooks'\n\nexport function Footer() {\n\tconst [isReportBugModalVisible, setIsReportBugModalVisible] = useState<boolean>(false)\n\tconst onRepBugBtnClick = useCallback(() => {\n\t\tsetIsReportBugModalVisible(true)\n\t}, [setIsReportBugModalVisible])\n\tconst closeRepBugModal = useCallback(() => {\n\t\tsetIsReportBugModalVisible(false)\n\t}, [setIsReportBugModalVisible])\n\treturn (\n\t\t<footer className=\"mt-auto bg-dark\">\n\t\t\t<div className=\"container my-3 opacity-75\">\n\t\t\t\t<div className=\"text-center mb-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn btn-link text-decoration-underline-dotted\"\n\t\t\t\t\t\tonClick={onRepBugBtnClick}\n\t\t\t\t\t>\n\t\t\t\t\t\t{I18N_REPORT_BUG}\n\t\t\t\t\t</button>\n\t\t\t\t\t{isReportBugModalVisible && <ReportBugModal onClickAway={closeRepBugModal} />}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"text-center\">{I18N_CREATED_BY_US}</div>\n\t\t\t</div>\n\t\t</footer>\n\t)\n}\n","\nexport const GENERATED_DATA_HASH = \"7e280670\"\n\n/** @type {import('#lib/parsing/combine').CharacterShortInfo[]} */\nexport const charactersShortList = [\n\t{\n\t\t\"code\": \"amber\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"barbara\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"beidou\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"bennett\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"chongyun\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"diluc\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"fischl\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"jean\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"kaeya\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"keqing\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"klee\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"lisa\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"mona\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"ningguang\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"noelle\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"qiqi\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"razor\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"sucrose\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"traveler-anemo\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"traveler-electro\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"traveler-geo\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"venti\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"xiangling\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"xingqiu\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"diona\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"tartaglia\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"xinyan\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"zhongli\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"albedo\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"ganyu\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"hu-tao\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"xiao\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"rosaria\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"eula\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"yanfei\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"kazuha\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"ayaka\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"sayu\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"yoimiya\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"aloy\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"kokomi\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"kujou-sara\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"raiden-shogun\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"thoma\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"gorou\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"itto\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"shenhe\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"yun-jin\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"yae-miko\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t}\n]\n\n/** @type {import('#lib/parsing').ArtifcatSetGroupsCodes} */\nexport const ART_GROUP_CODES = {\n\t\"18%-atk\": [\n\t\t\"echoes-of-an-offering\",\n\t\t\"gladiators-finale\",\n\t\t\"shimenawas-reminiscence\",\n\t\t\"vermillion-hereafter\",\n\t\t\"brave-heart\",\n\t\t\"resolution-of-sojourner\"\n\t],\n\t\"20%-er\": [\n\t\t\"emblem-of-severed-fate\",\n\t\t\"scholar\",\n\t\t\"the-exile\"\n\t]\n}\n","import { charactersShortList } from '../api/generated.js'\n\nexport const paths = /** @type {const} */ ({\n\tfront: [''],\n\tbuilds: ['/builds'],\n\tbuildCharacters: ['/builds/', ['code', charactersShortList.map(x => x.code)]],\n\tequipment: ['/equipment'],\n})\n\n/**\n * @param {import('./router').RoutePath} path\n * @param {string} url\n * @returns {Record<string, string> | null}\n */\nexport function matchPath(path, url) {\n\tif (path.length === 0) return null\n\tlet rem = url\n\tconst props = /**@type {Record<string, string>}*/ ({})\n\tfor (const part of path) {\n\t\tlet matched = true //true на случай пустых variants\n\t\tif (typeof part === 'string') {\n\t\t\t;[rem, matched] = withoutPrefix(rem, part)\n\t\t} else {\n\t\t\tconst [name, variants] = part\n\t\t\tfor (const variant of variants) {\n\t\t\t\t;[rem, matched] = withoutPrefix(rem, variant)\n\t\t\t\tif (matched) {\n\t\t\t\t\tprops[name] = variant\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!matched) return null\n\t}\n\treturn !rem || rem === '/' ? props : null\n}\n\n/**\n * @param {string} prefix\n * @param {import('./router').RoutePath} path\n * @param {number} [fromIndex]\n * @returns {string[]}\n */\nexport function pathToStrings(prefix, path, fromIndex = 0) {\n\tif (path.length === 0) return []\n\tif (fromIndex >= path.length) return [prefix]\n\n\tconst part = path[fromIndex]\n\tif (typeof part === 'string') {\n\t\treturn pathToStrings(prefix + part, path, fromIndex + 1)\n\t} else {\n\t\tconst [, variants] = part\n\t\treturn variants.flatMap(x => pathToStrings(prefix + x, path, fromIndex + 1))\n\t}\n}\n\n/**\n * @param {string} url\n * @param {string} prefix\n * @returns {[string, boolean]}\n */\nfunction withoutPrefix(url, prefix) {\n\treturn url.startsWith(prefix) ? [url.slice(prefix.length), true] : [url, false]\n}\n","import { ComponentType, h, Ref } from 'preact'\nimport { useEffect, useState } from 'preact/hooks'\n\nimport { matchPath } from './paths'\n\nexport type RoutePath = readonly (string | readonly [name: string, variants: readonly string[]])[]\n\ntype Routes = [RoutePath, ComponentType][]\n\ntype SubRoute<T> = readonly [string, readonly T[]]\ntype EmptySubRoute = readonly [string, readonly []]\ntype PathProps<T extends RoutePath> = {\n\t[K in keyof T as T[K] extends EmptySubRoute\n\t\t? never\n\t\t: T[K] extends SubRoute<unknown>\n\t\t? T[K][0]\n\t\t: never]: T[K] extends SubRoute<infer A> ? A : never\n} & {\n\t[K in keyof T as T[K] extends EmptySubRoute ? T[K][0] : never]?: undefined\n}\n\nconst URL_LANG_PREFIX = makeUrlLangPrefix(BUNDLE_ENV.LANG)\n\nfunction findRoutedComponent(routes: Routes, url: string): [ComponentType, Record<string, string>] | null {\n\tfor (const [route, comp] of routes) {\n\t\tconst props = matchPath(route, url)\n\t\tif (props) return [comp, props]\n\t}\n\treturn null\n}\n\nfunction pathSearchHash(url: { pathname: string; search: string; hash: string }) {\n\treturn url.pathname + url.search + url.hash\n}\n\nfunction handleAnchorClick(e: MouseEvent, routes: Routes) {\n\tif (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey || e.button !== 0) return\n\n\tconst a = e.target instanceof Element && e.target.closest('a')\n\tif (a && a.href && (!a.target || a.target === '_self')) {\n\t\tconst url = new URL(a.href)\n\t\tif (url.origin === location.origin) {\n\t\t\tif (findRoutedComponent(routes, url.pathname)) {\n\t\t\t\tif (pathSearchHash(location) !== pathSearchHash(url))\n\t\t\t\t\thistory.pushState(null, '', pathSearchHash(url))\n\t\t\t\te.preventDefault()\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function useRouter(routes: Routes) {\n\tconst [, forceUpdate] = useState(0)\n\n\tuseEffect(() => {\n\t\tfunction onClick(e: MouseEvent) {\n\t\t\tconst handled = handleAnchorClick(e, routes)\n\t\t\tif (handled) forceUpdate(x => x + 1)\n\t\t}\n\t\tfunction onPopState(e: PopStateEvent) {\n\t\t\tforceUpdate(x => x + 1)\n\t\t}\n\t\taddEventListener('click', onClick)\n\t\taddEventListener('popstate', onPopState)\n\t\treturn () => {\n\t\t\tremoveEventListener('click', onClick)\n\t\t\tremoveEventListener('popstate', onPopState)\n\t\t}\n\t}, [routes])\n\n\tconst res = findRoutedComponent(routes, location.pathname)\n\tif (!res) return '404'\n\tconst [Comp, props] = res\n\treturn <Comp {...props} />\n}\n\nexport const route = <TPath extends RoutePath>(\n\tpath: TPath,\n\tcomp: ComponentType<PathProps<TPath>>,\n): [RoutePath, ComponentType] => [[URL_LANG_PREFIX, ...path], comp as ComponentType]\n\nfunction makeUrlLangPrefix(lang: string): string {\n\treturn lang === 'en' ? '' : '/ru'\n}\n\nexport function isOnRoute(path: RoutePath): boolean {\n\treturn matchPath([URL_LANG_PREFIX, ...path], location.pathname) !== null\n}\n\nexport function makeLocationHrefForLang(lang: string): string {\n\tconst url = location.pathname + location.search + location.hash\n\tconst curPrefix = URL_LANG_PREFIX\n\tconst newPrefix = makeUrlLangPrefix(lang)\n\tlet newUrl = newPrefix + (url.startsWith(curPrefix) ? url.slice(curPrefix.length) : url)\n\tif (newUrl === '') newUrl = '/'\n\treturn newUrl\n}\n\nexport function A(\n\tprops: JSX.HTMLAttributes<HTMLAnchorElement> & { ref?: Ref<typeof A>; innerRef?: Ref<HTMLAnchorElement> },\n): JSX.Element {\n\tprops = Object.assign({}, props)\n\t// @ts-ignore\n\tprops.ref = props.innerRef\n\tdelete props.innerRef\n\tif (props.href) props.href = URL_LANG_PREFIX + props.href\n\t// тайпскриптовый JSX-трансформер какой-то туповатый:\n\t// он для <a {...props}/> генерит лишний Object.assign({}, props)\n\treturn h('a', props as Parameters<typeof h>[1])\n}\n","export const BULLET = '•'\nexport const TIMES = '×'\nexport const LEFT_POINTING = '‹'\nexport const RIGHT_POINTING = '›'\nexport const ELLIPSIS = '…'\nexport const STAR = '★'\nexport const HEART = '♥'\nexport const HEART_EMPTY = '♡'\nexport const VARIATION_SELECTOR = '\\uFE0E'\n","export function GlobeIcon({ classes = '' }) {\n\treturn (\n\t\t<svg\n\t\t\tclass={classes}\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\td=\"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm2.8-2.6a7 7 0 0 0 4.2-5.9c-.8.5-1.9.8-3 1.1-.2 1.9-.6 3.5-1.2 4.8ZM9.2 5.6a7 7 0 0 0-4 4.6l1.2.8 1.6.5c0-2.3.5-4.4 1.2-6Zm.9 8.3c.2 1.5.5 2.7.9 3.7l.8 1.2.2.2.2-.2.8-1.2c.4-1 .7-2.2.9-3.7a20 20 0 0 1-3.8 0Zm-2-.3c.1 1.9.5 3.5 1 4.8a7 7 0 0 1-4-5.9c.7.5 1.8.8 3 1.1Zm5.9-1.7a17.8 17.8 0 0 1-4 0c0-2.2.4-4.2 1-5.5l.8-1.2.2-.2.2.2.8 1.2c.6 1.3 1 3.3 1 5.5Zm2-.4c0-2.3-.5-4.4-1.2-6a7 7 0 0 1 4 4.7l-1.2.8-1.6.5Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t)\n}\n","import { useCallback, useRef, useState } from 'preact/hooks'\n\nimport {\n\tI18N_ABOUT_SITE,\n\tI18N_BUILDS,\n\tI18N_LANG_NAME,\n\tI18N_LANG_NAMES,\n\tI18N_OUR_DISCORD,\n} from '#src/i18n/i18n'\nimport { paths } from '#src/routes/paths'\nimport { A, isOnRoute, makeLocationHrefForLang } from '#src/routes/router'\nimport { useClickAway } from '#src/utils/hooks'\nimport { VARIATION_SELECTOR } from '#src/utils/typography'\nimport { GlobeIcon } from './globe-icon'\nimport { LINK_DISCORD_INVITE } from '#src/utils/links'\n\ntype Props = { isNavExpanded: boolean }\n\nexport function Nav({ isNavExpanded }: Props): JSX.Element {\n\tconst [isExpanded, setIsExpanded] = useState(false)\n\tconst ddRef = useRef(null)\n\tconst closeDd = useCallback(() => isExpanded && setIsExpanded(false), [setIsExpanded, isExpanded])\n\tconst openDd = useCallback(() => !isExpanded && setIsExpanded(true), [setIsExpanded, isExpanded])\n\n\t// TODO клик мимо компонента\n\tuseClickAway(ddRef, closeDd)\n\n\tconst isOnBuildsPages = isOnRoute(paths.builds) || isOnRoute(paths.buildCharacters)\n\n\treturn (\n\t\t<div className={`collapse navbar-collapse ${isNavExpanded ? 'show' : ''}`}>\n\t\t\t<ul className=\"navbar-nav me-auto mb-2 mb-md-0\">\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<A className={'nav-link' + (isOnBuildsPages ? ' active' : '')} href=\"/builds\">\n\t\t\t\t\t\t{I18N_BUILDS}\n\t\t\t\t\t</A>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<A className=\"nav-link\" href=\"#\">\n\t\t\t\t\t\t{I18N_ABOUT_SITE}\n\t\t\t\t\t</A>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<a className=\"nav-link\" target=\"_blank\" href={LINK_DISCORD_INVITE}>\n\t\t\t\t\t\t{I18N_OUR_DISCORD}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<ul className=\"navbar-nav mb-2 mb-md-0 float-md-end\">\n\t\t\t\t<li className=\"nav-item dropdown\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName={`nav-link dropdown-toggle ${isExpanded ? 'show' : ''}`}\n\t\t\t\t\t\tid=\"navbarDropdown\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\tonClick={openDd}\n\t\t\t\t\t>\n\t\t\t\t\t\t<GlobeIcon />\n\t\t\t\t\t\t{VARIATION_SELECTOR} {I18N_LANG_NAME}\n\t\t\t\t\t</a>\n\t\t\t\t\t{/* todo почему-то не добавляется класс dropdown-menu-end */}\n\t\t\t\t\t<ul\n\t\t\t\t\t\tclassName={`dropdown-menu ${isExpanded ? 'show' : ''}`}\n\t\t\t\t\t\tstyle={'right: 0'}\n\t\t\t\t\t\tref={ddRef}\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* В переключатеях будут неправильные ссылки, если сменится страница,\n\t\t\t\t\t\tа список языков не будет перерендерен (если тут таки появится useMemo).\n\t\t\t\t\t\tТак что явно генерим сожержимое списка после разворачивания дропдауна. */}\n\t\t\t\t\t\t{isExpanded &&\n\t\t\t\t\t\t\tBUNDLE_ENV.LANGS.map(lang => {\n\t\t\t\t\t\t\t\tconst langName = I18N_LANG_NAMES[lang]\n\t\t\t\t\t\t\t\tconst isActiveLang = langName === I18N_LANG_NAME\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li key={lang}>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName={`dropdown-item ${isActiveLang ? 'active' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\thref={makeLocationHrefForLang(lang)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{I18N_LANG_NAMES[lang]}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n","import { A } from '#src/routes/router'\nimport { useState } from 'preact/hooks'\n\nimport { Nav } from '../components/nav'\n\nexport function Header() {\n\tconst [isNavExpanded, setIsNavExpanded] = useState(false)\n\t// TODO клик мимо компонента\n\treturn (\n\t\t<header>\n\t\t\t<div className=\"navbar navbar-expand-md navbar-dark bg-primary\">\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<A className=\"navbar-brand\" href=\"/\">\n\t\t\t\t\t\tGenshin Base\n\t\t\t\t\t</A>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"navbar-toggler\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setIsNavExpanded(!isNavExpanded)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<Nav isNavExpanded={isNavExpanded} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t)\n}\n","import { setDayStartUTC, weekdayAsMonSun } from './utils/date.js'\n\n/** @typedef {'pyro' | 'electro' | 'hydro' | 'dendro' | 'cryo' | 'anemo' | 'geo'} GI_ElementCode */\n/** @typedef {'claymore' | 'sword' | 'catalyst' | 'polearm' | 'bow'} GI_WeaponTypeCode */\n/** @typedef {'flower' | 'plume' | 'sands' | 'goblet' | 'circlet'} GI_ArtifactTypeCode */\n/** @typedef {1 | 2 | 3 | 4 | 5} GI_RarityCode */\n/**\n * @typedef {'wishes'|'event-wishes'|'events'|'battle-pass'|'in-game-shop'|\n *   'forging'|'fishing'|'npc-shop'|'chests'|'quests'|'puzzles'|'investigation'|\n *   'adventure-rank-10'|'playstation'} GI_WeaponObtainSource\n */\n/** @typedef {'limited'|'unlimited'} GI_DomainTypeCode */\n\n/** @typedef {{mapCode:MapCode, x:number, y:number}} MapLocation */\n\n/** @typedef {'teyvat'|'enkanomiya'} MapCode */\n/** @type {MapCode[]} */\nexport const GI_MAP_CODES = ['teyvat', 'enkanomiya']\n\n/** @typedef {'mondstadt'|'liyue'|'inazuma'} GI_RegionCode */\n/** @type {GI_RegionCode[]} */\nexport const GI_REGION_CODES = ['mondstadt', 'liyue', 'inazuma']\n\n/** @typedef {'europe'|'asia'|'north-america'} GI_ServerRegionCode */\n/** @type {GI_ServerRegionCode[]} */\nexport const GI_SERVER_REGIONS = ['europe', 'asia', 'north-america']\n\n/** @typedef {'mon'|'tue'|'wed'|'thu'|'fri'|'sat'|'sun'} WeekdayCode */\n/** @type {WeekdayCode[]} */\nexport const GI_ROTATION_WEEKDAY_CODES = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun']\n\n/** @type {GI_ElementCode[]} */\nexport const GI_ELEMENT_CODES = ['pyro', 'electro', 'hydro', 'dendro', 'cryo', 'anemo', 'geo']\n\n/** @type {GI_WeaponTypeCode[]} */\nexport const GI_WEAPON_TYPE_CODES = ['claymore', 'sword', 'catalyst', 'polearm', 'bow']\n\n/** @type {GI_ArtifactTypeCode[]} */\nexport const GI_ARTIFACT_TYPE_CODES = ['flower', 'plume', 'sands', 'goblet', 'circlet']\n\nexport const ART_GROUP_18_ATK_CODE = '18%-atk'\nexport const ART_GROUP_20_ER_CODE = '20%-er'\n/** @typedef {'18%-atk'|'20%-er'} GI_ArtifactGroupCode */\n/** @type {GI_ArtifactGroupCode[]} */\nexport const GI_ARTIFACT_GROUP_CODES = [ART_GROUP_18_ATK_CODE, ART_GROUP_20_ER_CODE]\n\n/** @type {GI_RarityCode[]} */\nexport const GI_RARITY_CODES = [1, 2, 3, 4, 5]\n\n/** Обычные коды, используются как есть */\nconst _GI_STAT_REGULAR = /**@type {const}*/ (['em'])\n/** Используется как в обычном виде, так и с процентами: <stat> и <stat>% */\nconst _GI_STAT_PERCENT = /**@type {const}*/ (['def', 'dmg', 'atk', 'hp', 'er', 'healing'])\n/** Используются с префиксом 'crit-' */\nconst _GI_STAT_CRIT_SUFFIXES = /**@type {const}*/ (['rate', 'dmg', 'rate%', 'dmg%'])\n/** Используются с суффиксами '-dmg' и '-dmg%' */\nconst _GI_STAT_DMG_PEFIXES = /**@type {const}*/ (['phys', 'cryo', 'geo', 'anemo', 'hydro', 'electro', 'pyro'])\n\n/**\n * @typedef {typeof _GI_STAT_REGULAR[number]\n *   | typeof _GI_STAT_PERCENT[number]\n *   | `${typeof _GI_STAT_PERCENT[number]}%`\n *   | `crit-${typeof _GI_STAT_CRIT_SUFFIXES[number]}`\n *   | `${typeof _GI_STAT_DMG_PEFIXES[number]}-dmg`\n *   | `${typeof _GI_STAT_DMG_PEFIXES[number]}-dmg%`} GI_KnownStatBonusCode\n */\n\nexport const GI_KNOWN_STAT_BONUS_CODES = /**@type {GI_KnownStatBonusCode[]}*/ (\n\t/**@type {readonly string[]}*/ (_GI_STAT_REGULAR)\n\t\t.concat(_GI_STAT_PERCENT)\n\t\t.concat(_GI_STAT_PERCENT.map(x => x + '%'))\n\t\t.concat(_GI_STAT_CRIT_SUFFIXES.map(x => 'crit-' + x))\n\t\t.concat(_GI_STAT_DMG_PEFIXES.map(x => x + '-dmg'))\n\t\t.concat(_GI_STAT_DMG_PEFIXES.map(x => x + '-dmg%'))\n)\n\n/**\n * Сдвиг таймзоны региона относительно UTC (в часах)\n * @type {Record<GI_ServerRegionCode, number>}\n */\nexport const GI_REGION_TIMEZONE_OFFSET = {\n\teurope: 1,\n\tasia: 8,\n\t'north-america': -5,\n}\n/** Время перезапуска сервера (в часах) относительно полуночи по локальному времени региона */\nexport const GI_SERVER_RESET_TIME = 4\n/**\n * @param {GI_ServerRegionCode} regionCode\n * @returns {{weekdayCode:WeekdayCode, weekdayMonSun:number, resetIn:number, resetAt:Date}}\n */\nexport function getRegionTime(regionCode) {\n\tconst now = new Date()\n\t// время до перезапуска сервера относительно конца дня по UTC\n\tconst offsetHours = GI_SERVER_RESET_TIME - GI_REGION_TIMEZONE_OFFSET[regionCode]\n\n\tconst lastResetDate = new Date(now)\n\tlastResetDate.setHours(lastResetDate.getHours() - offsetHours)\n\tconst weekdayMonSun = weekdayAsMonSun(lastResetDate.getUTCDay())\n\tsetDayStartUTC(lastResetDate)\n\tlastResetDate.setUTCHours(offsetHours)\n\n\tconst nextResetDate = new Date(lastResetDate)\n\tnextResetDate.setDate(nextResetDate.getDate() + 1)\n\n\treturn {\n\t\tweekdayMonSun: weekdayMonSun,\n\t\tweekdayCode: GI_ROTATION_WEEKDAY_CODES[weekdayMonSun],\n\t\tresetIn: +nextResetDate - +now,\n\t\tresetAt: nextResetDate,\n\t}\n}\n/**\n * {@link https://www.timeanddate.com/time/map/}\n * @returns {GI_ServerRegionCode}\n */\nexport function guessCurrentRegion() {\n\tif (navigator.language.startsWith('ru')) return 'europe'\n\tconst curOffset = -new Date().getTimezoneOffset() / 60\n\tif (curOffset <= -2) return 'north-america'\n\tif (curOffset >= 5) return 'asia'\n\treturn 'europe'\n}\n\n/** @param {string} name */\nexport function getCharacterCodeFromName(name) {\n\tconst code = name.trim().toLocaleLowerCase().replace(/\\s/g, '-')\n\tif (code === 'childe') return 'tartaglia'\n\tif (code === 'kamisato-ayaka') return 'ayaka'\n\tif (code === 'sangonomiya-kokomi') return 'kokomi'\n\tif (code === 'kaedehara-kazuha') return 'kazuha'\n\tif (code === 'arataki-itto') return 'itto'\n\treturn code\n}\n\n/** @param {string} name */\nexport function getArtifactCodeFromName(name) {\n\treturn name.trim().toLocaleLowerCase().replace(/\\s/g, '-').replace(/'/g, '')\n}\n\n/** @param {string} name */\nexport function getWeaponCodeFromName(name) {\n\treturn name\n\t\t.trim()\n\t\t.toLocaleLowerCase()\n\t\t.replace(/\\s+/g, '-')\n\t\t.replace(/['\"«»]/g, '')\n}\n\n/** @param {string} name */\nexport function getDomainCodeFromName(name) {\n\treturn name\n\t\t.trim()\n\t\t.toLocaleLowerCase()\n\t\t.replace(/[\\s:]+/g, '-')\n\t\t.replace(/'/g, '')\n}\n\n/** @param {string} name */\nexport function getItemCodeFromName(name) {\n\treturn name.trim().toLocaleLowerCase().replace(/\\s+/g, '-').replace(/'/g, '')\n}\n\n/** @param {string} name */\nexport function getEnemyCodeFromName(name) {\n\treturn name\n\t\t.trim()\n\t\t.toLocaleLowerCase()\n\t\t.replace(/[\\s:\\-,]+/g, '-')\n\t\t.replace(/'/g, '')\n}\n\n/**\n * @template {{rarity:GI_RarityCode}} T\n * @param {T[]} items\n * @returns {T}\n */\nexport function getWithMaxRarity(items) {\n\tlet maxItem = items[0]\n\tfor (let i = 0; i < items.length; i++) if (maxItem.rarity < items[i].rarity) maxItem = items[i]\n\treturn maxItem\n}\n\n/** @type {Record<MapCode, string>} */\nconst locEnc_map2code = {\n\tteyvat: 'T',\n\tenkanomiya: 'E',\n}\n/** @type {Record<string, MapCode>} */\nconst locEnc_code2map = {\n\tT: 'teyvat',\n\tE: 'enkanomiya',\n}\n/**\n * @param {MapLocation[]} locations\n * @param {number} [downsample]\n * @returns {string}\n */\nexport function encodeLocations(locations, downsample = 1) {\n\tif (downsample < 1 || downsample > 35 || downsample % 1 !== 0)\n\t\tthrow new Error(`wrong downsample: ${downsample}`)\n\n\tconst sortedLocs = locations.slice().sort((a, b) => a.x - b.x || a.y - b.y)\n\n\tlet res = downsample.toString(36)\n\tfor (const [groupMapCode, groupLetter] of Object.entries(locEnc_map2code)) {\n\t\tlet xx = ''\n\t\tlet yy = ''\n\t\tfor (const { mapCode, x, y } of sortedLocs) {\n\t\t\tif (mapCode === groupMapCode) {\n\t\t\t\txx += encodeLocNum(x, downsample)\n\t\t\t\tyy += encodeLocNum(y, downsample)\n\t\t\t}\n\t\t}\n\t\tif (xx || yy) res += xx + yy + groupLetter\n\t}\n\treturn res\n}\n/**\n * @param {MapLocation[]} locations\n * @param {number} [downsample]\n * @returns {string}\n */\nexport function encodeLocationsChecked(locations, downsample = 1) {\n\tconst res = encodeLocations(locations, downsample)\n\n\tconst codes = Object.keys(locEnc_map2code)\n\tconst sortedLocs = locations\n\t\t.slice()\n\t\t.sort((a, b) => codes.indexOf(a.mapCode) - codes.indexOf(b.mapCode) || a.x - b.x || a.y - b.y)\n\t\t.map(l => ({\n\t\t\t...l,\n\t\t\tx: Math.round(l.x / downsample) * downsample,\n\t\t\ty: Math.round(l.y / downsample) * downsample,\n\t\t}))\n\tconst decodedLocs = decodeLocations(res)\n\tconst inJson = JSON.stringify(sortedLocs)\n\tconst outJson = JSON.stringify(decodedLocs)\n\tif (inJson !== outJson)\n\t\tthrow new Error('wrong decoded locations:\\n> ' + inJson + '\\n> ' + outJson + '\\n> ' + res)\n\n\treturn res\n}\n/**\n * @param {string} encodedLocations\n * @returns {MapLocation[]}\n */\nexport function decodeLocations(encodedLocations) {\n\tconst downsample = parseInt(encodedLocations[0], 36)\n\tencodedLocations = encodedLocations.slice(1)\n\n\tconst locs = /**@type {MapLocation[]}*/ ([])\n\twhile (encodedLocations) {\n\t\tlet i = 0\n\t\tfor (; i < encodedLocations.length; i++) {\n\t\t\tconst mapCode = locEnc_code2map[encodedLocations[i]]\n\t\t\tif (mapCode) {\n\t\t\t\tconst len3 = (i / 2) | 0\n\t\t\t\tfor (let j = 0; j < len3; j += 3) {\n\t\t\t\t\tconst x = decodeLocNum(encodedLocations, j, downsample)\n\t\t\t\t\tconst y = decodeLocNum(encodedLocations, j + len3, downsample)\n\t\t\t\t\tlocs.push({ mapCode, x, y })\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tencodedLocations = encodedLocations.slice(i + 1)\n\t}\n\treturn locs\n}\nconst LOC_NUM_ENC_OFFSET = 18 * 36 * 36\n/**\n * @param {number} num\n * @param {number} downsample\n */\nfunction encodeLocNum(num, downsample) {\n\tconst numD = Math.round(num / downsample)\n\tif (numD < -LOC_NUM_ENC_OFFSET || numD >= LOC_NUM_ENC_OFFSET)\n\t\tthrow new Error(`location value out of range: ${num} (${numD})`)\n\tconst str = (LOC_NUM_ENC_OFFSET + numD).toString(36)\n\treturn '0'.repeat(3 - str.length) + str\n}\n/**\n * @param {string} str\n * @param {number} i\n * @param {number} downsample\n */\nfunction decodeLocNum(str, i, downsample) {\n\treturn (parseInt(str.slice(i, i + 3), 36) - LOC_NUM_ENC_OFFSET) * downsample\n}\n","/**\n * Конвертирует номер дня недели из вс-пн…-сб в пн-вт…-вс\n * @param {number} weekday\n * @returns {number}\n */\nexport function weekdayAsMonSun(weekday) {\n\treturn weekday === 0 ? 6 : weekday - 1\n}\n\n/**\n * @param {Date} date\n * @returns {number}\n */\nexport function setDayStartUTC(date) {\n\treturn date.setUTCHours(0, 0, 0, 0)\n}\n","import { DomainShortInfo, EnemyShortInfo, ItemShortInfo } from '#lib/parsing/combine'\n\nexport function apiGetJSONFile<T>(path: string, signal?: AbortSignal | null): Promise<T> | T {\n\tif (BUNDLE_ENV.IS_SSR) {\n\t\treturn JSON.parse(global._SSR_READ_PUBLIC(path))\n\t} else {\n\t\treturn fetch(BUNDLE_ENV.ASSET_PATH + path, { method: 'GET', signal }).then(x => x.json())\n\t}\n}\n\ntype MapByCodeInner<T> = T extends (infer A)[] ? (A extends { code: string } ? Map<string, A> : never) : never\n\nexport type MapAllByCode<T> = T & {\n\tmaps: {\n\t\t[K in keyof T as T[K] extends (infer A)[]\n\t\t\t? A extends { code: string }\n\t\t\t\t? K\n\t\t\t\t: never\n\t\t\t: never]: MapByCodeInner<T[K]>\n\t}\n}\n\nexport function mapAllByCode<T>(obj: T): MapAllByCode<T> {\n\t// @ts-ignore\n\tconst maps: MapAllByCode<T>['maps'] = {}\n\tfor (const attr in obj) {\n\t\tconst val = obj[attr]\n\t\tif (Array.isArray(val) && (val.length === 0 || 'code' in val[0])) {\n\t\t\t// @ts-ignore\n\t\t\tmaps[attr] = new Map(val.map(x => [x.code, x]))\n\t\t}\n\t}\n\treturn Object.assign({}, obj, { maps })\n}\n\nexport type RelItemsShort = { items: Map<string, ItemShortInfo> }\nexport type RelDomainsShort = { domains: Map<string, DomainShortInfo> }\nexport type RelEnemiesShort = { enemies: Map<string, EnemyShortInfo> }\n\nexport function getAllRelated<T>(map: Map<string, T>, codes: string[]): T[] {\n\tconst res: T[] = []\n\tfor (const code of codes) {\n\t\tconst item = map.get(code)\n\t\tif (item !== undefined) res.push(item)\n\t}\n\treturn res\n}\n\n/*\ntype MergeNestedInner<TBase, T> = T & {\n\t[K in keyof T as K extends 'materialCodes'\n\t\t? 'materials'\n\t\t: K extends 'domainCodes'\n\t\t? 'domains'\n\t\t: K extends 'enemyCodes'\n\t\t? 'enemies'\n\t\t: K]: K extends 'materialCodes'\n\t\t? TBase extends { items: (infer TItem)[] }\n\t\t\t? TItem[]\n\t\t\t: never\n\t\t: K extends 'domainCodes'\n\t\t? TBase extends { domains: (infer TDomain)[] }\n\t\t\t? TDomain[]\n\t\t\t: never\n\t\t: K extends 'enemyCodes'\n\t\t? TBase extends { enemies: (infer TEnemy)[] }\n\t\t\t? TEnemy[]\n\t\t\t: never\n\t\t: MergeNestedInner<TBase, T[K]>\n}\n\ntype WithNested_<T, TArt, TItem, TDomain, TEnemy> = T & {\n\t[K in keyof T as K extends 'materialCodes'\n\t\t? 'materials'\n\t\t: K extends 'domainCodes'\n\t\t? 'domains'\n\t\t: K extends 'enemyCodes'\n\t\t? 'enemies'\n\t\t: K]: K extends 'materialCodes'\n\t\t? TItem\n\t\t: K extends 'domainCodes'\n\t\t? TDomain\n\t\t: K extends 'enemyCodes'\n\t\t? TEnemy\n\t\t: WithNested_<T[K], TItem, TDomain, TEnemy>\n}\n\ntype WithNestedAuto<T> = WithNested_<\n\tT,\n\tT extends { items: (infer TItem)[] } ? TItem[] : never,\n\tT extends { artifacts: (infer TArt)[] } ? TArt[] : never,\n\tT extends { domains: (infer TDomain)[] } ? TDomain[] : never,\n\tT extends { enemies: (infer TEnemy)[] } ? TEnemy[] : never\n>\n\nexport type WithNested<T> = MergeNestedInner<T, T>\n\nexport function addNested<T>(obj: T): WithNested<T> {\n\tconst mapsCache = {}\n\tfunction getAllByCode(codes, attr) {\n\t\tif (!(attr in obj)) throw new Error(`no attr '${attr}' in obj`)\n\t\tconst map = (mapsCache[attr] = mapsCache[attr] ?? new Map(obj[attr].map(x => [x.code, x])))\n\t\tconst res: unknown[] = []\n\t\tfor (const code of codes) {\n\t\t\tconst item = map.get(code)\n\t\t\tif (item) res.push(item)\n\t\t}\n\t\treturn res\n\t}\n\n\tconst relatedAttrMap = {\n\t\tmaterialCodes: ['materials', 'items'],\n\t\tdomainCodes: ['domains', 'domains'],\n\t\tenemyCodes: ['enemies', 'enemies'],\n\t}\n\tfunction mergeInner(cur) {\n\t\tif (cur === null || typeof cur !== 'object') return cur\n\n\t\tfor (const attr in cur) {\n\t\t\tmergeInner(cur[attr])\n\t\t\tconst rel = relatedAttrMap[attr]\n\t\t\tif (rel) cur[rel[0]] = getAllByCode(cur[attr], rel[1])\n\t\t}\n\t}\n\n\tmergeInner(obj)\n\treturn obj as WithNested<T>\n}\n*/\n\n/*\ntype ItemsWithCodeAttrs<T> = {\n\t[K in keyof T]: T[K] extends (infer A)[] ? (A extends { code: string } ? K : never) : never\n}[keyof T]\n\nexport function mapByCode<T, K extends ItemsWithCodeAttrs<T>>(obj: T, attrs: K[]): MapByCode<T, K> {\n\t// @ts-ignore\n\tconst maps: MapByCode<T, K>['maps'] = {}\n\tfor (const attr of attrs) {\n\t\t// @ts-ignore\n\t\tmaps[attr] = new Map(obj[attr].map(x => [x.code, x]))\n\t}\n\treturn Object.assign({}, obj, { maps })\n}\n*/\n","import { isPromise } from '#lib/utils/values'\nimport { GENERATED_DATA_HASH } from './generated'\nimport { apiGetJSONFile, mapAllByCode, MapAllByCode } from './utils'\n\nimport type {\n\tArtifactsFullInfoWithRelated,\n\tCharacterFullInfoWithRelated,\n\tExtractedLocationsInfo,\n\tMaterialsTimetableWithRelated,\n\tWeaponsFullInfoWithRelated,\n} from '#lib/parsing/combine'\nimport type { ChangelogsTable } from '#lib/parsing/helperteam/types'\n\nconst get = <T>(prefix: string, signal: AbortSignal) =>\n\tapiGetJSONFile<T>(`generated/${prefix}.json?v=${GENERATED_DATA_HASH}`, signal)\n\nconst getLang = <T>(prefix: string, signal: AbortSignal) => get<T>(prefix + '-' + BUNDLE_ENV.LANG, signal)\n\ntype PromiseOrSync<T> = Promise<T> | T\n\nconst _map = <T, R>(val: PromiseOrSync<T>, func: (v: T) => R): PromiseOrSync<R> =>\n\tisPromise(val) ? val.then(func) : func(val)\n\nexport function apiGetCharacter(\n\tcode: string,\n\tsignal: AbortSignal,\n): PromiseOrSync<MapAllByCode<CharacterFullInfoWithRelated>> {\n\treturn _map(getLang<CharacterFullInfoWithRelated>(`characters/${code}`, signal), mapAllByCode)\n}\n\nexport function apiGetCharacterRelatedLocs(\n\tcode: string,\n\tsignal: AbortSignal,\n): PromiseOrSync<ExtractedLocationsInfo> {\n\treturn getLang(`characters/${code}-locs`, signal)\n}\n\nexport function apiGetArtifacts(\n\tsignal: AbortSignal,\n): PromiseOrSync<MapAllByCode<ArtifactsFullInfoWithRelated>> {\n\treturn _map(getLang<ArtifactsFullInfoWithRelated>(`artifacts`, signal), mapAllByCode)\n}\n\nexport function apiGetWeapons(signal: AbortSignal): PromiseOrSync<MapAllByCode<WeaponsFullInfoWithRelated>> {\n\treturn _map(getLang<WeaponsFullInfoWithRelated>(`weapons`, signal), mapAllByCode)\n}\n\nexport function apiMaterialsTimetable(\n\tsignal: AbortSignal,\n): PromiseOrSync<MapAllByCode<MaterialsTimetableWithRelated>> {\n\treturn _map(getLang<MaterialsTimetableWithRelated>(`timetables/materials`, signal), mapAllByCode)\n}\n\nexport function apiGetChangelogs(onlyRecent: boolean, signal: AbortSignal): PromiseOrSync<ChangelogsTable> {\n\treturn get(`changelogs${onlyRecent ? '-recent' : ''}`, signal)\n}\n","import { useMemo } from 'preact/hooks'\n\nimport { decodeLocations } from '#lib/genshin'\nimport {\n\tCharacterFullInfoWithRelated,\n\tEnemyShortInfo,\n\tExtractedLocationsInfo,\n\tItemShortInfo,\n} from '#lib/parsing/combine'\nimport { promiseNever } from '#lib/utils/values'\nimport { isLoaded, LoadingState, useFetch, useFetchWithPrev } from '#src/utils/hooks'\nimport { apiGetCharacter, apiGetCharacterRelatedLocs } from './endpoints'\nimport { MapAllByCode, mapAllByCode } from './utils'\n\nexport function useBuildWithDelayedLocs(\n\tcharacterCode: string,\n): [build: LoadingState<MapAllByCode<CharacterFullInfoWithRelated>>, isUpdating: boolean] {\n\tconst [build, isUpdating] = useFetchWithPrev(sig => apiGetCharacter(characterCode, sig), [characterCode])\n\tconst buildIsLoaded = isLoaded(build)\n\n\tconst locs = useFetch(\n\t\tsig =>\n\t\t\tbuildIsLoaded\n\t\t\t\t? apiGetCharacterRelatedLocs(characterCode, sig) //\n\t\t\t\t: promiseNever(), //не загружаем локации, пока не загрузится до конца билд\n\t\t[characterCode, buildIsLoaded],\n\t)\n\n\tconst buildWithLocs = useMemo(\n\t\t() => (buildIsLoaded && isLoaded(locs) ? applyFullInfoLocationsImmut(build, locs) : build),\n\t\t[build, buildIsLoaded, locs],\n\t)\n\treturn [buildWithLocs, isUpdating]\n}\n\nfunction applyFullInfoLocationsImmut(\n\tfullInfo: MapAllByCode<CharacterFullInfoWithRelated>,\n\tlocsInfo: ExtractedLocationsInfo,\n): MapAllByCode<CharacterFullInfoWithRelated> {\n\tconst items = applyItemsLocationsImmut(fullInfo.items, locsInfo.items)\n\tconst enemies = applyItemsLocationsImmut(fullInfo.enemies, locsInfo.enemies)\n\treturn mapAllByCode({ ...fullInfo, items, enemies })\n}\n\nfunction applyItemsLocationsImmut<T extends ItemShortInfo | EnemyShortInfo>(\n\titems: T[],\n\tlocItems: Record<string, string>,\n): T[] {\n\tlet resItems = items\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst locs = locItems[items[i].code]\n\t\tif (locs) {\n\t\t\tif (resItems === items) resItems = items.slice()\n\t\t\tresItems[i] = { ...items[i], locations: decodeLocations(locs) }\n\t\t}\n\t}\n\treturn resItems\n}\n","export function Spinner(): JSX.Element {\n\treturn (\n\t\t<div class=\"d-flex justify-content-center\">\n\t\t\t<div class=\"spinner-border\" role=\"status\">\n\t\t\t\t<span class=\"visually-hidden\">Loading...</span>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\nexport function CentredSpinner(): JSX.Element {\n\treturn (\n\t\t<div className=\"position-absolute top-0 bottom-0 start-0 end-0 d-flex justify-content-center align-items-center\">\n\t\t\t<Spinner />\n\t\t</div>\n\t)\n}\n","export default __webpack_public_path__ + \"circlet.a7d84b1e.png\";","export default __webpack_public_path__ + \"flower.695510cb.png\";","export default __webpack_public_path__ + \"goblet.06e92e38.png\";","export default __webpack_public_path__ + \"plume.6851630b.png\";","export default __webpack_public_path__ + \"sands.e69477c6.png\";","import { GI_ARTIFACT_GROUP_CODES, GI_ArtifactTypeCode } from '#lib/genshin'\nimport { ART_GROUP_CODES } from '#src/api/generated'\nimport icon_circlet from '#src/media/circlet.png'\nimport icon_flower from '#src/media/flower.png'\nimport icon_goblet from '#src/media/goblet.png'\nimport icon_plume from '#src/media/plume.png'\nimport icon_sands from '#src/media/sands.png'\n\nexport type GI_ArtifactType = { readonly code: GI_ArtifactTypeCode; imgSrc: string }\nexport const artifactTypes: GI_ArtifactType[] = [\n\t{ code: 'flower' as const, imgSrc: icon_flower },\n\t{ code: 'plume' as const, imgSrc: icon_plume },\n\t{ code: 'sands' as const, imgSrc: icon_sands },\n\t{ code: 'goblet' as const, imgSrc: icon_goblet },\n\t{ code: 'circlet' as const, imgSrc: icon_circlet },\n]\n\nexport function getArtifactTypeIconSrc(artifactTypeCode: string): string {\n\treturn (artifactTypes.find(at => at.code === artifactTypeCode) || artifactTypes[0]).imgSrc\n}\n\nfunction isGroup(code: string) {\n\treturn (GI_ARTIFACT_GROUP_CODES as string[]).includes(code)\n}\n\nexport function getArtifactIconSrc(artifactCode: string): string {\n\treturn isGroup(artifactCode) ? icon_flower : BUNDLE_ENV.ASSET_PATH + `media/artifacts/${artifactCode}.png`\n}\n\nexport function getArtifactIconLargeSrc(artifactCode: string): string {\n\treturn isGroup(artifactCode)\n\t\t? icon_flower\n\t\t: BUNDLE_ENV.ASSET_PATH + `media/artifacts/${artifactCode}.large.png`\n}\n\nfunction getAllOrNone<T>(codes: string[], map: Map<string, T>) {\n\tconst res: T[] = []\n\tfor (const code of codes) {\n\t\tconst item = map.get(code)\n\t\tif (!item) return []\n\t\tres.push(item)\n\t}\n\treturn res\n}\nexport function getAllArtifacts<T>(code: string, artsMap: Map<string, T>): T[] {\n\tif (code in ART_GROUP_CODES) return getAllOrNone(ART_GROUP_CODES[code], artsMap)\n\treturn getAllOrNone([code], artsMap)\n}\n","export function BlockHeader({ children, classes = '' }) {\n\treturn <h6 className={`text-uppercase opacity-75 letter-spacing-1 ${classes}`}>{children}</h6>\n}\n","import { useCallback } from 'preact/hooks'\n\nexport type Option = { title: string | JSX.Element; code: string }\n\nexport function SimpleSelect({\n\toptions,\n\tselectedOption,\n\tonOptionSelect,\n\tclasses = '',\n\tsize = 1,\n}: {\n\toptions: Option[]\n\tselectedOption: Option | null\n\tonOptionSelect(Option): unknown\n\tclasses?: string\n\tsize?: number\n}): JSX.Element {\n\tconst handleChange = useCallback(\n\t\te => {\n\t\t\tonOptionSelect(options.find(o => o.code === e.target.value))\n\t\t},\n\t\t[options, onOptionSelect],\n\t)\n\treturn (\n\t\t<select\n\t\t\tclassName={`form-select border-secondary bg-dark text-light c-pointer ${classes}`}\n\t\t\tonChange={handleChange}\n\t\t\tsize={size}\n\t\t>\n\t\t\t<option value=\"\" disabled selected hidden>\n\t\t\t\tSelect…\n\t\t\t</option>\n\t\t\t{options.map(o => (\n\t\t\t\t<option\n\t\t\t\t\tclassName=\"c-pointer\"\n\t\t\t\t\tkey={o.code}\n\t\t\t\t\tvalue={o.code}\n\t\t\t\t\tselected={!!(selectedOption && o.code === selectedOption.code)}\n\t\t\t\t>\n\t\t\t\t\t{o.title}\n\t\t\t\t</option>\n\t\t\t))}\n\t\t</select>\n\t)\n}\n","import { useCallback, useMemo, useState } from 'preact/hooks'\n\nimport { arrShallowEqual } from '#lib/utils/collections'\n\nexport type Tab = { code: string; title?: string | JSX.Element }\n\nexport function tabTitleFromName(obj: { name: string }): string {\n\treturn obj.name\n}\n\nexport function Tabs<T extends Tab>({\n\ttabs,\n\ttitleFunc,\n\tselectedTab,\n\tonTabSelect,\n\tclasses = '',\n}: {\n\ttabs: T[]\n\ttitleFunc?: (tab: T) => string | JSX.Element\n\tselectedTab: T\n\tonTabSelect: (tab: T) => unknown\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ul className={`nav nav-tabs ${classes}`}>\n\t\t\t{tabs.map(t => (\n\t\t\t\t<li className=\"nav-item\" key={t.code}>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName={`nav-link ${t.code === selectedTab.code ? 'active' : ''}`}\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\tonTabSelect(t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{titleFunc ? titleFunc(t) : 'title' in t ? t.title : t.code}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t)\n}\n\nexport function BtnTabGroup<T extends Tab>({\n\ttabs,\n\ttitleFunc,\n\tselectedTab,\n\tonTabSelect,\n\tclasses = '',\n\tvisibleTabsLength,\n}: {\n\ttabs: T[]\n\ttitleFunc?: (tab: T) => string | JSX.Element\n\tselectedTab: T\n\tonTabSelect: (tab: T) => void\n\tclasses?: string\n\tvisibleTabsLength?: number\n}): JSX.Element {\n\tconst tabsGrouped: T[][] = []\n\tif (visibleTabsLength) {\n\t\ttabsGrouped[0] = tabs.slice(0, visibleTabsLength)\n\t\ttabsGrouped[1] = tabs.slice(visibleTabsLength, tabs.length - 1)\n\t} else {\n\t\ttabsGrouped[0] = tabs\n\t}\n\t// todo бордеррадиусы или другой дизайн\n\treturn (\n\t\t<div>\n\t\t\t<div class={`btn-group ${classes}`}>\n\t\t\t\t{tabsGrouped[0].map(t => (\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={tabs.length === 1}\n\t\t\t\t\t\tclassName={`btn lh-sm ${\n\t\t\t\t\t\t\tt.code === selectedTab.code ? 'btn-primary' : 'btn-outline-primary'\n\t\t\t\t\t\t} `}\n\t\t\t\t\t\tkey={t.code}\n\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\tonTabSelect(t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{titleFunc ? titleFunc(t) : 'title' in t ? t.title : t.code}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t{visibleTabsLength && tabsGrouped[1].length ? (\n\t\t\t\t<div class={`btn-group ${classes}`}>\n\t\t\t\t\t{tabsGrouped[1].map(t => (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tdisabled={tabs.length === 1}\n\t\t\t\t\t\t\tclassName={`btn lh-sm ${\n\t\t\t\t\t\t\t\tt.code === selectedTab.code ? 'btn-primary' : 'btn-outline-primary'\n\t\t\t\t\t\t\t} `}\n\t\t\t\t\t\t\tkey={t.code}\n\t\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\t\tonTabSelect(t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{titleFunc ? titleFunc(t) : 'title' in t ? t.title : t.code}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n\n/**\n * а) сохраняет выделенную вкладку по коду (после смены вкладок, если выбранного ранее кода\n *    среди новых вкладок нет, возвращает первую вкладку).\n * б) если передан массив args, сохраняет выбранную вкладку для каждого уникального набора args\n *    (полезно, если эти вкладки находятся врутри другого переключателя,\n *    например вкладки ролей, а над ними - переключатель персонажей).\n */\nexport function useSelectable<T extends Tab>(tabs: T[], args?: unknown[]): [T, (tab: T) => unknown] {\n\tconst [tabCodes, setTabCodes] = useState<{ code: string; args: unknown[] }[]>([])\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst argsInner = useMemo(() => args ?? [], args)\n\n\tconst item = useMemo(() => tabCodes.find(x => arrShallowEqual(argsInner, x.args)), [argsInner, tabCodes])\n\n\tconst tab = useMemo(() => (item && tabs.find(x => x.code === item.code)) ?? tabs[0], [tabs, item])\n\n\tconst setTab = useCallback(\n\t\t(tab: T) => {\n\t\t\tif (item) {\n\t\t\t\tif (item.code !== tab.code) {\n\t\t\t\t\tsetTabCodes(tabCodes.filter(x => x !== item).concat({ ...item, code: tab.code }))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTabCodes(tabCodes.concat({ code: tab.code, args: argsInner }))\n\t\t\t}\n\t\t},\n\t\t[argsInner, item, tabCodes],\n\t)\n\treturn [tab, setTab]\n}\n","// bootstrap edition\nexport function calcPosForDd(\n\tparentRect: DOMRect,\n\tddRect: DOMRect,\n\t{ isAbsolute = false, isCentered = false, shouldFitInScreen = false } = {},\n): { top: number; left: number; layoutPosition: { x: 'end' | 'start'; y: 'top' | 'bottom' } } {\n\tconst tWidth = window.innerWidth\n\tconst tHeight = window.innerHeight\n\tconst scrollTopFix = isAbsolute ? window.scrollY : 0\n\tconst centredFix = isCentered ? (parentRect.width - ddRect.width) / 2 : 0\n\tlet top = 0\n\tlet left = 0\n\tlet layoutPositionX: 'end' | 'start' = 'end'\n\tlet layoutPositionY: 'top' | 'bottom' = 'bottom'\n\tif (parentRect.top + parentRect.height + ddRect.height < tHeight) {\n\t\t// to bottom\n\t\ttop = parentRect.top + parentRect.height + scrollTopFix\n\t\tlayoutPositionY = 'bottom'\n\t} else {\n\t\t// to top\n\t\ttop = parentRect.top - ddRect.height + scrollTopFix\n\t\tlayoutPositionY = 'top'\n\t}\n\tif (parentRect.left + ddRect.width + centredFix < tWidth) {\n\t\t// to right\n\t\tleft = parentRect.left + centredFix\n\t\tlayoutPositionX = 'end'\n\t} else {\n\t\t// to left\n\t\tleft = parentRect.left + parentRect.width - ddRect.width - centredFix\n\t\tlayoutPositionX = 'start'\n\t}\n\tif (shouldFitInScreen) {\n\t\tleft = Math.min(Math.max(0, left), tWidth - ddRect.width)\n\t\ttop = Math.max(top, 0)\n\t}\n\treturn { top, left, layoutPosition: { y: layoutPositionY, x: layoutPositionX } }\n}\n","import { useCallback, useEffect, useLayoutEffect, useRef, useState } from 'preact/hooks'\n\nimport { calcPosForDd } from '#src/utils/calc-pos-for-dd'\nimport { useClickAway, useWindowSize } from '#src/utils/hooks'\nimport { createPortal } from '#src/utils/preact-compat'\n\nlet modalsEl: Element | null = null\n\nexport const ItemDetailDdPortal = ({\n\tonClickAway,\n\tchildren,\n\tclasses = '',\n\ttargetEl,\n\tcontentKey = null,\n\tshouldScrollToTop,\n}: {\n\tonClickAway?(): void\n\tchildren: JSX.Nodes\n\tclasses?: string\n\ttargetEl: HTMLElement | null | undefined\n\tcontentKey?: string | null | undefined\n\tshouldScrollToTop?: boolean\n}): JSX.Element => {\n\tmodalsEl ??= document.querySelector('.modals') as Element\n\tconst wrapRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\n\tconst defClassName = `popover item-detail-popover ${classes}`\n\tconst [arrowStyle, setArrowStyle] = useState('')\n\tconst onResize = useCallback(() => {\n\t\tif (!wrapRef.current) return\n\t\tif (!targetEl) return\n\t\tconst wrapEl = wrapRef.current\n\t\tconst pos = calcPosForDd(targetEl.getBoundingClientRect(), wrapEl.getBoundingClientRect(), {\n\t\t\tisAbsolute: true,\n\t\t\tisCentered: true,\n\t\t\tshouldFitInScreen: true,\n\t\t})\n\t\t;('bs-popover-top bs-popover-bottom')\n\t\twrapEl.className = `${defClassName} bs-popover-${pos.layoutPosition.y}`\n\t\twrapEl.style.left = `${pos.left}px`\n\t\twrapEl.style.top = `${pos.top}px`\n\t\tsetArrowStyle(\n\t\t\t`position: absolute; transform: translate3d(${wrapEl.offsetWidth / 2 - 8}px, 0, 0); left: 0`,\n\t\t)\n\t}, [wrapRef, targetEl, defClassName, setArrowStyle])\n\tuseLayoutEffect(onResize)\n\tuseEffect(() => {\n\t\tif (!shouldScrollToTop) return\n\t\tconst wrapEl = wrapRef.current\n\t\tif (!wrapEl) return\n\t\tconst elTop = wrapEl.getBoundingClientRect().top\n\t\tif (elTop < 0) scrollTo(0, scrollY + elTop)\n\t})\n\tuseWindowSize()\n\tuseClickAway(wrapRef, onClickAway)\n\t//todo обновлять позицию, когда загрузилась картинка\n\treturn createPortal(\n\t\t<div class={defClassName} ref={wrapRef}>\n\t\t\t{children}\n\t\t\t<div class=\"popover-arrow\" style={arrowStyle}></div>\n\t\t</div>,\n\t\tmodalsEl,\n\t)\n}\nexport const ItemDetailDdMobilePortal = ({\n\tonClickAway,\n\tchildren,\n\tclasses = '',\n\tcontentKey = null,\n}: {\n\tonClickAway?(): void\n\tchildren: JSX.Nodes\n\tclasses?: string\n\tcontentKey?: string | null | undefined\n}): JSX.Element => {\n\tmodalsEl ??= document.querySelector('.modals') as Element\n\tconst wrapRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\n\tconst defClassName = `fixed-bottom ${classes}`\n\n\tuseClickAway(wrapRef, onClickAway)\n\n\treturn createPortal(\n\t\t<div class={defClassName} ref={wrapRef}>\n\t\t\t{children}\n\t\t</div>,\n\t\tmodalsEl,\n\t)\n}\n","import { calcPosForDd } from '#src/utils/calc-pos-for-dd'\nimport { useWindowSize } from '#src/utils/hooks'\nimport { createPortal } from '#src/utils/preact-compat'\nimport { useCallback, useLayoutEffect, useRef, useState } from 'preact/hooks'\n\nlet modalsEl: Element | null = null\n\nexport function Tooltip({\n\tchildren,\n\tclasses = '',\n\ttargetEl,\n}: {\n\tchildren: JSX.Node\n\tclasses?: string\n\ttargetEl: HTMLElement | null | undefined\n}): JSX.Element {\n\tmodalsEl ??= document.querySelector('.modals') as Element\n\tconst wrapRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\n\tconst defClassName = `tooltip fade show ${classes}`\n\tconst [arrowStyle, setArrowStyle] = useState<string>('')\n\tconst onResize = useCallback(() => {\n\t\tif (!wrapRef.current) return\n\t\tif (!targetEl) return\n\t\tconst wrapEl = wrapRef.current\n\t\tconst pos = calcPosForDd(targetEl.getBoundingClientRect(), wrapEl.getBoundingClientRect(), {\n\t\t\tisAbsolute: true,\n\t\t\tisCentered: true,\n\t\t})\n\t\t;('bs-tooltip-top bs-tooltip-bottom')\n\t\twrapEl.className = `${defClassName} bs-tooltip-${pos.layoutPosition.y}`\n\t\twrapEl.style.left = `${Math.max(0, pos.left)}px`\n\t\twrapEl.style.top = `${Math.max(0, pos.top)}px`\n\t\tsetArrowStyle(\n\t\t\t`position: absolute; transform: translate3d(${wrapEl.offsetWidth / 2 - 8}px, 0, 0); left: 0`,\n\t\t)\n\t}, [wrapRef, targetEl, defClassName, setArrowStyle])\n\tuseLayoutEffect(onResize)\n\tuseWindowSize()\n\t//todo обновлять позицию, когда загрузилась картинка\n\treturn createPortal(\n\t\t<div className={defClassName} ref={wrapRef}>\n\t\t\t<div className=\"tooltip-arrow\" style={arrowStyle}></div>\n\t\t\t<div className=\"tooltip-inner\">{children}</div>\n\t\t</div>,\n\t\tmodalsEl,\n\t)\n}\n","import { GI_ServerRegionCode, guessCurrentRegion } from '#lib/genshin'\n\nexport const SK_SELECTED_REGION_CODE = 'selected-region-code'\nexport const SK_DEFAULT_SELECTED_REGION_CODE: GI_ServerRegionCode = guessCurrentRegion()\n\n//sk - storage key\nexport const SK_FAV_CHAR_CODES = 'favoriteCharacterCodes'\nexport const SK_FAV_TALENT_MATERIAL_CODES = 'favoriteTalentMaterialCodes'\nexport const SK_FAV_WEAPON_DATAS = 'favoriteWeaponDatas'\nexport const SK_FAV_WEAPON_PRIMARY_MATERIAL_CODES = 'favoriteWeaponPrimaryMaterialCodes'\nexport type STORAGE_WEAPON_DATA = [weaponCode: string, weaponMaterialCode: string]\n","import { useCallback, useMemo } from 'preact/hooks'\n\nimport { CharacterFullInfoWithRelated } from '#lib/parsing/combine'\nimport { CompactTextParagraphs, TextNode } from '#lib/parsing/helperteam/text'\nimport { ArtifactRef, ArtifactRefNode, CharacterBuildInfoRole } from '#lib/parsing/helperteam/types'\nimport { mustBeDefined, staticNever } from '#lib/utils/values'\nimport { ART_GROUP_CODES } from '#src/api/generated'\nimport { MapAllByCode } from '#src/api/utils'\nimport { Tooltip } from '#src/components/tooltip'\nimport { ArtifactCard } from '#src/containers/item-cards/dd-cards'\nimport { ItemLabelWithDd, LabeledItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport { logError } from '#src/errors'\nimport { I18N_ART_GROUP_NAME, I18N_CONJUCTIONS, I18N_STAT_NAME } from '#src/i18n/i18n'\nimport { getAllArtifacts, getArtifactIconSrc } from '#src/utils/artifacts'\nimport { useHover, useLocalStorage } from '#src/utils/hooks'\nimport {\n\tSK_FAV_CHAR_CODES,\n\tSK_FAV_TALENT_MATERIAL_CODES,\n\tSK_FAV_WEAPON_DATAS,\n\tSK_FAV_WEAPON_PRIMARY_MATERIAL_CODES,\n\tSTORAGE_WEAPON_DATA,\n} from '#src/utils/local-storage-keys'\nimport { HEART, HEART_EMPTY, STAR } from '#src/utils/typography'\n\nexport const DUMMY_ROLE: { code: string; title: string } & Partial<CharacterBuildInfoRole<'monolang'>> = {\n\ttitle: '…',\n\tcode: '',\n}\nexport const DUMMY_ROLES = [DUMMY_ROLE]\n\nexport type BuildRoleOrDummy = CharacterBuildInfoRole<'monolang'> | typeof DUMMY_ROLE\n\nexport function makeRoleTitle(r: BuildRoleOrDummy) {\n\treturn (\n\t\t<span key={r.code}>\n\t\t\t{r.isRecommended && (\n\t\t\t\t<span className=\"fs-4 lh-1 opacity-75 text-warning align-bottom\">{STAR}</span>\n\t\t\t)}\n\t\t\t{r.code}\n\t\t</span>\n\t)\n}\nexport const CIRCLET_GOBLET_SANDS = ['sands', 'goblet', 'circlet'] as const\nexport function getRoleData(build: CharacterFullInfoWithRelated, selectedCode: string) {\n\treturn mustBeDefined(build.character.roles.find(x => x.code === selectedCode))\n}\nexport function genArtMainStatDetail(\n\trole: CharacterBuildInfoRole<'monolang'>,\n\titemCode: 'circlet' | 'goblet' | 'sands',\n\tisShort?: boolean,\n) {\n\treturn (\n\t\t<span className=\"\">\n\t\t\t{genSimpleList(role.mainStats[itemCode].codes.map(I18N_STAT_NAME))}\n\t\t\t{isShort\n\t\t\t\t? ' ' + genNotes(role.mainStats[itemCode]) + genSeeCharNotes(role.mainStats[itemCode])\n\t\t\t\t: null}\n\t\t</span>\n\t)\n}\nexport function genSimpleList(arr: string[]) {\n\treturn arr.join(', ')\n}\nexport function notesWrap(str) {\n\treturn <div className=\"text-muted small\">{str}</div>\n}\nexport function genNotes(item: { notes: CompactTextParagraphs | null }) {\n\treturn item.notes === null ? '' : notesWrap(JSON.stringify(item.notes))\n}\nexport function genSeeCharNotes(item: { seeCharNotes: boolean }) {\n\treturn '' //TODO\n\treturn item.seeCharNotes ? notesWrap(' (see notes)') : ''\n}\nexport function notesToJSX(tips: CompactTextParagraphs | null): JSX.Nodes {\n\tfunction processString(str: string) {\n\t\treturn str\n\t\t\t.split('\\n')\n\t\t\t.map((sub, i, arr) => [sub, i < arr.length - 1 ? <br /> : ''])\n\t\t\t.flat()\n\t\t\t.filter(a => a)\n\t}\n\tfunction processObj(tip: TextNode) {\n\t\tif (typeof tip === 'string') return processString(tip)\n\t\tif ('p' in tip) return <p>{notesToJSX(tip.p)}</p>\n\t\tif ('b' in tip) return <b class=\"opacity-75 text-normal\">{notesToJSX(tip.b)}</b>\n\t\tif ('i' in tip) return <i>{notesToJSX(tip.i)}</i>\n\t\tif ('s' in tip) return <s>{notesToJSX(tip.s)}</s>\n\t\tif ('a' in tip)\n\t\t\treturn (\n\t\t\t\t<a href={tip.href} target=\"_blank\">\n\t\t\t\t\t{notesToJSX(tip.a)}\n\t\t\t\t</a>\n\t\t\t)\n\t\tif ('weapon' in tip)\n\t\t\treturn (\n\t\t\t\t<ItemLabelWithDd type=\"weapon\" code={tip.code}>\n\t\t\t\t\t{notesToJSX(tip.weapon)}\n\t\t\t\t</ItemLabelWithDd>\n\t\t\t)\n\t\tif ('artifact' in tip)\n\t\t\treturn (\n\t\t\t\t<ItemLabelWithDd type=\"artifact\" code={tip.code}>\n\t\t\t\t\t{notesToJSX(tip.artifact)}\n\t\t\t\t</ItemLabelWithDd>\n\t\t\t)\n\t\tif ('item' in tip) return <>{notesToJSX(tip.item)}</>\n\t\tstaticNever(tip)\n\t\tlogError('unknown text node: ' + JSON.stringify(tip))\n\t\treturn <span>{JSON.stringify(tip)}</span>\n\t}\n\tif (!tips) return null\n\tif (Array.isArray(tips)) return tips.map(processObj).flat()\n\treturn processObj(tips)\n}\n\nexport function getCoverArtifactForSet(code, artsForDd) {\n\tlet coverArt\n\tif (code in ART_GROUP_CODES) {\n\t\tcoverArt = {\n\t\t\tname: I18N_ART_GROUP_NAME[code],\n\t\t\tcode: code,\n\t\t\trarity: 5,\n\t\t}\n\t} else {\n\t\tcoverArt = artsForDd[0]\n\t}\n\treturn coverArt\n}\nexport function genArtifactAdvice(\n\tset: ArtifactRef | ArtifactRefNode,\n\tbuild: MapAllByCode<CharacterFullInfoWithRelated>,\n\tisLast = true,\n) {\n\t// todo notes\n\tif ('code' in set) {\n\t\t//ArtifactRef\n\t\tconst artifactsForDd = getAllArtifacts(set.code, build.maps.artifacts)\n\t\tif (!artifactsForDd.length) return null\n\t\tconst coverArt = getCoverArtifactForSet(set.code, artifactsForDd)\n\t\treturn (\n\t\t\t<LabeledItemAvatar\n\t\t\t\timgSrc={getArtifactIconSrc(set.code)}\n\t\t\t\trarity={coverArt.rarity}\n\t\t\t\ttitle={coverArt.name}\n\t\t\t\tkey={set.code}\n\t\t\t\tavatarTopEndBadge={'x' + set.count}\n\t\t\t\tavatarClasses=\"with-padding\"\n\t\t\t\tclasses={`small ${isLast ? 'mb-1' : ''}`}\n\t\t\t\tddComponent={\n\t\t\t\t\t<ArtifactCard artifacts={artifactsForDd} related={build.maps} title={coverArt.name} />\n\t\t\t\t}\n\t\t\t/>\n\t\t)\n\t} else {\n\t\t//ArtifactRefNode\n\t\treturn (\n\t\t\t<ItemsListGroupWrap>\n\t\t\t\t{set.arts.map((art, i) => {\n\t\t\t\t\tconst isLastInList = i >= set.arts.length - 1\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{genArtifactAdvice(art, build, isLastInList)}\n\t\t\t\t\t\t\t{!isLastInList && <ItemsJoinerWrap>{I18N_CONJUCTIONS[set.op]}</ItemsJoinerWrap>}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</ItemsListGroupWrap>\n\t\t)\n\t}\n}\nexport function ItemsJoinerWrap({ children }): JSX.Element {\n\treturn <div className=\"text-start text-muted small px-5 my-n1\">{children}</div>\n}\nexport function ItemsListGroupWrap({\n\tchildren,\n}: {\n\tchildren: JSX.Node | (JSX.Element | null)[]\n}): JSX.Element {\n\treturn <div className=\"border-2 rounded border-secondary border-start ps-2\">{children}</div>\n}\nexport const MAX_SMTHS_TO_STORE = 5\nexport function removeOldSmthsFromList<T>(codes: T[]): T[] {\n\treturn codes.slice(0, MAX_SMTHS_TO_STORE)\n}\nfunction ToggleSmthFav({\n\tsmthCode,\n\tclasses,\n\tstorageKey,\n\ttipFav,\n\ttipNotFav,\n}: {\n\tsmthCode: string\n\tclasses?: string\n\tstorageKey: string\n\ttipFav: string\n\ttipNotFav: string\n}): JSX.Element {\n\tconst [favSmthCodes, setFavSmthCodes] = useLocalStorage<string[]>(storageKey, [])\n\tconst [elRef, isHovered] = useHover<HTMLDivElement>()\n\tconst isFav = ~favSmthCodes.indexOf(smthCode)\n\tconst toggleFav = useCallback(() => {\n\t\tsetFavSmthCodes(\n\t\t\tremoveOldSmthsFromList(\n\t\t\t\tisFav ? favSmthCodes.filter(c => c !== smthCode) : [smthCode, ...favSmthCodes],\n\t\t\t),\n\t\t)\n\t}, [smthCode, setFavSmthCodes, favSmthCodes, isFav])\n\treturn (\n\t\t<div\n\t\t\trole=\"button\"\n\t\t\tclassName={`user-select-none lh-1 ${isFav ? 'text-danger' : 'text-danger opacity-50'} ${classes}`}\n\t\t\tonClick={toggleFav}\n\t\t\tref={elRef}\n\t\t>\n\t\t\t{isFav ? HEART : HEART_EMPTY}\n\t\t\t{elRef.current && isHovered ? (\n\t\t\t\t<Tooltip targetEl={elRef.current}>{isFav ? tipFav : tipNotFav}</Tooltip>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n\nexport function ToggleCharFav({\n\tcharacterCode,\n\tclasses,\n}: {\n\tcharacterCode: string\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ToggleSmthFav\n\t\t\tsmthCode={characterCode}\n\t\t\tclasses={classes}\n\t\t\tstorageKey={SK_FAV_CHAR_CODES}\n\t\t\ttipFav={'Remove character from your favorites'}\n\t\t\ttipNotFav={'Add character to your favorites'}\n\t\t/>\n\t)\n}\nexport function ToggleWeaponPrimaryMaterialFav({\n\titemCode,\n\tclasses,\n}: {\n\titemCode: string\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ToggleSmthFav\n\t\t\tsmthCode={itemCode}\n\t\t\tclasses={classes}\n\t\t\tstorageKey={SK_FAV_WEAPON_PRIMARY_MATERIAL_CODES}\n\t\t\ttipFav={'Remove material from your favorites'}\n\t\t\ttipNotFav={'Add material to your favorites'}\n\t\t/>\n\t)\n}\nexport function ToggleTalentMaterialFav({\n\titemCode,\n\tclasses,\n}: {\n\titemCode: string\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ToggleSmthFav\n\t\t\tsmthCode={itemCode}\n\t\t\tclasses={classes}\n\t\t\tstorageKey={SK_FAV_TALENT_MATERIAL_CODES}\n\t\t\ttipFav={'Remove material from your favorites'}\n\t\t\ttipNotFav={'Add material to your favorites'}\n\t\t/>\n\t)\n}\n\n//not used\nexport function ToggleWeaponFav({\n\tweaponCode,\n\tweapMatCode,\n\tclasses,\n}: {\n\tweaponCode: string\n\tweapMatCode: string\n\tclasses?: string\n}): JSX.Element {\n\tconst [favWeaponDatas, setWeaponDatas] = useLocalStorage<STORAGE_WEAPON_DATA[]>(SK_FAV_WEAPON_DATAS, [])\n\tconst favWeaponCodes = useMemo(() => favWeaponDatas.map(wd => wd[0]), [favWeaponDatas])\n\tconst [elRef, isHovered] = useHover<HTMLDivElement>()\n\tconst isFav = ~favWeaponCodes.indexOf(weaponCode)\n\tconst toggleFav = useCallback(() => {\n\t\tsetWeaponDatas(\n\t\t\tremoveOldSmthsFromList(\n\t\t\t\tisFav\n\t\t\t\t\t? favWeaponDatas.filter(d => d[0] !== weaponCode)\n\t\t\t\t\t: [[weaponCode, weapMatCode], ...favWeaponDatas],\n\t\t\t),\n\t\t)\n\t}, [weaponCode, weapMatCode, setWeaponDatas, favWeaponDatas, isFav])\n\treturn (\n\t\t<div\n\t\t\trole=\"button\"\n\t\t\tclassName={`user-select-none lh-1 ${isFav ? 'text-danger' : 'text-danger opacity-50'} ${classes}`}\n\t\t\tonClick={toggleFav}\n\t\t\tref={elRef}\n\t\t>\n\t\t\t{isFav ? HEART : HEART_EMPTY}\n\t\t\t{elRef.current && isHovered ? (\n\t\t\t\t<Tooltip targetEl={elRef.current}>\n\t\t\t\t\t{isFav ? 'Remove weapon from your favorites' : 'Add weapon to your favorites'}\n\t\t\t\t</Tooltip>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n","export function getItemIconSrc(itemCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/items/${itemCode}.png`\n}\n\nexport function getItemIconLargeSrc(itemCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/items/${itemCode}.large.png`\n}\n","export default __webpack_public_path__ + \"Icon_Bow.e7c82786.png\";","export default __webpack_public_path__ + \"Icon_Catalyst.871a7999.png\";","export default __webpack_public_path__ + \"Icon_Claymore.46946e88.png\";","export default __webpack_public_path__ + \"Icon_Polearm.73080ee4.png\";","import icon_Bow from '#src/media/Icon_Bow.png'\nimport icon_Catalyst from '#src/media/Icon_Catalyst.png'\nimport icon_Claymore from '#src/media/Icon_Claymore.png'\nimport icon_Polearm from '#src/media/Icon_Polearm.png'\nimport icon_Sword from '#src/media/Icon_Sword.png'\n\nimport type { GI_WeaponTypeCode } from '#lib/genshin'\n\nexport type GI_WeaponType = { readonly code: GI_WeaponTypeCode; imgSrc: string }\nexport const weaponTypes: GI_WeaponType[] = [\n\t{ code: 'sword' as const, imgSrc: icon_Sword },\n\t{ code: 'bow' as const, imgSrc: icon_Bow },\n\t{ code: 'catalyst' as const, imgSrc: icon_Catalyst },\n\t{ code: 'claymore' as const, imgSrc: icon_Claymore },\n\t{ code: 'polearm' as const, imgSrc: icon_Polearm },\n]\n\nexport function getWeaponIconSrc(weaponCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/weapons/${weaponCode}.png`\n}\n\nexport function getWeaponIconLageSrc(weaponCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/weapons/${weaponCode}.large.png`\n}\n","export default __webpack_public_path__ + \"Icon_Sword.a2824108.png\";","import { useCallback, useEffect, useState } from 'preact/hooks'\nimport { ItemAvatar } from './item-cards/item-avatars'\nimport { getItemIconSrc } from '#src/utils/items'\nimport { GI_RarityCode } from '#src/../../lib/genshin'\n\nconst DEF_ANCESTRY_CODES = [\n\t'agnidus-agate-sliver',\n\t'agnidus-agate-fragment',\n\t'agnidus-agate-chunk',\n\t'agnidus-agate-gemstone',\n]\nexport function AlchemyCalculator({\n\tclasses = '',\n\tancestryCodes = DEF_ANCESTRY_CODES,\n}: {\n\tclasses?: string\n\tancestryCodes?: string[]\n}): JSX.Element {\n\tconst [values, setValues] = useState<number[]>([])\n\tconst onValueChange = useCallback(\n\t\te => {\n\t\t\tconst value = +e.target.value\n\t\t\tconst index = +e.target.dataset.index\n\t\t\tsetValues(values.map((v, i) => (v = Math.floor(3 ** (index - i) * value))))\n\t\t},\n\t\t[setValues, values],\n\t)\n\tuseEffect(() => {\n\t\tsetValues(ancestryCodes.map((c, i) => 3 ** (ancestryCodes.length - 1 - i)))\n\t}, [ancestryCodes])\n\tconst startNotRoundClass = 'not-rounded-start'\n\tconst endNotRoundClass = 'not-rounded-end'\n\tconst endRoundClass = 'rounded-end'\n\treturn (\n\t\t<div className={`alchemy-calculator overflow-hidden ${classes}`}>\n\t\t\t<div className=\"input-group\">\n\t\t\t\t{ancestryCodes.map((c, i) => {\n\t\t\t\t\tconst isFirst = i === 0\n\t\t\t\t\tconst isLast = i === ancestryCodes.length - 1\n\t\t\t\t\tconst rarity = 5 - (ancestryCodes.length - 1 - i)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{i !== 0 ? (\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={`input-group-text text-dark border-light border-top border-bottom bg-${\n\t\t\t\t\t\t\t\t\t\trarity - 1\n\t\t\t\t\t\t\t\t\t} ps-1`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{'='}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\tclassName={`form-control bg-dark text-light text-end border-secondary pe-1 ${\n\t\t\t\t\t\t\t\t\t!isFirst ? startNotRoundClass : ''\n\t\t\t\t\t\t\t\t} ${endNotRoundClass}`}\n\t\t\t\t\t\t\t\tonInput={onValueChange}\n\t\t\t\t\t\t\t\tvalue={values[i]}\n\t\t\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tsrc={getItemIconSrc(c)}\n\t\t\t\t\t\t\t\trarity={rarity as GI_RarityCode}\n\t\t\t\t\t\t\t\tclasses={`small-avatar with-padding input-group-avatar ${startNotRoundClass} ${\n\t\t\t\t\t\t\t\t\t!isLast ? endNotRoundClass : endRoundClass + ' border-end'\n\t\t\t\t\t\t\t\t} border-top border-bottom border-light`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { useMemo, useState } from 'preact/hooks'\n\nimport { GI_DomainTypeCode, GI_MAP_CODES, MapCode, MapLocation } from '#lib/genshin'\nimport { ArtifactFullInfo, ItemShortInfo, WeaponFullInfo } from '#lib/parsing/combine'\nimport { arrGetAfter } from '#lib/utils/collections'\nimport { getAllRelated, RelDomainsShort, RelEnemiesShort, RelItemsShort } from '#src/api/utils'\nimport { BlockHeader } from '#src/components/block-header'\nimport { SimpleSelect } from '#src/components/select'\nimport { Spinner } from '#src/components/spinners'\nimport { BtnTabGroup, tabTitleFromName, useSelectable } from '#src/components/tabs'\nimport {\n\tItemDetailDdMobilePortal,\n\tItemDetailDdPortal,\n} from '#src/containers/item-cards/item-detail-dd-portal'\nimport {\n\tI18N_ALCHEMY_CALC,\n\tI18N_BASE_ATTACK,\n\tI18N_ERROR,\n\tI18N_FOR_NOBODY,\n\tI18N_MAP_CODES_NAME,\n\tI18N_OBTAINED_DURING_STORYLINE,\n\tI18N_PIECE_BONUS,\n\tI18N_PIECES_BONUS,\n\tI18N_PINCH_TO_ZOOM,\n\tI18N_RECOMENDED_FOR,\n\tI18N_SCROLL_TO_ZOOM,\n\tI18N_SECONDARY_STAT,\n\tI18N_SOURCE,\n\tI18N_STAT_NAME,\n\tI18N_WEAPON_OBTAIN_SOURCE_NAME,\n\tI18N_WEAPON_TYPE_NAME,\n} from '#src/i18n/i18n'\nimport {\n\tnotesToJSX,\n\tToggleTalentMaterialFav,\n\tToggleWeaponPrimaryMaterialFav,\n} from '#src/modules/builds/common'\nimport { getArtifactIconLargeSrc, getArtifactIconSrc } from '#src/utils/artifacts'\nimport { BS_isBreakpointLessThen } from '#src/utils/bootstrap'\nimport { getDomainIconSrc } from '#src/utils/domains'\nimport { getEnemyIconSrc } from '#src/utils/enemies'\nimport { isLoaded, useFetch, useWindowSize } from '#src/utils/hooks'\nimport { getItemIconSrc } from '#src/utils/items'\nimport { BULLET, LEFT_POINTING, RIGHT_POINTING } from '#src/utils/typography'\nimport { getWeaponIconLageSrc } from '#src/utils/weapons'\nimport { AlchemyCalculator } from '../alchemy-calculator'\nimport { CharacterAvatar, DdContext, ItemAvatar, LabeledItemAvatar } from './item-avatars'\n\nimport type { MapMarkerRaw } from '#src/components/teyvat-map'\nconst LazyTeyvatMap = import('#src/components/teyvat-map')\n\nfunction RecommendedFor({ charCodes }: { charCodes: string[] }): JSX.Element {\n\treturn (\n\t\t<>\n\t\t\t<BlockHeader>{I18N_RECOMENDED_FOR}</BlockHeader>\n\t\t\t{charCodes.length\n\t\t\t\t? charCodes.map(c => (\n\t\t\t\t\t\t<CharacterAvatar key={c} code={c} isNoBg={true} classes={`small-avatar mb-2 me-2`} />\n\t\t\t\t  ))\n\t\t\t\t: I18N_FOR_NOBODY}\n\t\t</>\n\t)\n}\n\n//переключалка для мобильного и десктопного вида\nexport function CardDescMobileWrap({\n\tchildren,\n\ttargetEl,\n\tonClickAway,\n}: {\n\tonClickAway: () => void\n\ttargetEl: HTMLElement | null | undefined\n\tchildren: JSX.Element\n}): JSX.Element {\n\tconst windowSize = useWindowSize()\n\treturn BS_isBreakpointLessThen(windowSize.breakpoint, 'xl') ? (\n\t\t<ItemDetailDdMobilePortal onClickAway={onClickAway}>{children}</ItemDetailDdMobilePortal>\n\t) : (\n\t\t<ItemDetailDdPortal onClickAway={onClickAway} targetEl={targetEl} shouldScrollToTop={true}>\n\t\t\t{children}\n\t\t</ItemDetailDdPortal>\n\t)\n}\n// основной макет карточек\nfunction Card({\n\tclasses = '',\n\ttitleEl,\n\tselectorEl,\n\tbodyEl,\n\tmapEl,\n}: {\n\tclasses?: string\n\ttitleEl: JSX.Nodes | string\n\tselectorEl?: JSX.Nodes\n\tbodyEl?: JSX.Nodes\n\tmapEl?: JSX.Nodes\n}): JSX.Element {\n\treturn (\n\t\t<div className={`item-detail-popover-card card ${classes}`}>\n\t\t\t<h3 className=\"card-header fs-4 d-flex position-relative\">\n\t\t\t\t<span className=\"flex-fill\">{titleEl}</span>{' '}\n\t\t\t\t<DdContext.Consumer>\n\t\t\t\t\t{ddContext =>\n\t\t\t\t\t\tddContext.onClickAway && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclass=\"btn-close btn-sm position-absolute end-0 top-50 translate-middle\"\n\t\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\t\tonClick={ddContext.onClickAway}\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</DdContext.Consumer>\n\t\t\t</h3>\n\t\t\t{selectorEl && <div class=\"p-3\">{selectorEl}</div>}\n\t\t\t<div\n\t\t\t\tclassName={`card-body overflow-auto flex-shrink-1 hide-if-empty mb-3 pb-0 ${\n\t\t\t\t\tselectorEl ? 'pt-0' : ''\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t{bodyEl}\n\t\t\t</div>\n\t\t\t{mapEl}\n\t\t</div>\n\t)\n}\n\ntype MapWrapMarkerGroup = {\n\tcode: string\n\ttitle: string\n\tmarkers: 'external' | MapMarkerRaw[]\n}\n\nfunction addMarkerGroupsByDomains(\n\tmarkerGroups: MapWrapMarkerGroup[],\n\tdomains: { code: string; name: string; type: GI_DomainTypeCode; location: MapLocation }[],\n) {\n\tfor (const domain of domains) {\n\t\tconst loc = domain.location\n\t\tconst icon = getDomainIconSrc(domain.type)\n\t\tmarkerGroups.push({ code: domain.code, title: domain.name, markers: [{ ...loc, icon }] })\n\t}\n}\nfunction addMarkerGroupsByEnemies(\n\tmarkerGroups: MapWrapMarkerGroup[],\n\tenemies: { code: string; name: string; locations: 'external' | MapLocation[] }[],\n) {\n\tfor (const enemy of enemies) {\n\t\tconst markers =\n\t\t\tenemy.locations === 'external'\n\t\t\t\t? 'external'\n\t\t\t\t: enemy.locations.map((loc): MapMarkerRaw => {\n\t\t\t\t\t\tconst icon = getEnemyIconSrc(enemy.code)\n\t\t\t\t\t\treturn { ...loc, icon, style: 'circle' }\n\t\t\t\t  })\n\t\tmarkerGroups.push({ code: enemy.code, title: enemy.name, markers })\n\t}\n}\n\nfunction MapWrap({\n\titemData,\n\tmarkerGroups,\n\tisItemFavable,\n}: {\n\titemData?: {\n\t\timgSrc: string\n\t\titem: ItemShortInfo | ArtifactFullInfo | WeaponFullInfo\n\t}\n\tmarkerGroups: MapWrapMarkerGroup[]\n\tisItemFavable?: boolean\n}): JSX.Element {\n\tconst [selectedSource, setSelectedSource] = useSelectable(markerGroups)\n\n\tconst [selectedMapCode, setMapCode] = useState<MapCode>(GI_MAP_CODES[0])\n\tconst TeyvatMap = useFetch(() => LazyTeyvatMap.then(x => x.TeyvatMap), [])\n\n\tconst setSourceAndFixMapCode = (selectedSource: MapWrapMarkerGroup) => {\n\t\tif (\n\t\t\tselectedSource.markers !== 'external' &&\n\t\t\t!selectedSource.markers.find(m => m.mapCode === selectedMapCode)\n\t\t)\n\t\t\tsetMapCode(selectedSource.markers[0].mapCode)\n\t\tsetSelectedSource(selectedSource)\n\t}\n\tconst goToPrevGroup = () => {\n\t\tsetSourceAndFixMapCode(arrGetAfter(markerGroups, selectedSource, -1))\n\t}\n\tconst goToNextGroup = () => {\n\t\tsetSourceAndFixMapCode(arrGetAfter(markerGroups, selectedSource))\n\t}\n\n\tlet sourceSelectEl\n\tif (!markerGroups.length) {\n\t\tsourceSelectEl = null\n\t} else if (markerGroups.length === 1) {\n\t\tsourceSelectEl = <span className=\"align-self-center lh-1 small\">{markerGroups[0].title}</span>\n\t} else if (markerGroups.length < 3) {\n\t\tsourceSelectEl = (\n\t\t\t<BtnTabGroup\n\t\t\t\ttabs={markerGroups}\n\t\t\t\tselectedTab={selectedSource}\n\t\t\t\tonTabSelect={setSourceAndFixMapCode}\n\t\t\t\tclasses=\"w-100 btn-group-sm\"\n\t\t\t/>\n\t\t)\n\t} else {\n\t\tsourceSelectEl = (\n\t\t\t<div className=\"btn-group w-100\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"btn btn-secondary border-dark border-end-0 text-muted fs-4 lh-1\"\n\t\t\t\t\tonClick={goToPrevGroup}\n\t\t\t\t>\n\t\t\t\t\t{LEFT_POINTING}\n\t\t\t\t</button>\n\t\t\t\t<SimpleSelect\n\t\t\t\t\toptions={markerGroups}\n\t\t\t\t\tselectedOption={selectedSource}\n\t\t\t\t\tonOptionSelect={setSourceAndFixMapCode}\n\t\t\t\t\tclasses=\"w-100 rounded-0\"\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"btn btn-secondary border-dark border-start-0 text-muted fs-4 lh-1\"\n\t\t\t\t\tonClick={goToNextGroup}\n\t\t\t\t>\n\t\t\t\t\t{RIGHT_POINTING}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t)\n\t}\n\tconst visibleMapCodes = useMemo(\n\t\t() =>\n\t\t\tGI_MAP_CODES.filter(\n\t\t\t\tc =>\n\t\t\t\t\tselectedSource.markers !== 'external' &&\n\t\t\t\t\tselectedSource.markers.some(m => m.mapCode === c),\n\t\t\t),\n\t\t[selectedSource],\n\t)\n\tconst isItemWeaponPrimaryMaterial = useMemo(\n\t\t() =>\n\t\t\titemData?.item &&\n\t\t\t'types' in itemData.item &&\n\t\t\t~itemData?.item.types?.indexOf('weapon-material-primary'),\n\t\t[itemData?.item],\n\t)\n\treturn (\n\t\t<div className={`map-wrap position-relative mb-3`}>\n\t\t\t<div className=\"map-header position-absolute d-flex flex-row justify-content-between px-3 py-1 w-100\">\n\t\t\t\t<div className=\"map-header-bg position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-75\"></div>\n\t\t\t\t{itemData && (\n\t\t\t\t\t<div className=\"me-2 flex-shrink-1 d-flex align-self-center\">\n\t\t\t\t\t\t{isItemWeaponPrimaryMaterial && isItemFavable ? (\n\t\t\t\t\t\t\t<ToggleWeaponPrimaryMaterialFav\n\t\t\t\t\t\t\t\titemCode={itemData.item.code}\n\t\t\t\t\t\t\t\tclasses=\"align-self-center p-1 flex-fill fs-5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<LabeledItemAvatar\n\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\tclasses=\"small-avatar small\"\n\t\t\t\t\t\t\tavatarClasses=\"with-padding \"\n\t\t\t\t\t\t\timgSrc={itemData.imgSrc}\n\t\t\t\t\t\t\ttitle={itemData.item.name}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{markerGroups.length ? (\n\t\t\t\t\t<div className={`d-flex flex-fill justify-content-end align-self-center`}>\n\t\t\t\t\t\t<label className=\"me-1 text-muted align-self-center small\">{I18N_SOURCE}:</label>\n\t\t\t\t\t\t{sourceSelectEl}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<div className=\"map-tip position-absolute px-3 pt-1 lh-1 top-100 start-0 small text-muted opacity-75 user-select-none\">\n\t\t\t\t{visibleMapCodes.map(c => (\n\t\t\t\t\t<div className=\"d-inline me-2\" key={c} onClick={() => setMapCode(c)}>\n\t\t\t\t\t\t{visibleMapCodes.length > 1 ? (\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"lh-1 align-middle c-pointer me-1\"\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tid={c}\n\t\t\t\t\t\t\t\tchecked={c === selectedMapCode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`lh-1 align-middle text-capitalize ${\n\t\t\t\t\t\t\t\tvisibleMapCodes.length > 1 ? 'c-pointer' : ''\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\tfor={c}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{I18N_MAP_CODES_NAME[c]}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className=\"map-tip position-absolute px-3 pt-1 lh-1 top-100 end-0 small text-muted opacity-75 pe-none\">\n\t\t\t\t<div class=\"d-none d-xl-block\">{I18N_SCROLL_TO_ZOOM}</div>\n\t\t\t\t<div class=\"d-xl-none\">{I18N_PINCH_TO_ZOOM}</div>\n\t\t\t</div>\n\t\t\t{selectedSource.markers !== 'external' && isLoaded(TeyvatMap) ? (\n\t\t\t\t<TeyvatMap\n\t\t\t\t\tclasses=\"position-relative\"\n\t\t\t\t\tpos=\"auto\"\n\t\t\t\t\tmapCode={selectedMapCode}\n\t\t\t\t\tmarkers={selectedSource.markers}\n\t\t\t\t/>\n\t\t\t) : TeyvatMap instanceof Error ? (\n\t\t\t\t<div className=\"text-muted position-absolute top-0 bottom-0 start-0 end-0 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t{I18N_ERROR}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<Spinner />\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport function ArtifactCard({\n\tclasses,\n\tartifacts,\n\trelated,\n\ttitle,\n}: {\n\tclasses?: string\n\tartifacts: ArtifactFullInfo[]\n\trelated: RelItemsShort & RelDomainsShort & RelEnemiesShort\n\ttitle: string\n}): JSX.Element {\n\tconst [selectedArt, setSelectedArt] = useSelectable(artifacts)\n\n\tconst dataForMap = useMemo(() => {\n\t\tconst srcs = selectedArt.obtainSources\n\t\tconst markerGroups = []\n\t\taddMarkerGroupsByDomains(markerGroups, getAllRelated(related.domains, srcs.domainCodes))\n\t\taddMarkerGroupsByEnemies(markerGroups, getAllRelated(related.enemies, srcs.enemyCodes))\n\n\t\treturn {\n\t\t\titemData: {\n\t\t\t\titem: selectedArt,\n\t\t\t\timgSrc: getArtifactIconSrc(selectedArt.code),\n\t\t\t},\n\t\t\tmarkerGroups,\n\t\t}\n\t}, [selectedArt, related])\n\treturn (\n\t\t<Card\n\t\t\ttitleEl={title}\n\t\t\tclasses={classes}\n\t\t\tselectorEl={\n\t\t\t\tartifacts.length > 1 ? (\n\t\t\t\t\t<BtnTabGroup\n\t\t\t\t\t\ttabs={artifacts}\n\t\t\t\t\t\ttitleFunc={tabTitleFromName}\n\t\t\t\t\t\tselectedTab={selectedArt}\n\t\t\t\t\t\tonTabSelect={setSelectedArt}\n\t\t\t\t\t\tclasses=\"w-100 btn-group-sm\"\n\t\t\t\t\t\tvisibleTabsLength={3}\n\t\t\t\t\t/>\n\t\t\t\t) : null\n\t\t\t}\n\t\t\tbodyEl={\n\t\t\t\t<div className=\"\">\n\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\trarity={selectedArt.rarity}\n\t\t\t\t\t\tclasses=\"float-end me-2 large-avatar\"\n\t\t\t\t\t\tsrc={getArtifactIconLargeSrc(selectedArt.code)}\n\t\t\t\t\t/>\n\t\t\t\t\t{selectedArt.sets[1] && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockHeader>{I18N_PIECE_BONUS(1)}</BlockHeader>\n\t\t\t\t\t\t\t<div className=\"mb-3\">{notesToJSX(selectedArt.sets[1])}</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedArt.sets[2] && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockHeader>{I18N_PIECES_BONUS(2)}</BlockHeader>\n\t\t\t\t\t\t\t<div className=\"mb-3\">{notesToJSX(selectedArt.sets[2])}</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedArt.sets[4] && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockHeader>{I18N_PIECES_BONUS(4)}</BlockHeader>\n\t\t\t\t\t\t\t<div className=\"mb-3\">{notesToJSX(selectedArt.sets[4])}</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{<RecommendedFor charCodes={selectedArt.recommendedTo} />}\n\t\t\t\t</div>\n\t\t\t}\n\t\t\tmapEl={dataForMap.markerGroups.length ? <MapWrap {...dataForMap} /> : null}\n\t\t></Card>\n\t)\n}\n\nexport function WeaponCard({\n\tclasses,\n\tweapon,\n\trelated,\n}: {\n\tonCloseClick?: () => void\n\tclasses?: string\n\tweapon: WeaponFullInfo\n\trelated: RelItemsShort & RelDomainsShort & RelEnemiesShort\n}): JSX.Element {\n\tconst materials = getAllRelated(related.items, weapon.materialCodes)\n\tconst [materialOnMap, setMaterialOnMap] = useState(materials[0])\n\tconst dataForMap = useMemo(() => {\n\t\tconst srcs = materialOnMap.obtainSources\n\t\tconst markerGroups = []\n\t\taddMarkerGroupsByDomains(markerGroups, getAllRelated(related.domains, srcs.domainCodes))\n\t\taddMarkerGroupsByEnemies(markerGroups, getAllRelated(related.enemies, srcs.enemyCodes))\n\n\t\treturn {\n\t\t\titemData: {\n\t\t\t\titem: materialOnMap,\n\t\t\t\timgSrc: getItemIconSrc(materialOnMap.code),\n\t\t\t},\n\t\t\tmarkerGroups,\n\t\t}\n\t}, [materialOnMap, related])\n\n\treturn (\n\t\t<Card\n\t\t\ttitleEl={\n\t\t\t\tweapon.name\n\t\t\t\t// <>\n\t\t\t\t// \t{weapon.name}{' '}\n\t\t\t\t// \t{ascMaterial && (\n\t\t\t\t// \t\t<ToggleWeaponFav\n\t\t\t\t// \t\t\tweaponCode={weapon.code}\n\t\t\t\t// \t\t\tweapMatCode={ascMaterial.code}\n\t\t\t\t// \t\t\tclasses=\"d-inline align-middle p-1\"\n\t\t\t\t// \t\t/>\n\t\t\t\t// \t)}\n\t\t\t\t// </>\n\t\t\t}\n\t\t\tclasses={classes}\n\t\t\tbodyEl={\n\t\t\t\t<div className=\"\">\n\t\t\t\t\t<div className=\"float-end\">\n\t\t\t\t\t\t<div className=\"d-flex w-100 justify-content-around\">\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\trarity={weapon.rarity}\n\t\t\t\t\t\t\t\tclasses=\"mb-2 large-avatar\"\n\t\t\t\t\t\t\t\tsrc={getWeaponIconLageSrc(weapon.code)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"d-flex justify-content-between w-100\">\n\t\t\t\t\t\t\t{materials.map(m => (\n\t\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\t\tkey={m.code}\n\t\t\t\t\t\t\t\t\trarity={2}\n\t\t\t\t\t\t\t\t\tclasses={`mb-2 mx-1 small-avatar with-padding ${\n\t\t\t\t\t\t\t\t\t\tmaterialOnMap.code !== m.code && 'opacity-50'\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tsrc={getItemIconSrc(m.code)}\n\t\t\t\t\t\t\t\t\tonClick={() => setMaterialOnMap(m)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden\">\n\t\t\t\t\t\t<BlockHeader classes=\"d-inline-block me-1\">\n\t\t\t\t\t\t\t{I18N_WEAPON_TYPE_NAME(weapon.typeCode)}\n\t\t\t\t\t\t</BlockHeader>\n\t\t\t\t\t\t<span className=\"mb-2 text-muted\">\n\t\t\t\t\t\t\t{BULLET} {weapon.obtainSources.map(I18N_WEAPON_OBTAIN_SOURCE_NAME).join(', ')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t\t<div className=\"me-2\">\n\t\t\t\t\t\t\t<div className=\"opacity-75\">{I18N_BASE_ATTACK}</div>\n\t\t\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t\t\t{weapon.atk.base} / {weapon.atk.max}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{weapon.subStat && (\n\t\t\t\t\t\t\t<div className=\"ms-1\">\n\t\t\t\t\t\t\t\t<div className=\"opacity-75\">{I18N_STAT_NAME(weapon.subStat.code)}</div>\n\t\t\t\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t\t\t\t{weapon.subStat.base} / {weapon.subStat.max}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<span className=\"opacity-75\">{I18N_SECONDARY_STAT}</span>\n\t\t\t\t\t\t<div className=\"\">{notesToJSX(weapon.passiveStat)}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<RecommendedFor charCodes={weapon.recommendedTo} />\n\t\t\t\t</div>\n\t\t\t}\n\t\t\tmapEl={dataForMap.markerGroups.length ? <MapWrap isItemFavable={true} {...dataForMap} /> : null}\n\t\t></Card>\n\t)\n}\n\nexport function OtherItemCard({\n\tclasses,\n\titem,\n\trelated,\n}: {\n\tonCloseClick?: () => void\n\tclasses?: string\n\titem: ItemShortInfo\n\trelated: RelItemsShort & RelDomainsShort & RelEnemiesShort\n}): JSX.Element {\n\tconst materials = getAllRelated(related.items, [item.code])\n\tconst materialOnMap = materials[0]\n\tconst dataForMap = useMemo(() => {\n\t\tconst markerGroups: MapWrapMarkerGroup[] = []\n\t\tconst srcs = materialOnMap.obtainSources\n\t\taddMarkerGroupsByDomains(markerGroups, getAllRelated(related.domains, srcs.domainCodes))\n\t\taddMarkerGroupsByEnemies(markerGroups, getAllRelated(related.enemies, srcs.enemyCodes))\n\t\tif (materialOnMap.locations.length > 0) {\n\t\t\tconst icon = getItemIconSrc(materialOnMap.code)\n\t\t\tconst markers =\n\t\t\t\tmaterialOnMap.locations === 'external'\n\t\t\t\t\t? 'external'\n\t\t\t\t\t: materialOnMap.locations.map((loc): MapMarkerRaw => ({ ...loc, icon, style: 'outline' }))\n\t\t\tmarkerGroups.push({ code: materialOnMap.code, title: materialOnMap.name, markers })\n\t\t}\n\n\t\treturn {\n\t\t\titemData: {\n\t\t\t\titem: materialOnMap,\n\t\t\t\timgSrc: getItemIconSrc(materialOnMap.code),\n\t\t\t},\n\t\t\tmarkerGroups,\n\t\t}\n\t}, [materialOnMap, related])\n\n\tconst isItemCharTalentMaterial = useMemo(() => ~item.types.indexOf('character-material-talent'), [item])\n\tconst isItemWeaponPrimaryMaterial = useMemo(() => ~item.types.indexOf('weapon-material-primary'), [item])\n\tconst codesForCalc = useMemo(() => {\n\t\treturn [...item.ancestryCodes.reverse(), item.code]\n\t}, [item])\n\treturn (\n\t\t<Card\n\t\t\ttitleEl={\n\t\t\t\t<>\n\t\t\t\t\t{item.name}{' '}\n\t\t\t\t\t{isItemCharTalentMaterial ? (\n\t\t\t\t\t\t<ToggleTalentMaterialFav itemCode={item.code} classes=\"d-inline align-middle p-1\" />\n\t\t\t\t\t) : null}\n\t\t\t\t\t{isItemWeaponPrimaryMaterial ? (\n\t\t\t\t\t\t<ToggleWeaponPrimaryMaterialFav\n\t\t\t\t\t\t\titemCode={item.code}\n\t\t\t\t\t\t\tclasses=\"d-inline align-middle p-1\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</>\n\t\t\t}\n\t\t\tclasses={classes}\n\t\t\tbodyEl={\n\t\t\t\titem.code === 'brilliant-diamond-gemstone' ? (\n\t\t\t\t\tI18N_OBTAINED_DURING_STORYLINE\n\t\t\t\t) : item.ancestryCodes.length > 0 ? (\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t{/* <ItemAvatar rarity={3} classes=\"large-avatar float-end\" src={getItemIconSrc(item.code)} /> */}\n\t\t\t\t\t\t{/* <BlockHeader>Описание</BlockHeader>\n\t\t\t\t<div className=\"mb-3\">{notesToJSX()}</div> */}\n\t\t\t\t\t\t<BlockHeader>{I18N_ALCHEMY_CALC}</BlockHeader>\n\t\t\t\t\t\t<AlchemyCalculator ancestryCodes={codesForCalc} />\n\t\t\t\t\t</div>\n\t\t\t\t) : null\n\t\t\t}\n\t\t\tmapEl={dataForMap.markerGroups.length ? <MapWrap {...dataForMap} /> : null}\n\t\t></Card>\n\t)\n}\n","import { GI_DomainTypeCode } from '#lib/genshin'\n\nexport function getDomainIconSrc(domainType: GI_DomainTypeCode): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/domains/${domainType}.png`\n}\n","export function getEnemyIconSrc(enemyCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/enemies/${enemyCode}.png`\n}\n","export default __webpack_public_path__ + \"Element_Anemo.f809fde3.png\";","export default __webpack_public_path__ + \"Element_Cryo.019d72f9.png\";","export default __webpack_public_path__ + \"Element_Electro.342332ac.png\";","export default __webpack_public_path__ + \"Element_Geo.94f4e68a.png\";","export default __webpack_public_path__ + \"Element_Hydro.f2f8bd8a.png\";","import element_Anemo from '#src/media/Element_Anemo.png'\n// import element_Dendro from '#src/media/Element_Dendro.png'\nimport element_Cryo from '#src/media/Element_Cryo.png'\nimport element_Electro from '#src/media/Element_Electro.png'\nimport element_Geo from '#src/media/Element_Geo.png'\nimport element_Hydro from '#src/media/Element_Hydro.png'\nimport element_Pyro from '#src/media/Element_Pyro.png'\n\nimport type { GI_ElementCode } from '#lib/genshin'\n\nexport type GI_Element = { readonly code: GI_ElementCode; imgSrc: string }\nexport const elements: GI_Element[] = [\n\t{ code: 'pyro' as const, imgSrc: element_Pyro },\n\t{ code: 'hydro' as const, imgSrc: element_Hydro },\n\t{ code: 'anemo' as const, imgSrc: element_Anemo },\n\t{ code: 'electro' as const, imgSrc: element_Electro },\n\t// { code: 'dendro' as const , imgSrc: element_Dendro },\n\t{ code: 'cryo' as const, imgSrc: element_Cryo },\n\t{ code: 'geo' as const, imgSrc: element_Geo },\n]\n","export default __webpack_public_path__ + \"Element_Pyro.f65c2e38.png\";","// export type Character = {\n// \tcode: string,\n// \telement:\n// }\n\n// export function getCharactersWithElement = (characters, elementCode) = {\n// \treturn characters.filter(c=> c.element = elementCode)\n// }\n\nfunction unprefixTraveler(code: string) {\n\treturn code.startsWith('traveler-') ? 'traveler' : code\n}\n\nexport function getCharacterAvatarSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/avatars/${unprefixTraveler(code)}.png`\n}\n\nexport function getCharacterAvatarLargeSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/avatars/${unprefixTraveler(code)}.large.png`\n}\n\nexport function getCharacterPortraitSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/portraits/${unprefixTraveler(code)}.png`\n}\n\nexport function getCharacterSilhouetteSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/silhouettes/${unprefixTraveler(code)}.svg`\n}\n","import { createContext } from 'preact'\nimport { useCallback, useContext, useRef, useState } from 'preact/hooks'\n\nimport { GI_RarityCode } from '#lib/genshin'\nimport {\n\tArtifactFullInfo,\n\tDomainShortInfo,\n\tEnemyShortInfo,\n\tItemShortInfo,\n\tWeaponFullInfo,\n} from '#lib/parsing/combine'\nimport { mustBeNever } from '#src/../../lib/utils/values'\nimport { A } from '#src/routes/router'\nimport { getAllArtifacts } from '#src/utils/artifacts'\nimport { ArtifactCard, CardDescMobileWrap, WeaponCard } from './dd-cards'\n\nimport './item-cards.scss'\nimport { elements } from '#src/utils/elements'\nimport { getCharacterAvatarSrc } from '#src/utils/characters'\nimport { getCoverArtifactForSet } from '#src/modules/builds/common'\n\nexport function getRarityBorder(r: GI_RarityCode): string {\n\treturn r === 5 ? 'border-warning' : 'border-light'\n}\n\ninterface ItemAvatarCommonProps {\n\trarity?: GI_RarityCode\n\tisNoBg?: boolean\n\tclasses?: string\n\thref?: string\n\tonClick?(): unknown\n\tbadgeTopStart?: string | null | JSX.Node\n\tbadgeTopEnd?: string | null | JSX.Node\n\tddComponent?: JSX.Element\n}\ninterface ItemAvatarProps extends ItemAvatarCommonProps {\n\tsrc: string\n}\ninterface CharacterAvatarProps extends ItemAvatarCommonProps {\n\tcode: string //todo charcode\n}\nexport function ItemAvatar({\n\tsrc,\n\trarity,\n\tclasses = '',\n\thref,\n\tisNoBg,\n\tonClick,\n\tbadgeTopStart,\n\tbadgeTopEnd,\n\tddComponent,\n}: ItemAvatarProps): JSX.Element {\n\t;['bg-2', 'bg-3', 'bg-4', 'bg-5']\n\tconst rarityClass = isNoBg ? '' : rarity ? 'bg-' + rarity : 'bg-dark'\n\n\tconst elRef = useRef<HTMLAnchorElement>(null)\n\tconst [isExpanded, setIsExpanded] = useState(false)\n\tconst closeDd = useCallback(() => isExpanded && setIsExpanded(false), [setIsExpanded, isExpanded])\n\tconst openDd = useCallback(() => !isExpanded && setIsExpanded(true), [setIsExpanded, isExpanded])\n\tconst pointerClass = ddComponent || onClick ? 'c-pointer' : ''\n\tconst onClickLocal = useCallback(() => {\n\t\topenDd && openDd()\n\t\tonClick && onClick()\n\t}, [openDd, onClick])\n\treturn (\n\t\t<DdContext.Provider value={{ onClickAway: closeDd }}>\n\t\t\t<A\n\t\t\t\thref={href}\n\t\t\t\tclassName={`item-avatar position-relative rounded-circle d-inline-block ${pointerClass} ${rarityClass} ${classes}`}\n\t\t\t\tinnerRef={elRef}\n\t\t\t\tonClick={onClickLocal}\n\t\t\t>\n\t\t\t\t<img className=\"image\" src={src} />\n\t\t\t\t{badgeTopStart && (\n\t\t\t\t\t<span className=\"position-absolute top-0 start-0 translate-middle badge rounded-pill opacity-75 small\">\n\t\t\t\t\t\t{badgeTopStart}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t\t{badgeTopEnd && (\n\t\t\t\t\t<span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill opacity-75 small\">\n\t\t\t\t\t\t{badgeTopEnd}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t\t{/* <span className=\"position-absolute top-0 start-0 translate-middle badge rounded-pill bg-primary border border-light\">\n\t\t\t\t4\n\t\t\t</span> */}\n\t\t\t\t{isExpanded && elRef.current && ddComponent && (\n\t\t\t\t\t<CardDescMobileWrap onClickAway={closeDd} targetEl={elRef.current}>\n\t\t\t\t\t\t{ddComponent}\n\t\t\t\t\t</CardDescMobileWrap>\n\t\t\t\t)}\n\t\t\t</A>\n\t\t</DdContext.Provider>\n\t)\n}\nconst codeToBadge = (code: string) => {\n\tconst e = elements.find(e => code === `traveler-${e.code}`)\n\treturn e ? <img className=\"badge-element-icon d-block ms-n1 mb-n1\" src={e.imgSrc} /> : null\n}\nexport function CharacterAvatar(props: CharacterAvatarProps) {\n\tconst classesLocal = props.rarity\n\t\t? `${props.classes} border ${getRarityBorder(props.rarity)}`\n\t\t: props.classes\n\treturn (\n\t\t<ItemAvatar\n\t\t\t{...props}\n\t\t\trarity={undefined} //обработкой рарности персонажа занимается этот компонент, а не итемаватар\n\t\t\tclasses={classesLocal}\n\t\t\tsrc={getCharacterAvatarSrc(props.code)}\n\t\t\tbadgeTopEnd={codeToBadge(props.code)}\n\t\t/>\n\t)\n}\nfunction ItemLabel({\n\trarity,\n\tclasses = '',\n\tchildren,\n}: {\n\trarity?: GI_RarityCode | null\n\tclasses?: string\n\tchildren: JSX.Nodes\n}): JSX.Element {\n\tconst rarityClass =\n\t\trarity === 5 //\n\t\t\t? 'text-warning'\n\t\t\t: rarity === 4\n\t\t\t? 'text-primary'\n\t\t\t: ''\n\t//todo c-pointer text-decoration-underline-dotted для интерактивных\n\treturn <label class={`${classes} ${rarityClass}`}>{children}</label>\n}\n\nfunction ItemDd({\n\tclasses = '',\n\tchildren,\n\tddComponent,\n}: {\n\tclasses?: string\n\tddComponent?: JSX.Element | null\n\tchildren: JSX.Nodes\n}): JSX.Element {\n\tconst elRef = useRef<HTMLButtonElement>(null)\n\tconst [isExpanded, setIsExpanded] = useState(false)\n\n\tconst closeDd = useCallback(() => setIsExpanded(false), [])\n\tconst openDd = useCallback(() => setIsExpanded(true), [])\n\n\tconst pointerClass = ddComponent ? 'c-pointer' : ''\n\treturn (\n\t\t<DdContext.Provider value={{ onClickAway: closeDd }}>\n\t\t\t<button\n\t\t\t\tclassName={`btn-reset ${pointerClass} ${classes}`}\n\t\t\t\tref={elRef}\n\t\t\t\tonClick={openDd}\n\t\t\t\tdisabled={!ddComponent}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t\t{isExpanded && elRef.current && ddComponent && (\n\t\t\t\t\t<CardDescMobileWrap onClickAway={closeDd} targetEl={elRef.current}>\n\t\t\t\t\t\t{ddComponent}\n\t\t\t\t\t</CardDescMobileWrap>\n\t\t\t\t)}\n\t\t\t</button>\n\t\t</DdContext.Provider>\n\t)\n}\n\nexport const ItemsDataContext = createContext({\n\tweapons: new Map<string, WeaponFullInfo>(),\n\tartifacts: new Map<string, ArtifactFullInfo>(),\n\tdomains: new Map<string, DomainShortInfo>(),\n\tenemies: new Map<string, EnemyShortInfo>(),\n\titems: new Map<string, ItemShortInfo>(),\n})\n\nexport function ItemLabelWithDd({\n\tclasses = '',\n\ttype,\n\tcode,\n\tchildren,\n}: {\n\tclasses?: string\n\ttype: 'weapon' | 'artifact'\n\tcode: string\n\tchildren: JSX.Nodes\n}): JSX.Element {\n\tconst maps = useContext(ItemsDataContext)\n\n\tlet ddComp: JSX.Element | undefined = undefined\n\tlet rarity: GI_RarityCode | undefined = undefined\n\tif (type === 'weapon') {\n\t\tconst weapon = maps.weapons.get(code)\n\t\tif (weapon) {\n\t\t\tddComp = <WeaponCard weapon={weapon} related={maps} />\n\t\t\trarity = weapon.rarity\n\t\t}\n\t} else if (type === 'artifact') {\n\t\tconst artifacts = getAllArtifacts(code, maps.artifacts)\n\t\tif (artifacts.length > 0) {\n\t\t\tconst coverArtifact = getCoverArtifactForSet(code, artifacts)\n\t\t\tddComp = <ArtifactCard title={coverArtifact.name} artifacts={artifacts} related={maps} />\n\t\t\trarity = artifacts[0].rarity\n\t\t}\n\t} else mustBeNever(type)\n\n\tconst interactiveLabelClass = ddComp ? 'text-decoration-underline-dotted' : ''\n\treturn (\n\t\t<ItemDd ddComponent={ddComp} classes={`d-inline ${classes}`}>\n\t\t\t<ItemLabel classes={`${interactiveLabelClass} c-inherit`} rarity={rarity}>\n\t\t\t\t{children}\n\t\t\t</ItemLabel>\n\t\t</ItemDd>\n\t)\n}\n\nexport const DdContext = createContext({\n\tonClickAway: () => {\n\t\treturn\n\t},\n})\n\nexport function LabeledItemAvatar({\n\timgSrc,\n\trarity,\n\tclasses = '',\n\tavatarClasses = '',\n\ttitle,\n\tavatarTopStartBadge,\n\tavatarTopEndBadge,\n\tddComponent,\n\tisNoBg = false,\n}: {\n\tisNoBg?: boolean\n\timgSrc: string\n\trarity?: GI_RarityCode\n\ttitle: string\n\tclasses?: string\n\tavatarClasses?: string\n\tavatarTopStartBadge?: string\n\tavatarTopEndBadge?: string\n\tddComponent?: JSX.Element\n}): JSX.Element {\n\tconst interactiveLabelClass = ddComponent ? 'text-decoration-underline-dotted' : ''\n\treturn (\n\t\t<ItemDd ddComponent={ddComponent} classes={`w-100 text-nowrap ${classes}`}>\n\t\t\t<ItemAvatar\n\t\t\t\tclasses={`small-avatar align-middle ${avatarClasses}`}\n\t\t\t\tsrc={imgSrc}\n\t\t\t\tbadgeTopStart={avatarTopStartBadge}\n\t\t\t\tbadgeTopEnd={avatarTopEndBadge}\n\t\t\t\tisNoBg={isNoBg}\n\t\t\t/>\n\t\t\t<ItemLabel\n\t\t\t\tclasses={'text-wrap align-middle lh-1 ps-1 mw-75 c-inherit ' + interactiveLabelClass}\n\t\t\t\trarity={rarity}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</ItemLabel>\n\t\t</ItemDd>\n\t)\n}\n","import { useMemo, useState } from 'preact/hooks'\n\nimport { GI_ElementCode, GI_WeaponTypeCode } from '#lib/genshin'\nimport { charactersShortList } from '#src/api/generated'\nimport { CharacterAvatar, ItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport { elements } from '#src/utils/elements'\nimport { weaponTypes } from '#src/utils/weapons'\n\nexport function CharacterPickerMobile() {\n\tconst [selectedElementCode, setSelectedElementCode] = useState<null | GI_ElementCode>(null)\n\tconst selectElement = el => setSelectedElementCode(selectedElementCode === el.code ? null : el.code)\n\tconst [selectedWeaponTypeCode, setSelectedWeaponTypeCode] = useState<null | GI_WeaponTypeCode>(null)\n\n\tconst selectWeaponType = wp =>\n\t\tsetSelectedWeaponTypeCode(selectedWeaponTypeCode === wp.code ? null : wp.code)\n\n\tconst elementGroups = useMemo(() => {\n\t\tconst filteredElements = selectedElementCode\n\t\t\t? elements.filter(x => x.code === selectedElementCode)\n\t\t\t: elements\n\t\treturn filteredElements\n\t\t\t.map(element => ({\n\t\t\t\telement,\n\t\t\t\tcharacters: charactersShortList.filter(\n\t\t\t\t\tx =>\n\t\t\t\t\t\tx.elementCode === element.code &&\n\t\t\t\t\t\t(selectedWeaponTypeCode === null || x.weaponTypeCode === selectedWeaponTypeCode),\n\t\t\t\t),\n\t\t\t}))\n\t\t\t.filter(x => x.characters.length > 0)\n\t}, [selectedElementCode, selectedWeaponTypeCode])\n\n\tconst rows = elementGroups.map(({ element, characters }) => (\n\t\t<div className=\"row py-2\" key={element.code}>\n\t\t\t<div className=\"col-2 py-1\">\n\t\t\t\t<ItemAvatar isNoBg={true} classes=\"d-block mx-auto muted-icon\" src={element.imgSrc} />\n\t\t\t</div>\n\t\t\t<div className=\"col py-31\">\n\t\t\t\t{characters.map(x => (\n\t\t\t\t\t<CharacterAvatar\n\t\t\t\t\t\tcode={x.code}\n\t\t\t\t\t\trarity={x.rarity}\n\t\t\t\t\t\thref={'/builds/' + x.code}\n\t\t\t\t\t\tclasses={`m-1`}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t))\n\n\treturn (\n\t\t<div className=\"character-picker-mobile\">\n\t\t\t<div className=\"m-auto text-center my-3\">\n\t\t\t\t<div className=\"m-auto\">Filter </div>\n\t\t\t\t<div className=\"d-inline\">\n\t\t\t\t\t<div className=\"d-inline\">\n\t\t\t\t\t\t{elements.map(el => (\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tclasses={`small-avatar bg-secondary p-1 m-1 ${\n\t\t\t\t\t\t\t\t\tselectedElementCode && selectedElementCode !== el.code ? 'opacity-25' : ''\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tkey={el.code}\n\t\t\t\t\t\t\t\tsrc={el.imgSrc}\n\t\t\t\t\t\t\t\tonClick={() => selectElement(el)} //todo почему без стрелки тайпскрипт не пускает?\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<br />\n\t\t\t\t\t<div className=\"d-inline\">\n\t\t\t\t\t\t{weaponTypes.map(wt => (\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tclasses={`small-avatar bg-secondary p-1 m-1 ${\n\t\t\t\t\t\t\t\t\tselectedWeaponTypeCode && selectedWeaponTypeCode !== wt.code\n\t\t\t\t\t\t\t\t\t\t? 'opacity-25'\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tkey={wt.code}\n\t\t\t\t\t\t\t\tsrc={wt.imgSrc}\n\t\t\t\t\t\t\t\tonClick={() => selectWeaponType(wt)} //todo почему без стрелки тайпскрипт не пускает?\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{rows.length === 0 ? 'not yet' : rows}\n\t\t</div>\n\t)\n}\n","import { charactersShortList } from '#src/api/generated'\nimport { CharacterAvatar, ItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport { elements } from '#src/utils/elements'\nimport { GI_WeaponType, weaponTypes } from '#src/utils/weapons'\nimport { CharacterPickerMobile } from './mobile-character-picker'\n\nimport './character-picker.scss'\n\nfunction CharacterPickerDesktop({ weaponTypes }: { weaponTypes: GI_WeaponType[] }) {\n\treturn (\n\t\t<>\n\t\t\t{elements.map((el, i, arr) => {\n\t\t\t\tconst isLastRowClass = i + 1 === arr.length ? 'rounded-bottom' : ''\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"row\" key={el.code}>\n\t\t\t\t\t\t<div className=\"col col-2 pt-3 pb-2 opacity-50 rounded-start\">\n\t\t\t\t\t\t\t<ItemAvatar classes=\"d-block mx-auto\" isNoBg={true} src={el.imgSrc} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{weaponTypes.map(wType => (\n\t\t\t\t\t\t\t<div className={`col col-2 pt-3 pb-2 px-2 ${isLastRowClass}`} key={wType.code}>\n\t\t\t\t\t\t\t\t{charactersShortList\n\t\t\t\t\t\t\t\t\t.filter(x => x.elementCode === el.code && x.weaponTypeCode === wType.code)\n\t\t\t\t\t\t\t\t\t.map(x => (\n\t\t\t\t\t\t\t\t\t\t<CharacterAvatar\n\t\t\t\t\t\t\t\t\t\t\tkey={x.code}\n\t\t\t\t\t\t\t\t\t\t\tcode={x.code}\n\t\t\t\t\t\t\t\t\t\t\trarity={x.rarity}\n\t\t\t\t\t\t\t\t\t\t\thref={'/builds/' + x.code}\n\t\t\t\t\t\t\t\t\t\t\tclasses={`mb-1 me-1 mb-xxl-2 me-xxl-2`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})}\n\t\t</>\n\t)\n}\n\nexport function CharacterPicker() {\n\treturn (\n\t\t<div className=\"character-picker\">\n\t\t\t<div class=\"d-none d-xl-block container overflow-hidden big-table\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col col-2 pb-3 pt-2\"></div>\n\t\t\t\t\t{weaponTypes.map((wt, i) => (\n\t\t\t\t\t\t<div className=\"col col-2 pb-3 pt-2 rounded-top \" key={wt.code}>\n\t\t\t\t\t\t\t<ItemAvatar classes=\"d-block mx-auto\" isNoBg={true} src={wt.imgSrc} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<CharacterPickerDesktop weaponTypes={weaponTypes} />\n\t\t\t</div>\n\t\t\t<div class=\"d-xl-none\">\n\t\t\t\t<CharacterPickerMobile />\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { useEffect, useMemo } from 'preact/hooks'\n\nimport { charactersShortList } from '#src/api/generated'\nimport { I18N_FAV_CHARACTERS } from '#src/i18n/i18n'\nimport { MAX_SMTHS_TO_STORE } from '#src/modules/builds/common'\nimport { useLocalStorage } from '#src/utils/hooks'\nimport { CharacterAvatar } from '../item-cards/item-avatars'\nconst shortListReversed = charactersShortList.reverse()\nexport function FavoriteCharacters({\n\tclasses = '',\n\tonCharacterSelect,\n\tshoudSelectFirst,\n\tnavigateToCharacter,\n\tselectedCharacterCode,\n\tblockLabel = I18N_FAV_CHARACTERS,\n}: {\n\tclasses?: string\n\tonCharacterSelect?(characterCode: string): void\n\tshoudSelectFirst?: boolean\n\tnavigateToCharacter: boolean\n\tselectedCharacterCode?: string\n\tblockLabel?: string\n}): JSX.Element {\n\tconst [favCharCodes] = useLocalStorage<string[]>('favoriteCharacterCodes', [])\n\t//todo sort characters by release date\n\tconst charactersShortListCodes = useMemo(\n\t\t() => shortListReversed.map(c => c.code).filter(c => (~favCharCodes.indexOf(c) ? false : c)),\n\t\t[favCharCodes],\n\t)\n\tconst characterCodes =\n\t\tfavCharCodes.length < MAX_SMTHS_TO_STORE\n\t\t\t? favCharCodes.concat(charactersShortListCodes.slice(0, MAX_SMTHS_TO_STORE - favCharCodes.length))\n\t\t\t: favCharCodes.slice(0, MAX_SMTHS_TO_STORE)\n\t// const optsForSelect = useMemo(\n\t// \t//todo выпилить или вставить нормальные имена\n\t// \t() =>\n\t// \t\t(characterCodes.length > 4 ? characterCodes.slice(4, characterCodes.length) : []).map(c => {\n\t// \t\t\treturn { title: c, code: c }\n\t// \t\t}),\n\t// \t[characterCodes],\n\t// )\n\t// const onSelectViaSelect = useCallback(\n\t// \topt => {\n\t// \t\tonCharacterSelect && onCharacterSelect(opt.code)\n\t// \t},\n\t// \t[onCharacterSelect],\n\t// )\n\n\tuseEffect(() => {\n\t\tshoudSelectFirst && onCharacterSelect && onCharacterSelect(characterCodes[0])\n\t}, [onCharacterSelect, characterCodes, shoudSelectFirst])\n\n\tconst charactersElems = useMemo(\n\t\t() =>\n\t\t\tcharacterCodes.map(code => (\n\t\t\t\t<CharacterAvatar\n\t\t\t\t\tcode={code}\n\t\t\t\t\t// rarity={charactersShortList.find(x => x.code === code)?.rarity ?? 5}\n\t\t\t\t\tclasses={`me-1 small-avatar ${\n\t\t\t\t\t\tselectedCharacterCode && selectedCharacterCode !== code && 'opacity-50'\n\t\t\t\t\t}`}\n\t\t\t\t\tkey={code}\n\t\t\t\t\thref={navigateToCharacter ? '/builds/' + code : undefined}\n\t\t\t\t\tonClick={() => onCharacterSelect && onCharacterSelect(code)}\n\t\t\t\t/>\n\t\t\t)),\n\t\t[characterCodes, onCharacterSelect, navigateToCharacter, selectedCharacterCode],\n\t)\n\treturn (\n\t\t<div className={`favorite-characters ${classes}`}>\n\t\t\t<label className=\"opacity-75 pe-2 align-middle py-1\">{blockLabel}:</label>\n\t\t\t<br className=\"d-xl-none\" />\n\t\t\t{charactersElems}\n\t\t\t{/* {optsForSelect.length ? (\n\t\t\t\t<SimpleSelect\n\t\t\t\t\tclasses=\"d-inline w-auto align-top\"\n\t\t\t\t\toptions={optsForSelect}\n\t\t\t\t\tonOptionSelect={onSelectViaSelect}\n\t\t\t\t\tselectedOption={null}\n\t\t\t\t/>\n\t\t\t) : null} */}\n\t\t</div>\n\t)\n}\n","import './characters.scss'\n\nexport function CharacterPortrait({ src, classes = '' }: { src: string; classes?: string }): JSX.Element {\n\treturn <img className={`character-portrait ${classes}`} src={src} />\n}\n","import { useMemo } from 'preact/hooks'\n\nimport { arrOrItemToArr } from '#lib/utils/collections'\nimport { CharacterFullInfoWithRelated } from '#src/../../lib/parsing/combine'\nimport { getAllRelated, MapAllByCode } from '#src/api/utils'\nimport { BlockHeader } from '#src/components/block-header'\nimport { CharacterPortrait } from '#src/components/characters'\nimport { CentredSpinner } from '#src/components/spinners'\nimport { BtnTabGroup, Tabs, useSelectable } from '#src/components/tabs'\nimport { OtherItemCard, WeaponCard } from '#src/containers/item-cards/dd-cards'\nimport { ItemAvatar, ItemsDataContext, LabeledItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport {\n\tI18N_ART_STATS_PRIORITY,\n\tI18N_ART_TYPE,\n\tI18N_ARTIFACTS,\n\tI18N_ASC_MATERIALS,\n\tI18N_BACK,\n\tI18N_CONJUCTIONS,\n\tI18N_NOTES,\n\tI18N_STAT_NAME,\n\tI18N_SUBSTATS_PRIORITY,\n\tI18N_TALENT_NAME,\n\tI18N_TALENTS_PRIORITY,\n\tI18N_WEAPON_REFINE,\n\tI18N_WEAPON_STACKS_COUNT,\n\tI18N_WEAPONS,\n} from '#src/i18n/i18n'\nimport { A } from '#src/routes/router'\nimport { getArtifactTypeIconSrc } from '#src/utils/artifacts'\nimport {\n\tgetCharacterAvatarLargeSrc,\n\tgetCharacterPortraitSrc,\n\tgetCharacterSilhouetteSrc,\n} from '#src/utils/characters'\nimport { getItemIconSrc } from '#src/utils/items'\nimport { getWeaponIconSrc } from '#src/utils/weapons'\nimport {\n\tBuildRoleOrDummy,\n\tCIRCLET_GOBLET_SANDS,\n\tgenArtifactAdvice,\n\tgenArtMainStatDetail,\n\tgenNotes,\n\tgenSeeCharNotes,\n\tgenSimpleList,\n\tgetRoleData,\n\tItemsJoinerWrap,\n\tItemsListGroupWrap,\n\tmakeRoleTitle,\n\tnotesToJSX,\n\tToggleCharFav,\n} from './common'\n\nimport './character-build-detailed.scss'\n\nexport function CharacterBuildDetailed({\n\tbuild,\n\tisUpdating,\n}: {\n\tbuild: MapAllByCode<CharacterFullInfoWithRelated>\n\tisUpdating: boolean\n}): JSX.Element {\n\tconst roleTabs: BuildRoleOrDummy[] = build.character.roles\n\tconst characterCode = build.character.code\n\tconst [selectedRoleTab, setSelectedRoleTab] = useSelectable(roleTabs, [characterCode])\n\n\tconst weaponListBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\tif (!role) return []\n\t\treturn role.weapons.advices.map((advice, i) => {\n\t\t\tconst isInList = advice.similar.length > 1\n\t\t\tconst map = advice.similar.map((item, i) => {\n\t\t\t\tconst weapon = build.weapons.find(x => x.code === item.code)\n\t\t\t\tif (!weapon) return null\n\t\t\t\tconst isLastInList = i >= advice.similar.length - 1\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<LabeledItemAvatar\n\t\t\t\t\t\t\timgSrc={getWeaponIconSrc(weapon.code)}\n\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\tweapon.name +\n\t\t\t\t\t\t\t\t(item.refine === null ? '' : ` [${I18N_WEAPON_REFINE(item.refine)}]`) +\n\t\t\t\t\t\t\t\t(item.stacks === null ? '' : ` (${I18N_WEAPON_STACKS_COUNT(item.stacks)})`)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trarity={weapon.rarity}\n\t\t\t\t\t\t\tavatarClasses=\"with-padding\"\n\t\t\t\t\t\t\tclasses={`small ${!isInList || isLastInList ? 'mb-1' : ''}`}\n\t\t\t\t\t\t\tddComponent={<WeaponCard weapon={weapon} related={build.maps} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{genNotes(item)}\n\t\t\t\t\t\t{genSeeCharNotes(item)}\n\t\t\t\t\t\t{isInList && !isLastInList && (\n\t\t\t\t\t\t\t<ItemsJoinerWrap>{I18N_CONJUCTIONS.or}</ItemsJoinerWrap>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\t})\n\t\t\treturn (\n\t\t\t\t<li key={i} className=\"pt-1\">\n\t\t\t\t\t{isInList ? <ItemsListGroupWrap>{map}</ItemsListGroupWrap> : map}\n\t\t\t\t</li>\n\t\t\t)\n\t\t})\n\t}, [build, selectedRoleTab])\n\n\tconst artifactsListBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\tif (!role) return []\n\n\t\treturn role.artifacts.sets.map((set, i) => {\n\t\t\treturn (\n\t\t\t\t<li key={i} className=\"pt-1\">\n\t\t\t\t\t{genArtifactAdvice(set.arts, build)}\n\t\t\t\t\t{genNotes(set)}\n\t\t\t\t\t{genSeeCharNotes(set)}\n\t\t\t\t</li>\n\t\t\t)\n\t\t})\n\t}, [build, selectedRoleTab])\n\tconst artifactStatsAndSkillsBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<BlockHeader>{I18N_ART_STATS_PRIORITY}</BlockHeader>\n\t\t\t\t<ul className=\"mb-1 list-unstyled ms-1 small\">\n\t\t\t\t\t{CIRCLET_GOBLET_SANDS.map(ac => (\n\t\t\t\t\t\t<li className=\"my-1 ms-1\">\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tsrc={getArtifactTypeIconSrc(ac)}\n\t\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\t\tclasses=\"small-avatar small with-padding align-middle\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<b className=\"text-muted\">{I18N_ART_TYPE(ac)} — </b>\n\t\t\t\t\t\t\t{genArtMainStatDetail(role, ac)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"opacity-75 small\">\n\t\t\t\t\t{notesToJSX(role.mainStats.notes)} {genSeeCharNotes(role.mainStats)}\n\t\t\t\t</div>\n\t\t\t\t<BlockHeader classes=\"mt-3\">{I18N_SUBSTATS_PRIORITY}</BlockHeader>\n\t\t\t\t<ol className=\"mb-1 small\">\n\t\t\t\t\t{role.subStats.advices.map(advice => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t{genSimpleList(advice.codes.map(I18N_STAT_NAME))}\n\t\t\t\t\t\t\t\t{' ' + genNotes(advice) + genSeeCharNotes(advice)}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</ol>\n\t\t\t\t<div className=\"opacity-75 small\">\n\t\t\t\t\t{notesToJSX(role.subStats.notes)} {genSeeCharNotes(role.subStats)}\n\t\t\t\t</div>\n\t\t\t\t<BlockHeader classes=\"mt-3\">{I18N_TALENTS_PRIORITY}</BlockHeader>\n\t\t\t\t<ol className=\"small\">\n\t\t\t\t\t{role.talents.advices.map(advice => {\n\t\t\t\t\t\treturn <li>{arrOrItemToArr(advice).map(I18N_TALENT_NAME)}</li>\n\t\t\t\t\t})}\n\t\t\t\t</ol>\n\t\t\t\t<div className=\"opacity-75 small\">\n\t\t\t\t\t{notesToJSX(role.talents.notes)} {genSeeCharNotes(role.subStats)}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t)\n\t}, [build, selectedRoleTab])\n\tconst notesBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div>{notesToJSX(role.tips)}</div>\n\t\t\t\t<div>{notesToJSX(role.notes)}</div>\n\t\t\t\t<div>{notesToJSX(build.character.credits)}</div>\n\t\t\t</>\n\t\t)\n\t}, [build, selectedRoleTab])\n\tconst materialsBlock = useMemo(() => {\n\t\tconst materials = getAllRelated(build.maps.items, build.character.materialCodes)\n\t\treturn (\n\t\t\t<div className=\"w-100 d-flex flex-wrap justify-content-between\">\n\t\t\t\t{materials.map(m => (\n\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\tclasses=\"mb-2 mx-1 small-avatar with-padding\"\n\t\t\t\t\t\tsrc={getItemIconSrc(m.code)}\n\t\t\t\t\t\tddComponent={<OtherItemCard item={m} related={build.maps} />}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t)\n\t}, [build])\n\tconst CharacterDetailDesktop = (\n\t\t<div className=\"d-none d-xl-block\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col col-3 p-0\">\n\t\t\t\t\t\t<A className=\"btn btn-secondary align-self-center\" type=\"submit\" href=\"/builds\">\n\t\t\t\t\t\t\t<span className=\"fs-4 lh-1 opacity-75\">‹ </span> {I18N_BACK}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col col-9\">\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\ttabs={roleTabs}\n\t\t\t\t\t\t\ttitleFunc={makeRoleTitle}\n\t\t\t\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col col-3 pt-3\">\n\t\t\t\t\t\t<div className=\"position-relative\">\n\t\t\t\t\t\t\t<CharacterPortrait src={getCharacterPortraitSrc(characterCode)} classes=\"w-100\" />\n\t\t\t\t\t\t\t<div className=\"mt-3\">{materialsBlock}</div>\n\t\t\t\t\t\t\t<ToggleCharFav\n\t\t\t\t\t\t\t\tclasses=\"fs-3 position-absolute top-0 end-0\"\n\t\t\t\t\t\t\t\tcharacterCode={characterCode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col col-9\">\n\t\t\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t\t\t<div className=\"flex-fill w-33 p-3\">\n\t\t\t\t\t\t\t\t<BlockHeader>{I18N_WEAPONS}</BlockHeader>\n\t\t\t\t\t\t\t\t<ol className=\"items-list\">{weaponListBlock}</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-fill w-33 p-3\">\n\t\t\t\t\t\t\t\t<BlockHeader>{I18N_ARTIFACTS}</BlockHeader>\n\t\t\t\t\t\t\t\t<ol className=\"items-list\">{artifactsListBlock}</ol>\n\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-fill w-33 p-3\">{artifactStatsAndSkillsBlock}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"w-100\">\n\t\t\t\t\t\t\t<div className=\"p-3\">\n\t\t\t\t\t\t\t\t<BlockHeader>{I18N_NOTES}</BlockHeader>\n\t\t\t\t\t\t\t\t<div className=\"text-muted\">{notesBlock}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n\tconst CharacterDetailMobile = (\n\t\t<div className=\"d-xl-none\">\n\t\t\t<CharacterPortrait\n\t\t\t\tsrc={getCharacterSilhouetteSrc(characterCode)}\n\t\t\t\tclasses=\"w-75 character-portrait-mobile\"\n\t\t\t/>\n\t\t\t<BtnTabGroup\n\t\t\t\ttabs={roleTabs}\n\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\tclasses=\"w-100 btn-group-sm mt-3 mb-0\"\n\t\t\t/>\n\t\t\t<div className=\"\">\n\t\t\t\t<div className=\"my-3\">\n\t\t\t\t\t<BlockHeader>{I18N_ASC_MATERIALS}</BlockHeader>\n\t\t\t\t\t{materialsBlock}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"my-3\">\n\t\t\t\t\t<BlockHeader>{I18N_ARTIFACTS}</BlockHeader>\n\t\t\t\t\t<ol className=\"items-list\">{artifactsListBlock}</ol>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"my-3\">{artifactStatsAndSkillsBlock}</div>\n\t\t\t\t<div className=\"my-3\">\n\t\t\t\t\t<BlockHeader>{I18N_WEAPONS}</BlockHeader>\n\t\t\t\t\t<ol className=\"items-list\">{weaponListBlock}</ol>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<BlockHeader>{I18N_NOTES}</BlockHeader>\n\t\t\t\t<div className=\"opacity-75\">{notesBlock}</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n\treturn (\n\t\t<ItemsDataContext.Provider value={build.maps}>\n\t\t\t<div className=\"character-build-detailed mt-2 mb-3 position-relative\">\n\t\t\t\t<div className=\"d-flex d-xl-none mt-3\">\n\t\t\t\t\t<A className=\"btn btn-secondary align-self-center\" type=\"submit\" href=\"/builds\">\n\t\t\t\t\t\t<span className=\"fs-4 lh-1 opacity-75\">‹ </span> {I18N_BACK}\n\t\t\t\t\t</A>\n\t\t\t\t\t<h5 className=\"ps-3 pe-1 m-0 align-self-center\">{build.character.name}</h5>\n\t\t\t\t\t<ToggleCharFav classes=\"fs-3 align-self-center\" characterCode={characterCode} />\n\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\tsrc={getCharacterAvatarLargeSrc(characterCode)}\n\t\t\t\t\t\tclasses=\"large-avatar align-self-end mt-n5 ms-auto\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{isUpdating ? <CentredSpinner /> : null}\n\t\t\t\t<div className={isUpdating ? 'opacity-50 pe-none' : ''}>\n\t\t\t\t\t{CharacterDetailDesktop}\n\t\t\t\t\t{CharacterDetailMobile}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ItemsDataContext.Provider>\n\t)\n}\n","import { BtnTabGroup } from '#src/components/tabs'\nimport { useCallback, useMemo, useState } from 'preact/hooks'\nconst cats = [\n\t{ title: 'Weapons', code: 'weapons' },\n\t{ title: 'Artifacts', code: 'artifacts' },\n]\nconst weapons = new Array(23).fill('1') //todo\nexport function WeaponsList() {\n\tconst [selectedCatCode, setSelectedCatCode] = useState<string | null>(null)\n\tconst selectCat = useCallback(tab => setSelectedCatCode(tab.code), [setSelectedCatCode])\n\tconst selectedCat = useMemo(\n\t\t() => cats.find(c => c.code === selectedCatCode) || cats[0],\n\t\t[selectedCatCode],\n\t)\n\tconsole.log(weapons)\n\treturn (\n\t\t<div>\n\t\t\t{weapons.map(w => (\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col\">1</div>\n\t\t\t\t\t<div className=\"col\">2</div>\n\t\t\t\t\t<div className=\"col\">3</div>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t)\n}\n","import { Tabs } from '#src/components/tabs'\n\nimport { useCallback, useMemo, useState } from 'preact/hooks'\nimport { WeaponsList } from './weapons-list'\nconst cats = [\n\t{ title: 'Weapons', code: 'weapons' },\n\t{ title: 'Artifacts', code: 'artifacts' },\n]\nexport function Equipment() {\n\tconst [selectedCatCode, setSelectedCatCode] = useState<string | null>(null)\n\tconst selectCat = useCallback(tab => setSelectedCatCode(tab.code), [setSelectedCatCode])\n\tconst selectedCat = useMemo(\n\t\t() => cats.find(c => c.code === selectedCatCode) || cats[0],\n\t\t[selectedCatCode],\n\t)\n\treturn (\n\t\t<div className=\"equipment container\">\n\t\t\t<h1 className=\"my-1 letter-spacing-1\">Character equipment</h1>\n\t\t\t<Tabs classes=\"w-100\" tabs={cats} onTabSelect={selectCat} selectedTab={selectedCat} />\n\t\t\t<WeaponsList />\n\t\t</div>\n\t)\n}\n","import { useMemo } from 'preact/hooks'\n\nimport { getRegionTime, GI_ROTATION_WEEKDAY_CODES, GI_ServerRegionCode } from '#lib/genshin'\nimport { arrGetAfter } from '#lib/utils/collections'\nimport { mustBeDefined } from '#src/../../lib/utils/values'\nimport { apiMaterialsTimetable } from '#src/api/endpoints'\nimport { Spinner } from '#src/components/spinners'\nimport { BtnTabGroup, Tabs, useSelectable } from '#src/components/tabs'\nimport {\n\tI18N_DUNGEONS,\n\tI18N_TALENTS,\n\tI18N_TODAY,\n\tI18N_TOMORROW,\n\tI18N_WEAPONS,\n\tI18N_WEEKDAYS,\n\tI18N_WHY_ADD_TO_FAVS_TIP,\n} from '#src/i18n/i18n'\nimport { isLoaded, useFetch, useForceUpdate, useLocalStorage, useVisibleTicker } from '#src/utils/hooks'\nimport { getItemIconLargeSrc, getItemIconSrc } from '#src/utils/items'\nimport {\n\tSK_DEFAULT_SELECTED_REGION_CODE,\n\tSK_FAV_CHAR_CODES,\n\tSK_FAV_TALENT_MATERIAL_CODES,\n\tSK_FAV_WEAPON_PRIMARY_MATERIAL_CODES,\n\tSK_SELECTED_REGION_CODE,\n} from '#src/utils/local-storage-keys'\nimport { HEART } from '#src/utils/typography'\nimport { OtherItemCard } from './item-cards/dd-cards'\nimport { CharacterAvatar, ItemAvatar } from './item-cards/item-avatars'\n\nimport './farm-today.scss'\n\nexport function FarmToday({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst ttData = useFetch(apiMaterialsTimetable, [])\n\tconst [selectedRegionCode] = useLocalStorage<GI_ServerRegionCode>(\n\t\tSK_SELECTED_REGION_CODE,\n\t\tSK_DEFAULT_SELECTED_REGION_CODE,\n\t)\n\tconst { weekdayMonSun, weekdayCode } = getRegionTime(selectedRegionCode)\n\tconst tomorrowCode = arrGetAfter(GI_ROTATION_WEEKDAY_CODES, weekdayCode)\n\tconst [favCharCodes] = useLocalStorage<string[]>(SK_FAV_CHAR_CODES, [])\n\tconst [favTalMaterialCodes] = useLocalStorage<string[]>(SK_FAV_TALENT_MATERIAL_CODES, [])\n\t// const [favWeaponDatas] = useLocalStorage<STORAGE_WEAPON_DATA[]>(SK_FAV_WEAPON_DATAS, [])\n\t// const favWeapMatCodes = useMemo(() => [...favWeaponDatas.map(wd => wd[1])], [favWeaponDatas])\n\tconst [favWeapPrimMatCodes] = useLocalStorage<string[]>(SK_FAV_WEAPON_PRIMARY_MATERIAL_CODES, [])\n\tconst forceUpdate = useForceUpdate()\n\tuseVisibleTicker(() => {\n\t\tforceUpdate()\n\t}, 60 * 1000)\n\tconst tabs = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tcode: weekdayCode,\n\t\t\t\ttitle: `${I18N_WEEKDAYS[weekdayMonSun]}, ${I18N_TODAY}`,\n\t\t\t},\n\t\t\t{ code: tomorrowCode, title: I18N_TOMORROW },\n\t\t],\n\t\t[weekdayCode, tomorrowCode, weekdayMonSun],\n\t)\n\tconst [selectedTab, setSelectedTab] = useSelectable(tabs, [selectedRegionCode])\n\n\treturn (\n\t\t<div className={`farm-today ${classes}`}>\n\t\t\t{!BUNDLE_ENV.IS_SSR && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"d-none d-xl-flex\">\n\t\t\t\t\t\t<h5 className=\"py-2 m-0 me-2 d-block \">{I18N_DUNGEONS}</h5>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\ttabs={tabs}\n\t\t\t\t\t\t\tselectedTab={selectedTab}\n\t\t\t\t\t\t\tonTabSelect={setSelectedTab}\n\t\t\t\t\t\t\tclasses=\"mb-2 flex-grow-1\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"d-block d-xl-none\">\n\t\t\t\t\t\t<BtnTabGroup\n\t\t\t\t\t\t\ttabs={tabs}\n\t\t\t\t\t\t\tselectedTab={selectedTab}\n\t\t\t\t\t\t\tonTabSelect={setSelectedTab}\n\t\t\t\t\t\t\tclasses=\"w-100 mb-2 btn-group-sm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isLoaded(ttData) && !BUNDLE_ENV.IS_SSR ? (\n\t\t\t\t<>\n\t\t\t\t\t<h6 className=\"opacity-75 text-capitalize\">{I18N_TALENTS}</h6>\n\t\t\t\t\t<div className=\"talents-wrap pt-1\">\n\t\t\t\t\t\t{ttData.timetable[selectedTab.code].characterAscensions.map(asc => (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"mb-3 ps-2 ms-1 d-flex align-items-center\" key={asc.itemCode}>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\t\t\t\tsrc={getItemIconLargeSrc(asc.itemCode)}\n\t\t\t\t\t\t\t\t\t\t\tclasses=\"me-3 vertical-align-middle\"\n\t\t\t\t\t\t\t\t\t\t\tbadgeTopStart={\n\t\t\t\t\t\t\t\t\t\t\t\t~favTalMaterialCodes.indexOf(asc.itemCode) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">{HEART}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tddComponent={\n\t\t\t\t\t\t\t\t\t\t\t\t<OtherItemCard\n\t\t\t\t\t\t\t\t\t\t\t\t\titem={mustBeDefined(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tttData.items.find(i => i.code === asc.itemCode),\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\trelated={ttData.maps}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex flex-wrap align-self-center pt-2\">\n\t\t\t\t\t\t\t\t\t\t{asc.characterCodes.map(c => (\n\t\t\t\t\t\t\t\t\t\t\t<CharacterAvatar\n\t\t\t\t\t\t\t\t\t\t\t\tkey={c}\n\t\t\t\t\t\t\t\t\t\t\t\tcode={c}\n\t\t\t\t\t\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\t\t\t\t\t\tclasses={`small-avatar mb-2 me-2 ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t~favCharCodes.indexOf(c) ? 'order-1' : 'order-2'\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\tbadgeTopStart={\n\t\t\t\t\t\t\t\t\t\t\t\t\t~favCharCodes.indexOf(c) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">{HEART}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<h6 class=\"opacity-75 text-capitalize\">{I18N_WEAPONS}</h6>\n\t\t\t\t\t<div className=\"ps-2 ms-1\">\n\t\t\t\t\t\t{ttData.timetable[selectedTab.code].weaponMaterialCodes.map(code => (\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tkey={code}\n\t\t\t\t\t\t\t\tsrc={getItemIconSrc(code)}\n\t\t\t\t\t\t\t\tclasses=\"small-avatar me-3 with-padding\"\n\t\t\t\t\t\t\t\tbadgeTopStart={\n\t\t\t\t\t\t\t\t\t~favWeapPrimMatCodes.indexOf(code) ? (\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">{HEART}</span>\n\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tddComponent={\n\t\t\t\t\t\t\t\t\t<OtherItemCard\n\t\t\t\t\t\t\t\t\t\titem={mustBeDefined(ttData.items.find(i => i.code === code))}\n\t\t\t\t\t\t\t\t\t\trelated={ttData.maps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Spinner />\n\t\t\t)}\n\t\t\t<div className=\"text-muted small text-center px-2 mx-1 py-3\">{I18N_WHY_ADD_TO_FAVS_TIP}</div>\n\t\t</div>\n\t)\n}\n","import { GI_ServerRegionCode } from '#src/../../lib/genshin'\nimport { SimpleSelect } from '#src/components/select'\nimport { I18N_ASIA, I18N_EUROPE, I18N_NORH_AMERICA } from '#src/i18n/i18n'\nimport { useLocalStorage } from '#src/utils/hooks'\nimport { SK_DEFAULT_SELECTED_REGION_CODE, SK_SELECTED_REGION_CODE } from '#src/utils/local-storage-keys'\nimport { useCallback, useMemo } from 'preact/hooks'\n\ntype Opt = { title: string; code: GI_ServerRegionCode }\nconst europeOpt: Opt = { title: I18N_EUROPE, code: 'europe' }\nconst options: Opt[] = [\n\teuropeOpt,\n\t{ title: I18N_ASIA, code: 'asia' },\n\t{ title: I18N_NORH_AMERICA, code: 'north-america' },\n]\nexport function RegionSwitch({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst [selectedRegionCode, setSelectedRegionCode] = useLocalStorage<GI_ServerRegionCode>(\n\t\tSK_SELECTED_REGION_CODE,\n\t\tSK_DEFAULT_SELECTED_REGION_CODE,\n\t)\n\tconst selectedOption = useMemo(\n\t\t() => options.find(o => o.code === selectedRegionCode) || europeOpt,\n\t\t[selectedRegionCode],\n\t)\n\tconst onOptSelectLocal = useCallback(o => setSelectedRegionCode(o.code), [setSelectedRegionCode])\n\treturn (\n\t\t<SimpleSelect options={options} selectedOption={selectedOption} onOptionSelect={onOptSelectLocal} />\n\t)\n}\n","import { getRegionTime, GI_ServerRegionCode } from '#lib/genshin'\nimport { I18N_MS_TO_HM_WORDS } from '#src/i18n/i18n'\nimport { useForceUpdate, useLocalStorage, useVisibleTicker } from '#src/utils/hooks'\nimport { SK_DEFAULT_SELECTED_REGION_CODE, SK_SELECTED_REGION_CODE } from '#src/utils/local-storage-keys'\nimport { BULLET, ELLIPSIS } from '#src/utils/typography'\n\nexport function TimeUntilDayReset({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst [selectedRegionCode] = useLocalStorage<GI_ServerRegionCode>(\n\t\tSK_SELECTED_REGION_CODE,\n\t\tSK_DEFAULT_SELECTED_REGION_CODE,\n\t)\n\tconst { resetIn } = getRegionTime(selectedRegionCode)\n\tconst forceUpdate = useForceUpdate()\n\tuseVisibleTicker(() => {\n\t\tforceUpdate()\n\t}, 60 * 1000)\n\treturn (\n\t\t<div className={`time-until-day-reset ${classes}`}>\n\t\t\t{BUNDLE_ENV.IS_SSR ? ELLIPSIS : I18N_MS_TO_HM_WORDS(resetIn)}\n\t\t\t<span className=\"animation-time-glow ps-1\">{BULLET}</span>\n\t\t</div>\n\t)\n}\n","import { useMemo, useState } from 'preact/hooks'\n\nimport { arrOrItemToArr } from '#src/../../lib/utils/collections'\nimport { useBuildWithDelayedLocs } from '#src/api'\nimport { getAllRelated } from '#src/api/utils'\nimport { CentredSpinner, Spinner } from '#src/components/spinners'\nimport { BtnTabGroup, Tabs, useSelectable } from '#src/components/tabs'\nimport { FavoriteCharacters } from '#src/containers/character-picker/favorite-characters'\nimport { ItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport {\n\tI18N_ART_STATS_PRIORITY,\n\tI18N_ARTIFACTS,\n\tI18N_ASC_MATERIALS,\n\tI18N_FULL_BUILD_INFO,\n\tI18N_MORE_ON_BUILDS_PAGE,\n\tI18N_STAT_NAME,\n\tI18N_SUBSTATS_PRIORITY,\n\tI18N_TALENT_NAME,\n\tI18N_TALENTS_PRIORITY,\n\tI18N_CHOOSE_FROM_FAV,\n} from '#src/i18n/i18n'\nimport { A } from '#src/routes/router'\nimport { getArtifactTypeIconSrc } from '#src/utils/artifacts'\nimport { isLoaded } from '#src/utils/hooks'\nimport { getItemIconSrc } from '#src/utils/items'\nimport {\n\tBuildRoleOrDummy,\n\tCIRCLET_GOBLET_SANDS,\n\tDUMMY_ROLES,\n\tgenArtifactAdvice,\n\tgenArtMainStatDetail,\n\tgenSimpleList,\n\tgetRoleData,\n\tmakeRoleTitle,\n} from './common'\n\nimport './character-build-preview.scss'\nimport { OtherItemCard } from '#src/containers/item-cards/dd-cards'\n\nfunction CharacterBuildPreview({ characterCode }: { characterCode: string }): JSX.Element {\n\tconst [build, isUpdating] = useBuildWithDelayedLocs(characterCode)\n\tconst displayingCharacterCode = isLoaded(build) ? build.character.code : characterCode\n\tconst roleTabs: BuildRoleOrDummy[] = isLoaded(build) ? build.character.roles : DUMMY_ROLES\n\tconst [selectedRoleTab, setSelectedRoleTab] = useSelectable(roleTabs, [displayingCharacterCode])\n\n\tconst artifactsListBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return []\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\tif (!role) return []\n\t\tconst listTimit = 1\n\t\treturn (\n\t\t\t<ol>\n\t\t\t\t{role.artifacts.sets.map((set, i) => {\n\t\t\t\t\tif (i > listTimit) return\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={i} className=\"pt-1\">\n\t\t\t\t\t\t\t{genArtifactAdvice(set.arts, build, false)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t\t{role.artifacts.sets.length > listTimit ? (\n\t\t\t\t\t<li className=\"pt-1\">\n\t\t\t\t\t\t<A className=\"link-secondary text-muted small\" href={`/builds/` + characterCode}>\n\t\t\t\t\t\t\t{I18N_MORE_ON_BUILDS_PAGE}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</li>\n\t\t\t\t) : null}\n\t\t\t</ol>\n\t\t)\n\t}, [characterCode, build, selectedRoleTab])\n\n\tconst artifactMainStatsBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return null\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<ul className=\"mb-1 list-unstyled ms-1 pt-1 ps-1 small\">\n\t\t\t\t{CIRCLET_GOBLET_SANDS.map(ac => (\n\t\t\t\t\t<li className=\"my-1 ms-1\">\n\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\tsrc={getArtifactTypeIconSrc(ac)}\n\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\tclasses=\"small-avatar with-padding align-middle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{genArtMainStatDetail(role, ac, true)}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t)\n\t}, [build, selectedRoleTab])\n\tconst artifactSubStatsBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return null\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<ol className=\"mb-1 pt-2 small\">\n\t\t\t\t{role.subStats.advices.map(advice => {\n\t\t\t\t\treturn <li>{genSimpleList(advice.codes.map(I18N_STAT_NAME))}</li>\n\t\t\t\t})}\n\t\t\t</ol>\n\t\t)\n\t}, [build, selectedRoleTab])\n\n\tconst talentsBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return null\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ol className=\"small\">\n\t\t\t\t\t{role.talents.advices.map(advice => {\n\t\t\t\t\t\treturn <li>{arrOrItemToArr(advice).map(I18N_TALENT_NAME)}</li>\n\t\t\t\t\t})}\n\t\t\t\t</ol>\n\t\t\t</>\n\t\t)\n\t}, [build, selectedRoleTab])\n\n\tconst materialsBlock = useMemo(() => {\n\t\t//todo только главные\n\t\tif (!isLoaded(build)) return null\n\t\tconst materials = getAllRelated(build.maps.items, build.character.materialCodes)\n\t\treturn (\n\t\t\t<div className=\"d-flex justify-content-between flex-wrap px-2\">\n\t\t\t\t{materials.map(m => (\n\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\tclasses=\"mb-2 mx-1 small-avatar with-padding flex-shrink-0\"\n\t\t\t\t\t\tsrc={getItemIconSrc(m.code)}\n\t\t\t\t\t\tddComponent={<OtherItemCard item={m} related={build.maps} />}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t)\n\t}, [build])\n\tif (!isLoaded(build)) return <Spinner />\n\treturn (\n\t\t<div className=\"character-build-preview position-relative\">\n\t\t\t{/* <div className=\"d-none d-xl-block\">\n\t\t\t\t<CharacterPortrait src={getCharacterPortraitSrc(characterCode)} classes=\"w-100\" />\n\t\t\t</div>\n\t\t\t<div className=\"d-xl-none\">\n\t\t\t\t<CharacterPortrait\n\t\t\t\t\tsrc={getCharacterSilhouetteSrc(characterCode)}\n\t\t\t\t\tclasses=\"w-75 character-portrait-mobile\"\n\t\t\t\t/>\n\t\t\t</div> */}\n\t\t\t{isUpdating ? <CentredSpinner /> : null}\n\t\t\t<div className={isUpdating ? 'opacity-50 pe-none' : ''}>\n\t\t\t\t<div className=\"d-none d-xl-flex \">\n\t\t\t\t\t<h5 className=\"py-2 m-0 me-2 d-block \">{build.character.name}</h5>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\ttabs={roleTabs}\n\t\t\t\t\t\ttitleFunc={makeRoleTitle}\n\t\t\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\t\t\tclasses=\"mb-2 flex-grow-1\"\n\t\t\t\t\t\tkey={displayingCharacterCode}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"d-flex d-xl-none align-items-center\">\n\t\t\t\t\t<h5 className=\"mb-0 pt-2 me-2\">{build.character.name}</h5>\n\t\t\t\t\t<BtnTabGroup\n\t\t\t\t\t\ttabs={roleTabs}\n\t\t\t\t\t\ttitleFunc={makeRoleTitle}\n\t\t\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\t\t\tclasses=\"w-100 mt-3 mb-2 btn-group-sm\"\n\t\t\t\t\t\tkey={displayingCharacterCode}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row small gy-2\">\n\t\t\t\t\t<div className=\"col-lg-4 col-12\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_ARTIFACTS}</h6>\n\t\t\t\t\t\t<div>{artifactsListBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-4 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_ART_STATS_PRIORITY}</h6>\n\t\t\t\t\t\t<div>{artifactMainStatsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-4 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_SUBSTATS_PRIORITY}</h6>\n\t\t\t\t\t\t<div>{artifactSubStatsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-4 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_TALENTS_PRIORITY}</h6>\n\t\t\t\t\t\t<div>{talentsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-8 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_ASC_MATERIALS}</h6>\n\t\t\t\t\t\t<div>{materialsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t\t<A\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"btn btn-link btn-sm w-100\"\n\t\t\t\t\t\t\thref={`/builds/` + characterCode}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{I18N_FULL_BUILD_INFO}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* TODO */}\n\t\t\t\t\t{/* <div className=\"col-6\">\n\t\t\t\t\t\t<A type=\"button\" className=\"btn btn-link btn-sm w-100\">\n\t\t\t\t\t\t\t{I18N_CHAR_LORE}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</div> */}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\nexport function BuildsPreviewsWrap({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst [selectedCharacterCode, setSelectedCharacterCode] = useState<string | undefined>(undefined)\n\treturn (\n\t\t<div className={`character-build-preview ${classes}`}>\n\t\t\t<FavoriteCharacters\n\t\t\t\tonCharacterSelect={setSelectedCharacterCode}\n\t\t\t\tshoudSelectFirst={!selectedCharacterCode}\n\t\t\t\tselectedCharacterCode={selectedCharacterCode}\n\t\t\t\tnavigateToCharacter={false}\n\t\t\t\tblockLabel={I18N_CHOOSE_FROM_FAV}\n\t\t\t\tclasses=\"mb-2\"\n\t\t\t/>\n\t\t\t{selectedCharacterCode ? (\n\t\t\t\t<CharacterBuildPreview characterCode={selectedCharacterCode} />\n\t\t\t) : (\n\t\t\t\t<Spinner />\n\t\t\t)}\n\t\t</div>\n\t)\n}\n","import { AlchemyCalculator } from '#src/containers/alchemy-calculator'\nimport { FarmToday } from '#src/containers/farm-today'\nimport { RegionSwitch } from '#src/containers/region-switch'\nimport { TimeUntilDayReset } from '#src/containers/time-until-day-reset'\nimport {\n\tI18N_ALCHEMY_CALC,\n\tI18N_BUILDS,\n\tI18N_DASHBOARD,\n\tI18N_REGION,\n\tI18N_UNTIL_DAY_RESET,\n\tI18N_WHAT_TO_FARM,\n} from '#src/i18n/i18n'\nimport { BuildsPreviewsWrap } from '#src/modules/builds/character-build-preview'\n\nfunction Fieldset({ children, legend, classes = '' }) {\n\treturn (\n\t\t<fieldset className={`my-2 ${classes}`}>\n\t\t\t<legend className=\"opacity-75 mb-2\">{legend}</legend>\n\t\t\t{children}\n\t\t</fieldset>\n\t)\n}\nexport function FrontPage(): JSX.Element {\n\treturn (\n\t\t<div className=\"dashboard container \">\n\t\t\t<h1 className=\"my-1 letter-spacing-1\">{I18N_DASHBOARD}</h1>\n\t\t\t<div className=\"row\">\n\t\t\t\t<Fieldset legend={I18N_REGION} classes=\"col-lg-3 col-12\">\n\t\t\t\t\t<RegionSwitch />\n\t\t\t\t</Fieldset>\n\t\t\t\t<Fieldset legend={I18N_UNTIL_DAY_RESET} classes=\"col-lg-3 col-12\">\n\t\t\t\t\t<TimeUntilDayReset classes=\"fs-4\" />\n\t\t\t\t</Fieldset>\n\t\t\t\t<Fieldset legend={I18N_ALCHEMY_CALC} classes=\"col-lg-6 col-12 \">\n\t\t\t\t\t<AlchemyCalculator />\n\t\t\t\t</Fieldset>\n\t\t\t</div>\n\t\t\t<div className=\"row\">\n\t\t\t\t<Fieldset classes=\"col-lg-6 col-12\" legend={I18N_WHAT_TO_FARM}>\n\t\t\t\t\t<FarmToday />\n\t\t\t\t</Fieldset>\n\t\t\t\t<Fieldset classes=\"col-lg-6 col-12\" legend={I18N_BUILDS}>\n\t\t\t\t\t<BuildsPreviewsWrap />\n\t\t\t\t</Fieldset>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { PageWrap } from './components/page-wrap'\nimport { Footer } from './containers/footer'\nimport { Header } from './containers/header'\nimport { BuildsPage_BuildDetail, BuildsPage_CharSelect } from './pages/builds'\nimport { EquipmentPage } from './pages/equipment'\nimport { FrontPage } from './pages/front-page'\nimport { paths } from './routes/paths'\nimport { route, useRouter } from './routes/router'\n\nimport './App.scss'\nimport './animations.scss'\n\nconst routes = [\n\troute(paths.front, FrontPage),\n\troute(paths.builds, BuildsPage_CharSelect),\n\troute(paths.buildCharacters, BuildsPage_BuildDetail),\n\troute(paths.equipment, EquipmentPage),\n]\n\nexport function App(): JSX.Element {\n\tconst page = useRouter(routes)\n\treturn (\n\t\t<div class=\"d-flex flex-column app-container\">\n\t\t\t<Header />\n\t\t\t<main>\n\t\t\t\t<PageWrap>{page}</PageWrap>\n\t\t\t</main>\n\t\t\t<Footer />\n\t\t</div>\n\t)\n}\n","import { useEffect } from 'preact/hooks'\n\nimport { useBuildWithDelayedLocs } from '#src/api'\nimport { Spinner } from '#src/components/spinners'\nimport { CharacterPicker } from '#src/containers/character-picker/character-picker'\nimport { FavoriteCharacters } from '#src/containers/character-picker/favorite-characters'\nimport {\n\tI18N_BASED_ON_GIHT,\n\tI18N_BUILD_RECS_FOR,\n\tI18N_CHAR_BUILD_RECS,\n\tI18N_SELECT_CHAR_ABOVE,\n} from '#src/i18n/i18n'\nimport { CharacterBuildDetailed } from '#src/modules/builds/character-build-detailed'\nimport { isLoaded } from '#src/utils/hooks'\n\nexport function BuildsPage_CharSelect(): JSX.Element {\n\treturn (\n\t\t<div className=\"builds container\">\n\t\t\t<h1 className=\"my-1 letter-spacing-1\">{I18N_CHAR_BUILD_RECS}</h1>\n\t\t\t<h5 className=\"mt-2 mb-3 opacity-75\">{I18N_SELECT_CHAR_ABOVE}</h5>\n\t\t\t<FavoriteCharacters navigateToCharacter={true} classes=\"mb-2\" />\n\t\t\t<CharacterPicker />\n\t\t</div>\n\t)\n}\nexport function BuildsPage_BuildDetail({ code }: { code: string }): JSX.Element {\n\tconst [build, isUpdating] = useBuildWithDelayedLocs(code)\n\tuseEffect(() => {\n\t\twindow.scrollTo(0, 0)\n\t}, [])\n\n\tif (!isLoaded(build)) return <Spinner />\n\treturn (\n\t\t<div className=\"builds container\">\n\t\t\t<h1 className={`my-1 letter-spacing-1 ${BUNDLE_ENV.LANG === 'en' ? 'text-capitalize' : ''}`}>\n\t\t\t\t<span className=\"d-none d-xl-inline\">{build.character.name}</span> {I18N_BUILD_RECS_FOR}\n\t\t\t</h1>\n\t\t\t<FavoriteCharacters navigateToCharacter={true} selectedCharacterCode={code} />\n\t\t\t<CharacterBuildDetailed build={build} isUpdating={isUpdating} />\n\t\t\t<div className=\"col-lg-9 offset-lg-3 col-12\">\n\t\t\t\t<a\n\t\t\t\t\thref=\"https://docs.google.com/spreadsheets/d/1gNxZ2xab1J6o1TuNVWMeLOZ7TPOqrsf3SshP5DLvKzI/pubhtml#\"\n\t\t\t\t\tclassName=\"fs-6 d-block my-3 text-center text-muted small\"\n\t\t\t\t>\n\t\t\t\t\t{I18N_BASED_ON_GIHT}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { Equipment } from '#src/modules/equipment/equipment'\n\nexport function EquipmentPage() {\n\treturn <Equipment />\n}\n","if (process.env.NODE_ENV === 'development') {\n\trequire('preact/debug')\n}\n\n// должно быть одним из первых\nimport '#src/errors/catch'\n\nimport { render } from 'preact'\nimport { renderToString } from 'preact-render-to-string'\n\nimport { App } from './App'\n\nexport const renderPage = BUNDLE_ENV.IS_SSR\n\t? html =>\n\t\t\thtml.replace(\n\t\t\t\t/(<div class=\"app\">)/,\n\t\t\t\t(_, div) => div + renderToString(<App />, null, { pretty: false }),\n\t\t\t)\n\t: render(<App />, document.querySelector('body .app') as Element)\n"],"names":["inProgress","n","l","u","t","o","r","f","e","c","s","a","h","parentNode","removeChild","v","i","arguments","length","children","call","defaultProps","y","type","props","key","ref","__k","__","__b","__e","__d","__c","__h","constructor","__v","vnode","d","_","this","context","k","indexOf","b","base","m","push","g","__r","debounceRendering","sort","some","__P","j","__n","ownerSVGElement","z","w","p","A","Array","isArray","x","P","N","M","appendChild","nextSibling","insertBefore","$","setProperty","test","H","style","cssText","replace","toLowerCase","slice","addEventListener","T","I","removeEventListener","setAttribute","removeAttribute","event","contextType","value","__E","prototype","render","O","sub","state","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","L","diffed","localName","nodeType","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","name","__html","innerHTML","C","checked","current","unmount","componentWillUnmount","S","firstChild","D","Consumer","Provider","splice","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","bind","resolve","setTimeout","__H","F","shift","clearTimeout","cancelAnimationFrame","requestAnimationFrame","filter","__source","__self","ContextProvider","Portal","_this","container","_container","_temp","_vnode","child","before","comparer","shouldUpdate","nextProps","updateRef","shallowDiffers","Memoed","displayName","isReactComponent","_forwarded","mustBeDefined","val","undefined","Error","mustBeNever","values","staticNever","clamp","min","max","promiseNever","isPromise","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","definition","Object","defineProperty","enumerable","get","chunkId","all","keys","reduce","promises","miniCssF","obj","prop","hasOwnProperty","url","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","timeout","nc","src","onScriptComplete","prev","onerror","onload","doneFns","fn","target","head","Symbol","toStringTag","installedChunks","installedChunkData","promise","reject","error","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","id","chunkLoadingGlobal","self","sendNewItem","level","rollbarBody","body","JSON","stringify","environment","code_version","platform","location","href","client","javascript","browser","navigator","userAgent","fetch","method","headers","json","resp","err","logErrorExt","anyError","silent","console","class_","trace","frames","exception","class","sendError","stack","catch","logError","window","filename","lineno","colno","reason","String","shallow","pretty","renderRootComponent","shallowHighOrder","_dirty","_nextState","Function","toString","match","E","sortAttributes","R","U","W","allAttributes","for","q","attributeHook","xml","V","voidElements","Z","B","G","J","K","Q","X","Y","join","substring","PageWrap","className","shallowRender","LINK_DISCORD_INVITE","I18N_LANG_NAMES","en","ru","I18N_LANG_NAME","I18N_ALCHEMY_CALC","I18N_BUILDS","I18N_WEEKDAYS","I18N_WEAPONS","I18N_ARTIFACTS","I18N_ART_STATS_PRIORITY","I18N_SUBSTATS_PRIORITY","I18N_TALENTS_PRIORITY","I18N_ASC_MATERIALS","I18N_BACK","I18N_NOTES","artTypeNamesRU","flower","plume","sands","goblet","circlet","I18N_ART_TYPE","code","statNamesRu","def","dmg","atk","hp","em","er","healing","I18N_STAT_NAME","talentTypesNamesRU","attack","skill","burst","I18N_TALENT_NAME","I18N_CONJUCTIONS","or","and","I18N_REPORT_BUG_GUIDE","I18N_PIECE_BONUS","I18N_PIECES_BONUS","I18N_MAP_CODES_NAME","teyvat","enkanomiya","I18N_REPORT_BUG","weaponTypeNamesRU","claymore","sword","catalyst","polearm","bow","weaponObtainSourceNamesRU","wishes","events","forging","fishing","chests","quests","puzzles","investigation","playstation","I18N_WEAPON_OBTAIN_SOURCE_NAME","I18N_ART_GROUP_NAME","I18N_MS_TO_HM_WORDS","duration","minutes","Math","floor","hours","pluralizeRU","pluralizeHours","pluralizeMinutes","w0","w1","w3","arrShallowEqual","arrGetAfter","arr","item","direction","index","arrOrItemToArr","BS_BreakpointsCodes","BS_BreakpointsMap","xs","sm","md","lg","xl","xxl","BS_getCurrBreakpoint","screenWidth","find","PENDING","isLoaded","useFetch","loadFunc","args","controller","prevArgs","foceUpdate","useForceUpdate","abort","ac","AbortController","res","signal","finally","useClickAway","callback","handleClick","HTMLElement","contains","useWindowSize","windowSize","setWindowSize","width","innerWidth","height","innerHeight","breakpoint","handleResize","initialValue","setValueInner","curRecord","localStorage","getItem","parse","ex","setValueAndSave","setItem","dispatchEvent","CustomEvent","detail","onStorage","log","setValue","useVisibleTicker","interval","isVisible","setIsVisible","visibilityState","onVisibilityChange","onPageHide","onPageShow","useWindowVisibility","callbackInner","Date","now","modalsEl","ReportBugModal","onClickAway","setMessage","isInvalid","setIsInvalid","onMessageChange","querySelector","modalRef","tryToSendMessage","msg","alert","onClick","placeholder","rows","onInput","Footer","isReportBugModalVisible","setIsReportBugModalVisible","onRepBugBtnClick","closeRepBugModal","charactersShortList","ART_GROUP_CODES","paths","front","builds","buildCharacters","map","equipment","matchPath","path","rem","part","matched","withoutPrefix","variants","variant","prefix","startsWith","URL_LANG_PREFIX","makeUrlLangPrefix","findRoutedComponent","routes","route","comp","pathSearchHash","pathname","search","hash","lang","isOnRoute","makeLocationHrefForLang","curPrefix","newUrl","assign","innerRef","GlobeIcon","classes","viewBox","fill","xmlns","Nav","isNavExpanded","isExpanded","setIsExpanded","ddRef","closeDd","openDd","isOnBuildsPages","role","isActiveLang","Header","setIsNavExpanded","GI_MAP_CODES","GI_ROTATION_WEEKDAY_CODES","GI_ARTIFACT_GROUP_CODES","_GI_STAT_PERCENT","_GI_STAT_DMG_PEFIXES","GI_REGION_TIMEZONE_OFFSET","concat","europe","asia","getRegionTime","regionCode","offsetHours","lastResetDate","setHours","getHours","weekdayMonSun","weekday","getUTCDay","setUTCHours","nextResetDate","setDate","getDate","weekdayCode","resetIn","resetAt","locEnc_code2map","decodeLocations","encodedLocations","downsample","parseInt","locs","mapCode","len3","decodeLocNum","str","maps","attr","Map","getAllRelated","codes","getLang","apiGetJSONFile","_map","func","apiMaterialsTimetable","useBuildWithDelayedLocs","characterCode","build","isUpdating","prevDataRef","sig","useFetchWithPrev","buildIsLoaded","fullInfo","locsInfo","items","applyItemsLocationsImmut","enemies","applyFullInfoLocationsImmut","locItems","resItems","locations","Spinner","CentredSpinner","artifactTypes","imgSrc","getArtifactTypeIconSrc","artifactTypeCode","at","isGroup","getArtifactIconSrc","artifactCode","getAllArtifacts","artsMap","getAllOrNone","BlockHeader","SimpleSelect","options","selectedOption","onOptionSelect","size","handleChange","onChange","disabled","selected","hidden","title","tabTitleFromName","Tabs","tabs","titleFunc","selectedTab","onTabSelect","preventDefault","BtnTabGroup","visibleTabsLength","tabsGrouped","useSelectable","tabCodes","setTabCodes","argsInner","tab","setTab","calcPosForDd","parentRect","ddRect","isAbsolute","isCentered","shouldFitInScreen","tWidth","tHeight","scrollTopFix","scrollY","centredFix","top","left","layoutPositionX","layoutPositionY","layoutPosition","ItemDetailDdPortal","targetEl","contentKey","shouldScrollToTop","wrapRef","defClassName","arrowStyle","setArrowStyle","onResize","wrapEl","pos","getBoundingClientRect","offsetWidth","elTop","scrollTo","ItemDetailDdMobilePortal","SK_SELECTED_REGION_CODE","SK_DEFAULT_SELECTED_REGION_CODE","language","curOffset","getTimezoneOffset","guessCurrentRegion","SK_FAV_CHAR_CODES","SK_FAV_TALENT_MATERIAL_CODES","SK_FAV_WEAPON_PRIMARY_MATERIAL_CODES","DUMMY_ROLES","makeRoleTitle","isRecommended","CIRCLET_GOBLET_SANDS","getRoleData","selectedCode","character","roles","genArtMainStatDetail","itemCode","isShort","genSimpleList","mainStats","genNotes","notes","notesToJSX","tips","processObj","tip","split","flat","ItemLabelWithDd","weapon","artifact","getCoverArtifactForSet","artsForDd","coverArt","rarity","genArtifactAdvice","set","isLast","artifactsForDd","artifacts","LabeledItemAvatar","avatarTopEndBadge","count","avatarClasses","ddComponent","ArtifactCard","related","ItemsListGroupWrap","arts","art","isLastInList","ItemsJoinerWrap","op","ToggleSmthFav","smthCode","storageKey","tipFav","tipNotFav","favSmthCodes","setFavSmthCodes","elRef","isHovered","node","handleMouseOver","handleMouseOut","isFav","toggleFav","ToggleCharFav","ToggleWeaponPrimaryMaterialFav","ToggleTalentMaterialFav","getItemIconSrc","weaponTypes","DEF_ANCESTRY_CODES","AlchemyCalculator","ancestryCodes","setValues","onValueChange","dataset","isFirst","ItemAvatar","endRoundClass","LazyTeyvatMap","RecommendedFor","charCodes","CharacterAvatar","isNoBg","CardDescMobileWrap","br","Card","titleEl","selectorEl","bodyEl","mapEl","DdContext","ddContext","addMarkerGroupsByDomains","markerGroups","domains","domain","loc","icon","markers","addMarkerGroupsByEnemies","enemy","MapWrap","itemData","isItemFavable","selectedSource","setSelectedSource","selectedMapCode","setMapCode","TeyvatMap","setSourceAndFixMapCode","sourceSelectEl","visibleMapCodes","isItemWeaponPrimaryMaterial","types","selectedArt","setSelectedArt","dataForMap","srcs","obtainSources","domainCodes","enemyCodes","sets","recommendedTo","WeaponCard","materials","materialCodes","materialOnMap","setMaterialOnMap","weaponCode","typeCode","subStat","passiveStat","OtherItemCard","isItemCharTalentMaterial","codesForCalc","reverse","unprefixTraveler","getCharacterAvatarLargeSrc","getCharacterSilhouetteSrc","badgeTopStart","badgeTopEnd","rarityClass","pointerClass","onClickLocal","codeToBadge","classesLocal","getRarityBorder","ItemLabel","ItemDd","ItemsDataContext","weapons","ddComp","coverArtifact","interactiveLabelClass","avatarTopStartBadge","CharacterPickerMobile","selectedElementCode","setSelectedElementCode","selectedWeaponTypeCode","setSelectedWeaponTypeCode","elementGroups","filteredElements","element","characters","elementCode","weaponTypeCode","el","selectElement","wt","selectWeaponType","wp","CharacterPickerDesktop","isLastRowClass","wType","CharacterPicker","shortListReversed","FavoriteCharacters","onCharacterSelect","shoudSelectFirst","navigateToCharacter","selectedCharacterCode","blockLabel","favCharCodes","charactersShortListCodes","characterCodes","charactersElems","CharacterPortrait","CharacterBuildDetailed","roleTabs","selectedRoleTab","setSelectedRoleTab","weaponListBlock","advices","advice","isInList","similar","refine","stacks","artifactsListBlock","artifactStatsAndSkillsBlock","subStats","talents","notesBlock","credits","materialsBlock","CharacterDetailDesktop","CharacterDetailMobile","cats","WeaponsList","selectedCatCode","setSelectedCatCode","Equipment","selectCat","selectedCat","FarmToday","ttData","selectedRegionCode","tomorrowCode","favTalMaterialCodes","favWeapPrimMatCodes","setSelectedTab","timetable","characterAscensions","asc","weaponMaterialCodes","europeOpt","RegionSwitch","setSelectedRegionCode","onOptSelectLocal","TimeUntilDayReset","CharacterBuildPreview","displayingCharacterCode","artifactMainStatsBlock","artifactSubStatsBlock","talentsBlock","BuildsPreviewsWrap","setSelectedCharacterCode","Fieldset","legend","page","handled","ctrlKey","altKey","shiftKey","metaKey","button","Element","closest","URL","origin","history","pushState","handleAnchorClick","onPopState","Comp","useRouter"],"sourceRoot":""}