<!DOCTYPE html>
<html lang="{{=it.lang}}">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<title>{{= it.title || 'Genshin Base' }}</title>
		<link rel="icon" href="/favicon.png" />
		{{?it.description}}<meta name="description" content="{{attr! it.description}}" />{{?}}
		{{~it.otherLangs :x }}<link rel="alternate" hreflang="{{=x.lang}}" href="{{=x.href}}" />{{~}}
		{{~it.files.css :path}}<link rel="stylesheet" href="{{=path}}" />{{~}}
		{{?it.isTgMiniApp}}<script src="https://telegram.org/js/telegram-web-app.js"></script>{{?}}
		{{~it.files.js :path}}<script defer src="{{=path}}"></script>{{~}}
		{{?it.isTgMiniApp}}
		<script>
			let langs = {{=JSON.stringify(it.langs)}}
			let langPrefix = l => l === 'en' ? '' : '/ru'
			let chooseLang = l => langs.includes(l) ? l : l === 'ua' ? 'ru' : 'en'
			let destLang = chooseLang(Telegram.WebApp.initDataUnsafe.user?.language_code)
			let newLoc = ''

			let sp = Telegram.WebApp.initDataUnsafe.start_param
			if (sp && sp.startsWith('_')) newLoc = langPrefix(destLang)+'/builds/'+sp.slice(1)

			if (!newLoc && destLang !== {{=JSON.stringify(it.lang)}}) newLoc = langPrefix(destLang)+'/'

			if (newLoc && location.pathname !== newLoc) location.href = newLoc
		</script>
		{{?}}
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-FDTQB09C8B"></script>
		<script>
			window.dataLayer = window.dataLayer || []
			function gtag() {
				dataLayer.push(arguments)
			}
			gtag('js', new Date())
			gtag('config', 'G-FDTQB09C8B')
		</script>
	</head>
	<body>
		<div class="app-wrap">
			<div class="app">{{= it.content }}</div>
			<div class="modals"></div>
		</div>
	</body>
</html>
