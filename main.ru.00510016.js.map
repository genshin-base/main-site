{"version":3,"file":"main.ru.00510016.js","mappings":"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","sources":["webpack://gi_builds/webpack/runtime/load script","webpack://gi_builds/./node_modules/preact/dist/preact.module.js","webpack://gi_builds/./node_modules/preact/hooks/dist/hooks.module.js","webpack://gi_builds/./node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","webpack://gi_builds/./node_modules/preact/compat/src/portals.js","webpack://gi_builds/./www/src/utils/preact-compat.tsx","webpack://gi_builds/./node_modules/preact/compat/src/memo.js","webpack://gi_builds/./node_modules/preact/compat/src/util.js","webpack://gi_builds/./lib/utils/values.js","webpack://gi_builds/webpack/bootstrap","webpack://gi_builds/webpack/runtime/define property getters","webpack://gi_builds/webpack/runtime/ensure chunk","webpack://gi_builds/webpack/runtime/get javascript chunk filename","webpack://gi_builds/webpack/runtime/get mini-css chunk filename","webpack://gi_builds/webpack/runtime/hasOwnProperty shorthand","webpack://gi_builds/webpack/runtime/make namespace object","webpack://gi_builds/webpack/runtime/publicPath","webpack://gi_builds/webpack/runtime/jsonp chunk loading","webpack://gi_builds/./www/src/errors/rollbar.ts","webpack://gi_builds/./www/src/errors/index.ts","webpack://gi_builds/./www/src/errors/catch.ts","webpack://gi_builds/./node_modules/preact-render-to-string/dist/index.mjs","webpack://gi_builds/./www/src/components/page-wrap.tsx","webpack://gi_builds/./www/src/utils/links.tsx","webpack://gi_builds/./www/src/utils/typography.tsx","webpack://gi_builds/./www/src/i18n/i18n.tsx","webpack://gi_builds/./lib/utils/collections.js","webpack://gi_builds/./www/src/utils/bootstrap.tsx","webpack://gi_builds/./www/src/utils/hooks.tsx","webpack://gi_builds/./www/src/modals/report-bug.tsx","webpack://gi_builds/./www/src/containers/footer.tsx","webpack://gi_builds/./www/src/api/generated.js","webpack://gi_builds/./www/src/routes/paths.js","webpack://gi_builds/./www/src/routes/router.tsx","webpack://gi_builds/./www/src/components/globe-icon.tsx","webpack://gi_builds/./www/src/components/nav.tsx","webpack://gi_builds/./www/src/containers/header.tsx","webpack://gi_builds/./www/src/i18n/about-site.tsx","webpack://gi_builds/./lib/genshin.js","webpack://gi_builds/./lib/utils/date.js","webpack://gi_builds/./www/src/api/utils.ts","webpack://gi_builds/./www/src/api/endpoints.ts","webpack://gi_builds/./www/src/api/index.ts","webpack://gi_builds/./www/src/components/spinners.tsx","webpack://gi_builds/./www/src/media/circlet.png","webpack://gi_builds/./www/src/media/flower.png","webpack://gi_builds/./www/src/media/goblet.png","webpack://gi_builds/./www/src/media/plume.png","webpack://gi_builds/./www/src/media/sands.png","webpack://gi_builds/./www/src/utils/artifacts.tsx","webpack://gi_builds/./www/src/components/block-header.tsx","webpack://gi_builds/./www/src/components/select.tsx","webpack://gi_builds/./www/src/components/tabs.tsx","webpack://gi_builds/./www/src/utils/calc-pos-for-dd.tsx","webpack://gi_builds/./www/src/containers/item-cards/item-detail-dd-portal.tsx","webpack://gi_builds/./www/src/components/tooltip.tsx","webpack://gi_builds/./www/src/utils/local-storage-keys.tsx","webpack://gi_builds/./www/src/modules/builds/common.tsx","webpack://gi_builds/./www/src/utils/items.tsx","webpack://gi_builds/./www/src/media/Icon_Bow.png","webpack://gi_builds/./www/src/media/Icon_Catalyst.png","webpack://gi_builds/./www/src/media/Icon_Claymore.png","webpack://gi_builds/./www/src/media/Icon_Polearm.png","webpack://gi_builds/./www/src/utils/weapons.tsx","webpack://gi_builds/./www/src/media/Icon_Sword.png","webpack://gi_builds/./www/src/containers/alchemy-calculator.tsx","webpack://gi_builds/./www/src/containers/item-cards/dd-cards.tsx","webpack://gi_builds/./www/src/utils/domains.tsx","webpack://gi_builds/./www/src/utils/enemies.tsx","webpack://gi_builds/./www/src/media/Element_Anemo.png","webpack://gi_builds/./www/src/media/Element_Cryo.png","webpack://gi_builds/./www/src/media/Element_Electro.png","webpack://gi_builds/./www/src/media/Element_Geo.png","webpack://gi_builds/./www/src/media/Element_Hydro.png","webpack://gi_builds/./www/src/utils/elements.tsx","webpack://gi_builds/./www/src/media/Element_Pyro.png","webpack://gi_builds/./www/src/utils/characters.tsx","webpack://gi_builds/./www/src/containers/item-cards/item-avatars.tsx","webpack://gi_builds/./www/src/containers/character-picker/mobile-character-picker.tsx","webpack://gi_builds/./www/src/containers/character-picker/character-picker.tsx","webpack://gi_builds/./www/src/containers/character-picker/favorite-characters.tsx","webpack://gi_builds/./www/src/components/characters.tsx","webpack://gi_builds/./www/src/modules/builds/character-build-detailed.tsx","webpack://gi_builds/./www/src/modules/equipment/weapons-list.tsx","webpack://gi_builds/./www/src/modules/equipment/equipment.tsx","webpack://gi_builds/./www/src/containers/farm-today.tsx","webpack://gi_builds/./www/src/containers/region-switch.tsx","webpack://gi_builds/./www/src/containers/time-until-day-reset.tsx","webpack://gi_builds/./www/src/modules/builds/character-build-preview.tsx","webpack://gi_builds/./www/src/pages/front-page.tsx","webpack://gi_builds/./www/src/App.tsx","webpack://gi_builds/./www/src/pages/builds.tsx","webpack://gi_builds/./www/src/pages/equipment.tsx","webpack://gi_builds/./www/src/pages/about.tsx","webpack://gi_builds/./www/src/index.tsx"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"gi_builds:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\t\tscript.type = \"module\";\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var n,l,u,i,t,o,r,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function h(n){var l=n.parentNode;l&&l.removeChild(n)}function v(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return y(l,f,t,o,null)}function y(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function p(){return{current:null}}function d(n){return n.children}function _(n,l){this.props=n,this.context=l}function k(n,l){if(null==l)return n.__?k(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?k(n):null}function b(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return b(n)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||r!==l.debounceRendering)&&((r=l.debounceRendering)||o)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=a({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?k(t):o,t.__h),z(u,t),t.__e!=o&&b(t)))})}function w(n,l,u,i,t,o,r,f,s,a){var h,v,p,_,b,m,g,w=i&&i.__k||c,A=w.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(_=u.__k[h]=null==(_=l[h])||\"boolean\"==typeof _?null:\"string\"==typeof _||\"number\"==typeof _||\"bigint\"==typeof _?y(null,_,null,null,_):Array.isArray(_)?y(d,{children:_},null,null,null):_.__b>0?y(_.type,_.props,_.key,null,_.__v):_)){if(_.__=u,_.__b=u.__b+1,null===(p=w[h])||p&&_.key==p.key&&_.type===p.type)w[h]=void 0;else for(v=0;v<A;v++){if((p=w[v])&&_.key==p.key&&_.type===p.type){w[v]=void 0;break}p=null}j(n,_,p=p||e,t,o,r,f,s,a),b=_.__e,(v=_.ref)&&p.ref!=v&&(g||(g=[]),p.ref&&g.push(p.ref,null,_),g.push(v,_.__c||b,_)),null!=b?(null==m&&(m=b),\"function\"==typeof _.type&&_.__k===p.__k?_.__d=s=x(_,s,n):s=P(n,_,p,w,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&p.__e==s&&s.parentNode!=n&&(s=k(p))}for(u.__e=m,h=A;h--;)null!=w[h]&&(\"function\"==typeof u.type&&null!=w[h].__e&&w[h].__e==u.__d&&(u.__d=k(i,h+1)),N(w[h],w[h]));if(g)for(h=0;h<g.length;h++)M(g[h],g[++h],g[++h])}function x(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?x(i,l,u):P(u,i,i,t,i.__e,l));return l}function A(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){A(n,l)}):l.push(n)),l}function P(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||s.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink[H:h]/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var s,h,v,y,p,k,b,m,g,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(s=l.__b)&&s(u);try{n:if(\"function\"==typeof P){if(m=u.props,g=(s=P.contextType)&&t[s.__c],x=s?g?g.props.value:s.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in P&&P.prototype.render?u.__c=h=new P(m,x):(u.__c=h=new _(m,x),h.constructor=P,h.render=O),g&&g.sub(h),h.props=m,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=P.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=a({},h.__s)),a(h.__s,P.getDerivedStateFromProps(m,h.__s))),y=h.props,p=h.state,v)null==P.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,x)||u.__v===i.__v){h.props=m,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,p,k)})}h.context=x,h.props=m,h.state=h.__s,(s=l.__r)&&s(u),h.__d=!1,h.__v=u,h.__P=n,s=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(t=a(a({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,p)),A=null!=s&&s.type===d&&null==s.key?s.props.children:s,w(n,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(s=l.diffed)&&s(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,f,c){var s,a,v,y=i.props,p=u.props,d=u.type,_=0;if(\"svg\"===d&&(o=!0),null!=r)for(;_<r.length;_++)if((s=r[_])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[_]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),a=(y=i.props||e).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},_=0;_<l.attributes.length;_++)y[l.attributes[_].name]=l.attributes[_].value;(v||a)&&(v&&(a&&v.__html==a.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(_=u.props.children,w(l,Array.isArray(_)?_:[_],u,i,t,o&&\"foreignObject\"!==d,r,f,r?r[0]:i.__k&&k(i,0),c),null!=r)for(_=r.length;_--;)null!=r[_]&&h(r[_]);c||(\"value\"in p&&void 0!==(_=p.value)&&(_!==l.value||\"progress\"===d&&!_||\"option\"===d&&_!==y.value)&&H(l,\"value\",_,y.value,!1),\"checked\"in p&&void 0!==(_=p.checked)&&_!==l.checked&&H(l,\"checked\",_,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,\"function\"!=typeof n.type);i||null==n.__e||h(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function S(u,i,t){var o,r,f;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,f=[],j(i,u=(!o&&t||i).__k=v(d,null,[u]),r||e,e,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,f,!o&&t?t:r?r.__e:i.firstChild,o),z(f,u)}function q(n,l){S(n,l,q)}function B(l,u,i){var t,o,r,f=a({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),y(l.type,f,t||l.key,o||l.ref,null)}function D(n,l){var u={__c:l=\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(m)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=c.slice,l={__e:function(n,l){for(var u,i,t;l=l.__;)if((u=l.__c)&&!u.__)try{if((i=u.constructor)&&null!=i.getDerivedStateFromError&&(u.setState(i.getDerivedStateFromError(n)),t=u.__d),null!=u.componentDidCatch&&(u.componentDidCatch(n),t=u.__d),t)return u.__E=u}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},_.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(a({},u),this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),m(this))},_.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),m(this))},_.prototype.render=d,t=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,f=0;export{S as render,q as hydrate,v as createElement,v as h,d as Fragment,p as createRef,i as isValidElement,_ as Component,B as cloneElement,D as createContext,A as toChildArray,l as options};\n//# sourceMappingURL=preact.module.js.map\n","import{options as n}from\"preact\";var t,u,r,o=0,i=[],c=n.__b,f=n.__r,e=n.diffed,a=n.__c,v=n.unmount;function m(t,r){n.__h&&n.__h(u,t,o||r),o=0;var i=u.__H||(u.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function l(n){return o=1,p(w,n)}function p(n,r,o){var i=m(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):w(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function y(r,o){var i=m(t++,3);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__H.__h.push(i))}function h(r,o){var i=m(t++,4);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__h.push(i))}function s(n){return o=5,d(function(){return{current:n}},[])}function _(n,t,u){o=6,h(function(){\"function\"==typeof n?n(t()):n&&(n.current=t())},null==u?u:u.concat(n))}function d(n,u){var r=m(t++,7);return k(r.__H,u)&&(r.__=n(),r.__H=u,r.__h=n),r.__}function A(n,t){return o=8,d(function(){return n},t)}function F(n){var r=u.context[n.__c],o=m(t++,9);return o.c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function T(t,u){n.useDebugValue&&n.useDebugValue(u?u(t):t)}function q(n){var r=m(t++,10),o=l();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function x(){for(var t;t=i.shift();)if(t.__P)try{t.__H.__h.forEach(g),t.__H.__h.forEach(j),t.__H.__h=[]}catch(u){t.__H.__h=[],n.__e(u,t.__v)}}n.__b=function(n){u=null,c&&c(n)},n.__r=function(n){f&&f(n),t=0;var r=(u=n.__c).__H;r&&(r.__h.forEach(g),r.__h.forEach(j),r.__h=[])},n.diffed=function(t){e&&e(t);var o=t.__c;o&&o.__H&&o.__H.__h.length&&(1!==i.push(o)&&r===n.requestAnimationFrame||((r=n.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),b&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);b&&(t=requestAnimationFrame(u))})(x)),u=null},n.__c=function(t,u){u.some(function(t){try{t.__h.forEach(g),t.__h=t.__h.filter(function(n){return!n.__||j(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],n.__e(r,t.__v)}}),a&&a(t,u)},n.unmount=function(t){v&&v(t);var u,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{g(n)}catch(n){u=n}}),u&&n.__e(u,r.__v))};var b=\"function\"==typeof requestAnimationFrame;function g(n){var t=u,r=n.__c;\"function\"==typeof r&&(n.__c=void 0,r()),u=t}function j(n){var t=u;n.__c=n.__(),u=t}function k(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function w(n,t){return\"function\"==typeof t?t(n):t}export{l as useState,p as useReducer,y as useEffect,h as useLayoutEffect,s as useRef,_ as useImperativeHandle,d as useMemo,A as useCallback,F as useContext,T as useDebugValue,q as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","import{options as r,Fragment as _}from\"preact\";export{Fragment}from\"preact\";var o=0;function e(_,e,n,t,f){var l,s,u={};for(s in e)\"ref\"==s?l=e[s]:u[s]=e[s];var a={type:_,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--o,__source:t,__self:f};if(\"function\"==typeof _&&(l=_.defaultProps))for(s in l)void 0===u[s]&&(u[s]=l[s]);return r.vnode&&r.vnode(a),a}export{e as jsx,e as jsxs,e as jsxDEV};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function() {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props._vnode) {\n\t\tif (!_this._temp) {\n\t\t\t_this._container = container;\n\n\t\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t\t_this._temp = {\n\t\t\t\tnodeType: 1,\n\t\t\t\tparentNode: container,\n\t\t\t\tchildNodes: [],\n\t\t\t\tappendChild(child) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tinsertBefore(child, before) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tremoveChild(child) {\n\t\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t\t_this._container.removeChild(child);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Render our wrapping element into temp.\n\t\trender(\n\t\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t\t_this._temp\n\t\t);\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._temp) {\n\t\t_this.componentWillUnmount();\n\t}\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { _vnode: vnode, _container: container });\n}\n","// direct imports to avoid kilobytes of side-effects from 'preact/compat'\n// normal imports (preact/compat/src/memo) do not work with webpack (it strictly follows 'exports' field in package.json)\nimport { memo as memo_ } from '#src/../../node_modules/preact/compat/src/memo'\nimport { createPortal as createPortal_ } from '#src/../../node_modules/preact/compat/src/portals'\n\nimport type { createPortal as createPortalOrig } from 'preact/compat'\nimport type { memo as memoOrig } from 'preact/compat'\n\nexport const createPortal = createPortal_ as typeof createPortalOrig\nexport const memo = memo_ as typeof memoOrig\n","import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","/**\n * @template T\n * @param {T|null} val\n * @returns {T}\n */\nexport function mustBeNotNull(val) {\n\tif (val === null) throw new Error('value is null, this should not happen')\n\treturn val\n}\n\n/**\n * @template T\n * @param {T|undefined} val\n * @returns {T}\n */\nexport function mustBeDefined(val) {\n\tif (val === undefined) throw new Error('value is undefined, this should not happen')\n\treturn val\n}\n\n/**\n * @template T\n * @param {T|undefined} x\n * @returns {x is T}\n */\nexport function isDefined(x) {\n\treturn x !== undefined\n}\n\n/**\n * @param {never[]} values\n * @returns {never}\n */\nexport function mustBeNever(...values) {\n\tthrow new Error('must not be reachable')\n}\n\n/**\n * @param {never[]} values\n * @returns {void}\n */\nexport function staticNever(...values) {\n\t//  ,  \n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function simpleDeepEqual(a, b) {\n\tif (Array.isArray(a) && Array.isArray(b)) {\n\t\tif (a.length !== b.length) return false\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif (!simpleDeepEqual(a[i], b[i])) return false\n\t\t}\n\t\treturn true\n\t}\n\tif (typeof a === 'object' && typeof b === 'object' && a !== null && b !== null) {\n\t\tif (Object.keys(a).length !== Object.keys(b).length) return false\n\t\tfor (const attr in a) {\n\t\t\tif (!simpleDeepEqual(a[attr], b[attr])) return false\n\t\t}\n\t\treturn true\n\t}\n\treturn a === b\n}\n\n/**\n * @template TVal\n * @template TKey\n * @param {Iterable<TVal>} items\n * @param {(item:TVal) => TKey} keyFunc\n * @returns {Map<TKey, TVal[]>}\n */\nexport function groupByToMap(items, keyFunc) {\n\tconst map = /**@type {Map<TKey, TVal[]>}*/ (new Map())\n\tfor (const item of items) {\n\t\tconst key = keyFunc(item)\n\t\tconst cur = map.get(key)\n\t\tif (cur) cur.push(item)\n\t\telse map.set(key, [item])\n\t}\n\treturn map\n}\n\n/**\n * @param {number} min\n * @param {number} val\n * @param {number} max\n * @returns {number}\n */\nexport function clamp(min, val, max) {\n\treturn val < min ? min : val > max ? max : val\n}\n\n/** @returns {Promise<never>} */\nexport function promiseNever() {\n\treturn new Promise(() => undefined)\n}\n\n/**\n * @class\n * @template T\n */\nexport function Deferred() {\n\t/** @type {Promise<T>} */\n\tthis.promise = new Promise((res, rej) => {\n\t\tthis.resolve = res\n\t\tthis.reject = rej\n\t})\n}\n\n/**\n * @template T\n * @param {T | Promise<T>} value\n * @returns {value is Promise<T>}\n */\nexport function isPromise(value) {\n\treturn typeof value === 'object' && value !== null && 'then' in value\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"async\" + \".ru.\" + \"f3abeae9\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgi_builds\"] = self[\"webpackChunkgi_builds\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","const ROLLBAR_TOKEN = 'f5661155727c4a9e9db4d770357a0bcf'\n\nexport function sendError(class_: string, message: string): Promise<void> {\n\treturn sendNewItem('error', undefined, {\n\t\ttrace: {\n\t\t\tframes: [],\n\t\t\texception: {\n\t\t\t\tclass: class_,\n\t\t\t\tmessage,\n\t\t\t\t// description: '',\n\t\t\t},\n\t\t},\n\t})\n}\n\nexport function sendMessage(msg: string): Promise<void> {\n\treturn sendNewItem('warning', 'msg:' + Date.now(), {\n\t\tmessage: {\n\t\t\tbody: msg,\n\t\t},\n\t})\n}\n\n/**\n * {@link https://explorer.docs.rollbar.com/#operation/create-item}\n */\nfunction sendNewItem(level, fingerprint, rollbarBody) {\n\tconst body = JSON.stringify({\n\t\tdata: {\n\t\t\tenvironment: process.env.NODE_ENV,\n\t\t\tbody: rollbarBody,\n\t\t\tlevel,\n\t\t\tcode_version: BUNDLE_ENV.COMMIT_HASH,\n\t\t\tplatform: 'browser',\n\t\t\tcontext: location.href,\n\t\t\tclient: {\n\t\t\t\tjavascript: {\n\t\t\t\t\tbrowser: navigator.userAgent,\n\t\t\t\t\t// code_version: ''\n\t\t\t\t\t// source_map_enabled: false,\n\t\t\t\t},\n\t\t\t},\n\t\t\tfingerprint,\n\t\t},\n\t})\n\tconst headers = {\n\t\t'X-Rollbar-Access-Token': ROLLBAR_TOKEN,\n\t\t'Content-Type': 'application/json',\n\t}\n\treturn fetch('https://api.rollbar.com/api/1/item/', { method: 'POST', body, headers })\n\t\t.then(r => r.json())\n\t\t.then(resp => {\n\t\t\tif (resp.err !== 0) throw new Error(`rollbar: ` + resp.message)\n\t\t})\n}\n","import { sendError } from './rollbar'\n\nexport function logErrorExt(message: string | null, anyError: unknown, silent: boolean): void {\n\tconst error = anyError ? (anyError instanceof Error ? anyError : new Error(anyError + '')) : null\n\n\tif (!silent) console.error(message, error)\n\n\tconst class_ = error ? error.constructor.name : 'Message'\n\tconst text = (message ? message + '\\n' : '') + (error ? error.stack : '')\n\tsendError(class_, text).catch(console.error)\n}\n\nexport function logError(error: unknown): void {\n\tlogErrorExt(null, error, false)\n}\n","import './rollbar'\n\nimport { logErrorExt } from './'\n\nif (!BUNDLE_ENV.IS_SSR) {\n\twindow.addEventListener('error', e => {\n\t\t//      ,  \n\t\tif (e.message === 'Script error.' && e.filename === '') return\n\t\t// e.message    \"Uncaught Error:\",     \n\t\tconst msg = `${e.message} in ${e.filename}:${e.lineno}:${e.colno}`\n\t\tlogErrorExt(msg, e.error, true)\n\t})\n\n\twindow.addEventListener('unhandledrejection', e => {\n\t\t//  Promise.reject(123)      ,  ;  \"reason\"   \n\t\tconst msg = 'Unhandled Rejection: ' + (e.reason?.message ? e.reason.message : e.reason + '')\n\t\tlogErrorExt(msg, e.reason, true)\n\t})\n}\n","import{options as e,Fragment as t}from\"preact\";var r=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,n=/[&<>\"]/;function o(e){var t=String(e);return n.test(t)?t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\"):t}var a=function(e,t){return String(e).replace(/(\\n+)/g,\"$1\"+(t||\"\\t\"))},i=function(e,t,r){return String(e).length>(t||40)||!r&&-1!==String(e).indexOf(\"\\n\")||-1!==String(e).indexOf(\"<\")},l={};function s(e){var t=\"\";for(var n in e){var o=e[n];null!=o&&\"\"!==o&&(t&&(t+=\" \"),t+=\"-\"==n[0]?n:l[n]||(l[n]=n.replace(/([A-Z])/g,\"-$1\").toLowerCase()),t+=\": \",t+=o,\"number\"==typeof o&&!1===r.test(n)&&(t+=\"px\"),t+=\";\")}return t||void 0}function f(e,t){for(var r in t)e[r]=t[r];return e}function u(e,t){return Array.isArray(t)?t.reduce(u,e):null!=t&&!1!==t&&e.push(t),e}var c={shallow:!0},p=[],_=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,v=/[\\s\\n\\\\/='\"\\0<>]/,d=function(){};m.render=m;var g=function(e,t){return m(e,t,c)},h=[];function m(t,r,n){r=r||{},n=n||{};var o=e.__s;e.__s=!0;var a=x(t,r,n);return e.__c&&e.__c(t,h),h.length=0,e.__s=o,a}function x(r,n,l,c,g,h){if(null==r||\"boolean\"==typeof r)return\"\";if(\"object\"!=typeof r)return o(r);var m=l.pretty,y=m&&\"string\"==typeof m?m:\"\\t\";if(Array.isArray(r)){for(var b=\"\",S=0;S<r.length;S++)m&&S>0&&(b+=\"\\n\"),b+=x(r[S],n,l,c,g,h);return b}var w,k=r.type,O=r.props,C=!1;if(\"function\"==typeof k){if(C=!0,!l.shallow||!c&&!1!==l.renderRootComponent){if(k===t){var A=[];return u(A,r.props.children),x(A,n,l,!1!==l.shallowHighOrder,g,h)}var H,j=r.__c={__v:r,context:n,props:r.props,setState:d,forceUpdate:d,__h:[]};if(e.__b&&e.__b(r),e.__r&&e.__r(r),k.prototype&&\"function\"==typeof k.prototype.render){var F=k.contextType,M=F&&n[F.__c],T=null!=F?M?M.props.value:F.__:n;(j=r.__c=new k(O,T)).__v=r,j._dirty=j.__d=!0,j.props=O,null==j.state&&(j.state={}),null==j._nextState&&null==j.__s&&(j._nextState=j.__s=j.state),j.context=T,k.getDerivedStateFromProps?j.state=f(f({},j.state),k.getDerivedStateFromProps(j.props,j.state)):j.componentWillMount&&(j.componentWillMount(),j.state=j._nextState!==j.state?j._nextState:j.__s!==j.state?j.__s:j.state),H=j.render(j.props,j.state,j.context)}else{var $=k.contextType,L=$&&n[$.__c];H=k.call(r.__c,O,null!=$?L?L.props.value:$.__:n)}return j.getChildContext&&(n=f(f({},n),j.getChildContext())),e.diffed&&e.diffed(r),x(H,n,l,!1!==l.shallowHighOrder,g,h)}k=(w=k).displayName||w!==Function&&w.name||function(e){var t=(Function.prototype.toString.call(e).match(/^\\s*function\\s+([^( ]+)/)||\"\")[1];if(!t){for(var r=-1,n=p.length;n--;)if(p[n]===e){r=n;break}r<0&&(r=p.push(e)-1),t=\"UnnamedComponent\"+r}return t}(w)}var E,D,N=\"<\"+k;if(O){var P=Object.keys(O);l&&!0===l.sortAttributes&&P.sort();for(var R=0;R<P.length;R++){var U=P[R],W=O[U];if(\"children\"!==U){if(!v.test(U)&&(l&&l.allAttributes||\"key\"!==U&&\"ref\"!==U&&\"__self\"!==U&&\"__source\"!==U)){if(\"defaultValue\"===U)U=\"value\";else if(\"className\"===U){if(void 0!==O.class)continue;U=\"class\"}else g&&U.match(/^xlink:?./)&&(U=U.toLowerCase().replace(/^xlink:?/,\"xlink:\"));if(\"htmlFor\"===U){if(O.for)continue;U=\"for\"}\"style\"===U&&W&&\"object\"==typeof W&&(W=s(W)),\"a\"===U[0]&&\"r\"===U[1]&&\"boolean\"==typeof W&&(W=String(W));var q=l.attributeHook&&l.attributeHook(U,W,n,l,C);if(q||\"\"===q)N+=q;else if(\"dangerouslySetInnerHTML\"===U)D=W&&W.__html;else if(\"textarea\"===k&&\"value\"===U)E=W;else if((W||0===W||\"\"===W)&&\"function\"!=typeof W){if(!(!0!==W&&\"\"!==W||(W=U,l&&l.xml))){N+=\" \"+U;continue}if(\"value\"===U){if(\"select\"===k){h=W;continue}\"option\"===k&&h==W&&(N+=\" selected\")}N+=\" \"+U+'=\"'+o(W)+'\"'}}}else E=W}}if(m){var z=N.replace(/\\n\\s*/,\" \");z===N||~z.indexOf(\"\\n\")?m&&~N.indexOf(\"\\n\")&&(N+=\"\\n\"):N=z}if(N+=\">\",v.test(k))throw new Error(k+\" is not a valid HTML tag name in \"+N);var I,V=_.test(k)||l.voidElements&&l.voidElements.test(k),Z=[];if(D)m&&i(D)&&(D=\"\\n\"+y+a(D,y)),N+=D;else if(null!=E&&u(I=[],E).length){for(var B=m&&~N.indexOf(\"\\n\"),G=!1,J=0;J<I.length;J++){var K=I[J];if(null!=K&&!1!==K){var Q=x(K,n,l,!0,\"svg\"===k||\"foreignObject\"!==k&&g,h);if(m&&!B&&i(Q)&&(B=!0),Q)if(m){var X=Q.length>0&&\"<\"!=Q[0];G&&X?Z[Z.length-1]+=Q:Z.push(Q),G=X}else Z.push(Q)}}if(m&&B)for(var Y=Z.length;Y--;)Z[Y]=\"\\n\"+y+a(Z[Y],y)}if(Z.length||D)N+=Z.join(\"\");else if(l&&l.xml)return N.substring(0,N.length-1)+\" />\";return!V||I||D?(m&&~N.indexOf(\"\\n\")&&(N+=\"\\n\"),N+=\"</\"+k+\">\"):N=N.replace(/>$/,\" />\"),N}m.shallowRender=g;export default m;export{m as render,m as renderToStaticMarkup,m as renderToString,g as shallowRender};\n//# sourceMappingURL=index.module.js.map\n","export function PageWrap({ children }): JSX.Element {\n\treturn <div className=\"page py-4\">{children}</div>\n}\n","export const LINK_DISCORD_INVITE = 'https://discord.gg/YapnrQ63bD'\r\nexport const LINK_KO_FI = 'https://ko-fi.com/genshinbase'\r\nexport const LINK_DONATION_ALERTS = 'https://www.donationalerts.com/r/genshinbase'\r\nexport const LINK_GOOGLE_FORM_ORDER_SITE = 'https://forms.gle/WtWCxStRy5kqDwFY8'\r\nexport const LINK_HELPER_TEAM_TABLE =\r\n\t'https://docs.google.com/spreadsheets/d/1gNxZ2xab1J6o1TuNVWMeLOZ7TPOqrsf3SshP5DLvKzI/pubhtml#'\r\nexport const LINK_HONEY_IMPACT = 'https://genshin.honeyhunterworld.com/'\r\nexport const LINK_GI_MAP = 'https://webstatic-sea.hoyolab.com/ys/app/interactive-map/index.html'\r\nexport const LINK_GI_WIKI = 'https://genshin-impact.fandom.com/wiki/Genshin_Impact_Wiki'\r\n","export const BULLET = ''\nexport const TIMES = ''\nexport const LEFT_POINTING = ''\nexport const RIGHT_POINTING = ''\nexport const ELLIPSIS = ''\nexport const STAR = ''\nexport const HEART = ''\nexport const HEART_EMPTY = ''\nexport const VARIATION_SELECTOR = '\\uFE0E'\nexport const NBSP = ''\n","import {\n\tGI_ArtifactGroupCode,\n\tGI_ArtifactTypeCode,\n\tGI_KnownStatBonusCode,\n\tGI_WeaponObtainSource,\n\tGI_WeaponTypeCode,\n\tMapCode,\n} from '#lib/genshin'\nimport { GI_TalentCode } from '#lib/parsing/helperteam/types'\nimport { LINK_DISCORD_INVITE } from '#src/utils/links'\nimport { NBSP } from '#src/utils/typography'\n\ntype Lang = 'en' | 'ru'\nexport const LANG = BUNDLE_ENV.LANG as Lang\nexport const I18N_LANG_NAMES: Record<Lang, string> = {\n\ten: 'English',\n\tru: '',\n}\nexport const I18N_LANG_NAME = I18N_LANG_NAMES[LANG]\nconst titlePostfix = '  Genshin Base'\nexport const I18N_PAGE_TITLE_POSTFIX = { en: titlePostfix, ru: titlePostfix }[LANG]\nexport const I18N_LOADING = { en: 'Loading', ru: '' }[LANG]\nexport const I18N_DASHBOARD = { en: 'Dashboard', ru: ' ' }[LANG]\nexport const I18N_REGION = { en: 'Region', ru: '' }[LANG]\nexport const I18N_UNTIL_DAY_RESET = { en: 'Until Day Reset', ru: '  ' }[LANG]\nexport const I18N_ALCHEMY_CALC = { en: 'Alchemy Calculator', ru: ' ' }[LANG]\nexport const I18N_WHAT_TO_FARM = { en: 'What to Farm', ru: ' ' }[LANG]\nexport const I18N_BUILDS = { en: 'Builds', ru: ' ' }[LANG]\nexport const I18N_ASIA = { en: 'Asia', ru: '' }[LANG]\nexport const I18N_NORH_AMERICA = { en: 'North America', ru: ' ' }[LANG]\nexport const I18N_EUROPE = { en: 'Europe', ru: '' }[LANG]\nexport const I18N_MINUTE = { en: 'minute', ru: '' }[LANG]\nexport const I18N_MINUTES = { en: 'minutes', ru: '' }[LANG]\nexport const I18N_MINUTES_3 = { en: 'minutes', ru: '' }[LANG]\nexport const I18N_TODAY = { en: 'today', ru: '' }[LANG]\nexport const I18N_WEEKDAYS = {\n\ten: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],\n\tru: ['', '', '', '', '', '', ''],\n}[LANG]\nexport const I18N_TOMORROW = { en: 'tomorrow', ru: '' }[LANG]\nexport const I18N_DUNGEONS = { en: 'Dungeons', ru: '' }[LANG]\nexport const I18N_TALENTS = { en: 'Talents', ru: '' }[LANG]\nexport const I18N_WEAPONS = { en: 'Weapons', ru: '' }[LANG]\nexport const I18N_WEAPON_STACKS_COUNT = {\n\ten: (stacks: number) => stacks + ' ' + pluralizeEN(stacks, 'stack', 'stacks'),\n\tru: (stacks: number) => stacks + ' ' + pluralizeRU(stacks, '', '', ''),\n}[LANG]\nexport const I18N_WEAPON_REFINE = {\n\ten: (refine: string) => 'R' + refine,\n\tru: (refine: string) => '' + refine,\n}[LANG]\nexport const I18N_WHY_ADD_TO_FAVS_TIP = {\n\ten: 'Add characters or items to your favorites to see them marked here.',\n\tru: '     ,    ',\n}[LANG]\nexport const I18N_FAV_CHARACTERS = { en: 'Favorite characters', ru: ' ' }[LANG]\n\nexport const I18N_FAV_TIPS = {\n\ten: (() => {\n\t\tconst add = (s: string) => `Add ${s} to favourites`\n\t\tconst remove = (s: string) => `Remove ${s} from favourites`\n\t\treturn {\n\t\t\tadd: { weapon: add('weapon'), character: add('character'), material: add('material') },\n\t\t\tremove: {\n\t\t\t\tweapon: remove('weapon'),\n\t\t\t\tcharacter: remove('character'),\n\t\t\t\tmaterial: remove('material'),\n\t\t\t},\n\t\t}\n\t})(),\n\tru: (() => {\n\t\tconst add = (s: string) => ` ${s}  `\n\t\tconst remove = (s: string) => ` ${s}  `\n\t\treturn {\n\t\t\tadd: { weapon: add(''), character: add(''), material: add('') },\n\t\t\tremove: {\n\t\t\t\tweapon: remove(''),\n\t\t\t\tcharacter: remove(''),\n\t\t\t\tmaterial: remove(''),\n\t\t\t},\n\t\t}\n\t})(),\n}[LANG]\nexport const I18N_CHOOSE_FROM_FAV = {\n\ten: 'Choose from favorite',\n\tru: '  ',\n}[LANG]\nexport const I18N_ARTIFACTS = { en: 'Artifacts', ru: '' }[LANG]\nexport const I18N_ART_STATS_PRIORITY = { en: 'Artifact stats priority', ru: ' ' }[LANG]\nexport const I18N_SUBSTATS_PRIORITY = { en: 'Substats priority', ru: ' ' }[LANG]\nexport const I18N_TALENTS_PRIORITY = { en: 'Talents Priority', ru: ' ' }[LANG]\nexport const I18N_ASC_MATERIALS = { en: 'Ascension materials', ru: ' ' }[LANG]\nexport const I18N_FULL_BUILD_INFO = { en: 'Full build info', ru: '   ' }[LANG]\nexport const I18N_CHAR_LORE = { en: 'Character lore', ru: ' ' }[LANG]\nexport const I18N_MORE_ON_BUILDS_PAGE = {\n\ten: 'more on build page',\n\tru: '   ',\n}[LANG]\nexport const I18N_BACK = { en: 'Back', ru: '' }[LANG]\nexport const I18N_NOTES = { en: 'Notes', ru: '' }[LANG]\n\nconst artTypeNamesRU: Record<GI_ArtifactTypeCode, string> = {\n\tflower: '',\n\tplume: '',\n\tsands: '',\n\tgoblet: '',\n\tcirclet: '',\n}\nexport const I18N_ART_TYPE = {\n\ten: (code: GI_ArtifactTypeCode) => code as string,\n\tru: (code: GI_ArtifactTypeCode) => artTypeNamesRU[code],\n}[LANG]\n\nconst statNamesRu: Record<GI_KnownStatBonusCode, string> = {\n\tdef: '',\n\t'def%': '% ',\n\tdmg: '',\n\t'dmg%': '% ',\n\tatk: '',\n\t'atk%': '% ',\n\thp: '',\n\t'hp%': '% ',\n\tem: ' ',\n\ter: ' ',\n\t'er%': '%  ',\n\thealing: '',\n\t'healing%': '% ',\n\t'crit-rate': ' . ',\n\t'crit-rate%': '% . ',\n\t'crit-dmg': '. ',\n\t'crit-dmg%': '% . ',\n\t'phys-dmg': '. ',\n\t'cryo-dmg': ' ',\n\t'geo-dmg': ' ',\n\t'anemo-dmg': ' ',\n\t'hydro-dmg': ' ',\n\t'electro-dmg': ' ',\n\t'pyro-dmg': ' ',\n\t'phys-dmg%': '% . ',\n\t'cryo-dmg%': '%  ',\n\t'geo-dmg%': '%  ',\n\t'anemo-dmg%': '%  ',\n\t'hydro-dmg%': '%  ',\n\t'electro-dmg%': '%  ',\n\t'pyro-dmg%': '%  ',\n}\nexport const I18N_STAT_NAME = {\n\ten: (code: string) => code.replace(/-/g, ' '),\n\tru: (code: string) => statNamesRu[code] ?? code,\n}[LANG]\n\ntype TalentTypeNames = Record<GI_TalentCode, string>\nconst talentTypesNamesRU: TalentTypeNames = {\n\tattack: ' ',\n\tskill: ' ',\n\tburst: ' ',\n}\nexport const I18N_TALENT_NAME = {\n\ten: (code: GI_TalentCode) => code,\n\tru: (code: GI_TalentCode) => talentTypesNamesRU[code],\n}[LANG]\n\ntype ConjuctionType = 'or' | 'and'\nexport const I18N_CONJUCTIONS: Record<ConjuctionType, string> = {\n\ten: { or: 'or', and: 'and' },\n\tru: { or: '', and: '' },\n}[LANG]\n\nexport const I18N_RECOMMENDED_FOR = { en: 'Recommended for', ru: ' ' }[LANG]\nexport const I18N_FOR_NOBODY = { en: 'Nobody', ru: '' }[LANG]\nexport const I18N_SOURCE = { en: 'Source', ru: '' }[LANG]\nexport const I18N_SCROLL_TO_ZOOM = { en: 'Scroll to zoom', ru: ' ' }[LANG]\nexport const I18N_PINCH_TO_ZOOM = { en: 'Pinch to zoom', ru: ' ' }[LANG]\nexport const I18N_CANCEL = { en: 'cancel', ru: '' }[LANG]\nexport const I18N_SUBMIT = { en: 'submit', ru: '' }[LANG]\nexport const I18N_SUBMIT_BUG_SUCCESS = { en: 'Message sent. Thank you', ru: ' . ' }[\n\tLANG\n]\nexport const I18N_SUBMIT_BUG_ERROR = {\n\ten: 'Error happened while sending message. Please disable adblock or try again later, or contact us on Discord',\n\tru: '   .      ,      ',\n}[LANG]\nexport const I18N_YOUR_MESSAGE_HERE = { en: 'Your message here', ru: ' ' }[LANG]\nexport const I18N_REPORT_BUG_GUIDE = {\n\ten: (\n\t\t<>\n\t\t\t<p>\n\t\t\t\tPlease describe your problem here. You can upload images on{' '}\n\t\t\t\t<a href=\"https://imgur.com/upload\" target=\"_blank\">\n\t\t\t\t\timgur.com\n\t\t\t\t</a>{' '}\n\t\t\t\tand use generated links to them in your message.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tOr message us on{' '}\n\t\t\t\t<a href={LINK_DISCORD_INVITE} target=\"_blank\">\n\t\t\t\t\tour Discord server\n\t\t\t\t</a>\n\t\t\t\t!\n\t\t\t</p>\n\t\t</>\n\t),\n\tru: (\n\t\t<>\n\t\t\t<p>\n\t\t\t\t,     .  ,     \n\t\t\t\t{' '}\n\t\t\t\t<a href=\"https://imgur.com/upload\" target=\"_blank\">\n\t\t\t\t\timgur.com\n\t\t\t\t</a>{' '}\n\t\t\t\t       .\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t   {' '}\n\t\t\t\t<a href={LINK_DISCORD_INVITE} target=\"_blank\">\n\t\t\t\t\ta   \n\t\t\t\t</a>\n\t\t\t\t!\n\t\t\t</p>\n\t\t</>\n\t),\n}[LANG]\nexport const I18N_ERROR = { en: 'Error, reload page', ru: ',  ' }[LANG]\nexport const I18N_PIECE_BONUS = {\n\ten: (n: number) => `${n} piece bonus`,\n\tru: (n: number) => ` ${n} `,\n}[LANG]\nexport const I18N_PIECES_BONUS = {\n\ten: (n: number) => `${n} pieces bonus`,\n\tru: (n: number) => ` ${n} `,\n}[LANG]\nexport const I18N_BASE_ATTACK = { en: 'Base attack', ru: ' ' }[LANG]\nexport const I18N_SECONDARY_STAT = { en: 'Secondary Stat', ru: ' ' }[LANG]\ntype MapCodeName = Record<MapCode, string>\nexport const I18N_MAP_CODES_NAME: MapCodeName = {\n\ten: { teyvat: 'Teyvat', enkanomiya: 'Enkanomiya' },\n\tru: { teyvat: '', enkanomiya: '' },\n}[LANG]\nexport const I18N_CHAR_BUILD_RECS = {\n\ten: 'Character builds recommendations',\n\tru: '  ',\n}[LANG]\nexport const I18N_SELECT_CHAR_ABOVE = { en: 'Select character above', ru: ' ' }[LANG]\nexport const I18N_BUILD_RECS_FOR = { en: 'build recommendations', ru: '' }[LANG]\nexport const I18N_RECOMMENDED_RU_ONLY = { en: '', ru: '' }[LANG]\nexport const I18N_ABOUT_SITE = { en: 'Site History', ru: ' ' }[LANG]\nexport const I18N_OUR_DISCORD = { en: 'Our Discord', ru: ' ' }[LANG]\nexport const I18N_CREATED_BY_US = {\n\ten: `Designed and coded by${NBSP}Absolute${NBSP}Evil${NBSP}Studio`,\n\tru: `   ${NBSP}${NBSP}${NBSP}`,\n}[LANG]\nexport const I18N_REPORT_BUG = {\n\ten: 'Report a bug',\n\tru: '  ',\n}[LANG]\nexport const I18N_SUPPORT_US = {\n\ten: 'Support Us',\n\tru: ' ',\n}[LANG]\nexport const I18N_SUPPORT_VIA_KO_FI = {\n\ten: 'Ko-fi, if you have PayPal',\n\tru: '-,     ',\n}[LANG]\nexport const I18N_SUPPORT_VIA_DON_ALERTS = {\n\ten: 'DonationAlerts',\n\tru: ' ',\n}[LANG]\nexport const I18N_ORDER_SITE_FROM_US = {\n\ten: 'Request a site from us',\n\tru: '   ',\n}[LANG]\nexport const I18N_NOT_AFFILIATED_WITH_MIHOYO = {\n\ten: 'We are not affiliated with MiHoYo',\n\tru: '    ',\n}[LANG]\nexport const I18N_C_MIHOYO = {\n\ten: 'Genshin Impact, items and characters illustrations are trademarks and copyrights of MiHoYo.',\n\tru: ' ,      ',\n}[LANG]\nexport const I18N_HELPER_TEAM_TABLE = {\n\ten: 'Helper Team',\n\tru: ' ',\n}[LANG]\nexport const I18N_HONEY_IMPACT = {\n\ten: 'Honey Impact',\n\tru: ' ',\n}[LANG]\nexport const I18N_GI_MAP = {\n\ten: 'Genshin Map',\n\tru: ' ',\n}[LANG]\nexport const I18N_GI_WIKI = {\n\ten: 'Genshin Wiki',\n\tru: ' ',\n}[LANG]\nexport const I18N_WE_USE_DATA_FROM = {\n\ten: 'We use data from',\n\tru: ' ',\n}[LANG]\nexport const I18N_COPYRIGHTS = {\n\ten: 'Copyrights',\n\tru: ' ',\n}[LANG]\nexport const I18N_SEE_NOTES = {\n\ten: 'see notes',\n\tru: '. ',\n}[LANG]\n\ntype WeaponTypeNames = Record<GI_WeaponTypeCode, string>\nconst weaponTypeNamesRU: WeaponTypeNames = {\n\tclaymore: ' ',\n\tsword: '',\n\tcatalyst: '',\n\tpolearm: '',\n\tbow: '',\n}\nexport const I18N_WEAPON_TYPE_NAME = {\n\ten: (code: GI_WeaponTypeCode) => code,\n\tru: (code: GI_WeaponTypeCode) => weaponTypeNamesRU[code],\n}[LANG]\n\ntype WeaponObtainSourceNames = Record<GI_WeaponObtainSource, string>\nconst weaponObtainSourceNamesRU: WeaponObtainSourceNames = {\n\twishes: '',\n\t'event-wishes': ' ',\n\tevents: '',\n\t'battle-pass': '-',\n\t'in-game-shop': ' ',\n\tforging: '',\n\tfishing: '',\n\t'npc-shop': ' ',\n\tchests: '',\n\tquests: '',\n\tpuzzles: '',\n\tinvestigation: ' ',\n\t'adventure-rank-10': '10  ',\n\tplaystation: '',\n}\nexport const I18N_WEAPON_OBTAIN_SOURCE_NAME = {\n\ten: (code: GI_WeaponObtainSource) => code.replace(/-/g, ' ').replace(/\\bnpc\\b/, 'NPC'),\n\tru: (code: GI_WeaponObtainSource) => weaponObtainSourceNamesRU[code],\n}[LANG]\nexport const I18N_OBTAINED_DURING_STORYLINE = {\n\ten: 'Obtained during storyline quests',\n\tru: '     ',\n}[LANG]\nexport const I18N_ART_GROUP_NAME: Record<GI_ArtifactGroupCode, string> = {\n\ten: { '18%-atk': 'ATK +18%', '20%-er': 'Energy Recharge +20%' },\n\tru: { '18%-atk': '  +18%', '20%-er': '  +20%' },\n}[LANG]\n\nconst pluralizeHours = {\n\ten: (hours: number) => pluralizeEN(hours, 'hour', 'hours'),\n\tru: (hours: number) => pluralizeRU(hours, '', '', ''),\n}[LANG]\nconst pluralizeMinutes = {\n\ten: (minutes: number) => pluralizeEN(minutes, 'minute', 'minutes'),\n\tru: (minutes: number) => pluralizeRU(minutes, '', '', ''),\n}[LANG]\nexport function I18N_MS_TO_HM_WORDS(duration: number): string {\n\tconst minutes = Math.floor((duration / (1000 * 60)) % 60)\n\tconst hours = Math.floor((duration / (1000 * 60 * 60)) % 24)\n\treturn `${hours} ${pluralizeHours(hours)} ${minutes} ${pluralizeMinutes(minutes)}`\n}\n\nfunction pluralizeEN(n: number, w0: string, w1: string): string {\n\tif (n < 0) n = -n\n\tconst d0 = n % 10\n\tconst d10 = n % 100\n\n\tif (d10 === 11 || d10 === 12 || d0 === 0 || (d0 >= 2 && d0 <= 9)) return w1\n\treturn w0\n}\nfunction pluralizeRU(n: number, w0: string, w1: string, w3: string): string {\n\tif (n < 0) n = -n\n\tif (n % 10 === 1 && n % 100 !== 11) {\n\t\treturn w0\n\t} else if (n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20)) {\n\t\treturn w1\n\t} else {\n\t\treturn w3\n\t}\n}\n","/**\n * @template T\n * @param {T[]} arr\n * @returns {T[]}\n */\nexport function arrSimpleUniq(arr) {\n\tfor (let i = arr.length - 1; i >= 0; i--) {\n\t\tconst index = arr.indexOf(arr[i], i + 1)\n\t\tif (index < i) arr.splice(i, 1)\n\t}\n\treturn arr\n}\n\n/**\n * @template T\n * @param {T[]} arr\n * @param {T[]} items\n * @returns {number}\n */\nexport function arrPushIfNew(arr, ...items) {\n\tfor (let i = 0; i < items.length; i++)\n\t\tif (!arr.includes(items[i])) {\n\t\t\tarr.push(items[i])\n\t\t}\n\treturn arr.length\n}\n\n/**\n * @template TKey\n * @template TVal\n * @param {Map<TKey, TVal[]>} map\n * @param {TKey} key\n * @param {TVal} val\n * @returns {TVal[]}\n */\nexport function mappedArrPush(map, key, val) {\n\tlet values = map.get(key)\n\tif (values) {\n\t\tvalues.push(val)\n\t} else {\n\t\tvalues = [val]\n\t\tmap.set(key, values)\n\t}\n\treturn values\n}\n\n/**\n * @template T\n * @param {T[]} arr\n * @param {(item:T) => boolean} func\n * @returns {T[][]}\n */\nexport function arrSplitFn(arr, func) {\n\tconst res = /**@type {T[][]}*/ ([[]])\n\tfor (let i = 0; i < arr.length; i++) {\n\t\tconst item = arr[i]\n\t\tif (func(item)) res.push([])\n\t\telse res[res.length - 1].push(item)\n\t}\n\treturn res\n}\n\n/**\n * @param {unknown[]} a\n * @param {unknown[]} b\n */\nexport function arrShallowEqualAsSets(a, b) {\n\tif (a.length !== b.length) return false\n\tfor (let i = 0; i < a.length; i++) if (!b.includes(a[i])) return false\n\treturn true\n}\n\n/**\n * @param {unknown[]} a\n * @param {unknown[]} b\n */\nexport function arrShallowEqual(a, b) {\n\tif (a.length !== b.length) return false\n\tfor (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return false\n\treturn true\n}\n\n/**\n * @template {string} TKey\n * @template TVal\n * @param {Record<TKey, TVal>} obj\n * @param {(a:[TKey,TVal], b:[TKey,TVal]) => number} sortFunc\n * @returns {Record<TKey, TVal>}\n */\nexport function sortObject(obj, sortFunc) {\n\tconst entries = /**@type {[TKey,TVal][]}*/ (Object.entries(obj)).sort(sortFunc)\n\tfor (const key in obj) delete obj[key]\n\tfor (const [key, val] of entries) obj[key] = val\n\treturn obj\n}\n/**\n * @template T\n * @param {T[]} arr\n * @param {T} item\n * @param {1|-1} [direction]\n * @returns {T}\n */\nexport function arrGetAfter(arr, item, direction = 1) {\n\tconst index = arr.indexOf(item)\n\treturn arr[(index + direction + arr.length) % arr.length]\n}\n\n/**\n * @template TKey\n * @template TVal\n * @param {Map<TKey, TVal>} map\n * @param {TKey} key\n * @param {() => TVal} defaultFunc\n * @returns {TVal}\n */\nexport function mapGetOrSet(map, key, defaultFunc) {\n\tlet value = map.get(key)\n\tif (value === undefined) {\n\t\tvalue = defaultFunc()\n\t\tmap.set(key, value)\n\t}\n\treturn value\n}\n\n/**\n * @template {string} TKey\n * @template TVal\n * @param {Partial<Record<TKey, TVal>>} obj\n * @param {TKey} key\n * @param {() => TVal} defaultFunc\n * @returns {TVal}\n */\nexport function objGetOrSet(obj, key, defaultFunc) {\n\tlet value = obj[key]\n\tif (value === undefined) {\n\t\tobj[key] = value = defaultFunc()\n\t}\n\treturn /**@type {TVal}*/ (value)\n}\n\n/**\n * @param {unknown} obj\n * @param {(item:unknown) => undefined|true|'skip-children'} func return true to abort iteration\n * @returns {boolean}\n */\nexport function objForEach(obj, func) {\n\tconst res = func(obj)\n\tif (res === 'skip-children') return false\n\tif (res) return true\n\n\tif (Array.isArray(obj)) {\n\t\tfor (const item of obj) if (objForEach(item, func)) return true\n\t} else if (typeof obj === 'object' && obj !== null) {\n\t\tfor (const attr in obj) if (objForEach(obj[attr], func)) return true\n\t}\n\treturn false\n}\n\n/**\n * @template T\n * @param {T | T[]} item\n * @returns {T[]}\n */\nexport function arrOrItemToArr(item) {\n\treturn Array.isArray(item) ? item : [item]\n}\n/**\n * @template T\n * @param {T[]} arr\n * @returns {T[] | T}\n */\nexport function arrItemIfSingle(arr) {\n\treturn arr.length === 1 ? arr[0] : arr\n}\n","export type BS_BreakpointCode = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl'\nexport const BS_BreakpointsCodes: BS_BreakpointCode[] = ['xs', 'sm', 'md', 'lg', 'xl', 'xxl']\n\nexport const BS_BreakpointsMap = { xs: 0, sm: 576, md: 768, lg: 992, xl: 1200, xxl: 1400 }\nexport function BS_getCurrBreakpoint(screenWidth: number): BS_BreakpointCode {\n\treturn (\n\t\t//todo  \n\t\t(Object.keys(BS_BreakpointsMap).find(k => screenWidth < BS_BreakpointsMap[k]) as BS_BreakpointCode) ||\n\t\t('xxl' as BS_BreakpointCode)\n\t)\n}\nexport function BS_isBreakpointLessThen(br: BS_BreakpointCode, targetBr: BS_BreakpointCode): boolean {\n\treturn BS_BreakpointsCodes.indexOf(br) <= BS_BreakpointsCodes.indexOf(targetBr)\n}\n","import { RefObject } from 'preact'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'preact/hooks'\n\nimport { arrShallowEqual } from '#lib/utils/collections'\nimport { isPromise } from '#lib/utils/values'\nimport { logError } from '#src/errors'\nimport { BS_BreakpointCode, BS_getCurrBreakpoint } from '#src/utils/bootstrap'\n\ntype Pending = { _type: 'pending' }\n\nexport const PENDING: Pending = {} as never\n\nexport type LoadingState<T> = T | Error | Pending\n\nexport function isLoaded<T>(value: LoadingState<T>): value is T {\n\treturn value !== PENDING && !(value instanceof Error)\n}\n\nexport function useFetch<T>(\n\tloadFunc: (abortSignal: AbortSignal) => T,\n\targs: unknown[],\n): LoadingState<Awaited<T>> {\n\tconst controller = useRef<AbortController | null>(null)\n\tconst prevArgs = useRef<unknown[] | null>(null)\n\tconst data = useRef<LoadingState<Awaited<T>>>(PENDING)\n\tconst foceUpdate = useForceUpdate()\n\n\tif (prevArgs.current === null || !arrShallowEqual(prevArgs.current, args)) {\n\t\tif (controller.current !== null) controller.current.abort()\n\t\tconst ac: AbortController | null = new AbortController()\n\t\tcontroller.current = ac\n\n\t\tconst res = loadFunc(ac.signal)\n\t\tif (isPromise(res)) {\n\t\t\tres.then(res => (data.current = res as Awaited<T>))\n\t\t\t\t.catch(err => (data.current = err))\n\t\t\t\t.finally(foceUpdate)\n\t\t\tdata.current = PENDING\n\t\t} else {\n\t\t\tdata.current = res as Awaited<T>\n\t\t}\n\n\t\tprevArgs.current = args\n\t}\n\n\t//    \n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (controller.current !== null) controller.current.abort()\n\t\t}\n\t}, [])\n\treturn data.current\n}\n\nexport function useFetchWithPrev<T>(\n\tloadFunc: (abortSignal: AbortSignal) => Promise<T> | T,\n\targs: unknown[],\n): [data: LoadingState<T>, isUpdating: boolean] {\n\tconst prevDataRef = useRef<LoadingState<T>>(PENDING)\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst data = useFetch(loadFunc, args)\n\tif (isLoaded(data)) prevDataRef.current = data\n\treturn [isLoaded(data) ? data : prevDataRef.current, data === PENDING]\n}\n\nexport const useToggle = (initial: boolean): [boolean, () => void] => {\n\tconst [flagState, setFlagState] = useState(initial)\n\treturn [flagState, useCallback(() => setFlagState(status => !status), [])]\n}\n\nexport const useClickAway = (ref: preact.RefObject<HTMLElement>, callback?: () => void): void => {\n\tconst handleClick = (e: MouseEvent | TouchEvent) => {\n\t\tif (ref.current && e.target instanceof HTMLElement && !ref.current.contains(e.target)) {\n\t\t\tcallback && callback()\n\t\t}\n\t}\n\tuseEffect(() => {\n\t\tdocument.addEventListener('mousedown', handleClick)\n\t\tdocument.addEventListener('touchstart', handleClick)\n\t\t// document.addEventListener('click', handleClick)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('mousedown', handleClick)\n\t\t\tdocument.removeEventListener('touchstart', handleClick)\n\t\t\t// document.removeEventListener('click', handleClick)\n\t\t}\n\t})\n}\n\ninterface WindowSize {\n\twidth: number | undefined\n\theight: number | undefined\n\tbreakpoint: BS_BreakpointCode\n}\nexport function useWindowSize(): WindowSize {\n\tconst [windowSize, setWindowSize] = useState<WindowSize>({\n\t\twidth: window?.innerWidth,\n\t\theight: window?.innerHeight,\n\t\tbreakpoint: BS_getCurrBreakpoint(window?.innerWidth || 0),\n\t})\n\tuseEffect(() => {\n\t\tfunction handleResize() {\n\t\t\tsetWindowSize({\n\t\t\t\twidth: window.innerWidth,\n\t\t\t\theight: window.innerHeight,\n\t\t\t\tbreakpoint: BS_getCurrBreakpoint(window.innerWidth),\n\t\t\t})\n\t\t}\n\t\twindow.addEventListener('resize', handleResize)\n\t\thandleResize()\n\t\treturn () => window.removeEventListener('resize', handleResize)\n\t}, [])\n\treturn windowSize\n}\n\ndeclare global {\n\tinterface WindowEventMap {\n\t\t'x-local-tab-storage': CustomEvent & { detail: { key: string } }\n\t}\n}\n\nexport function useLocalStorage<T>(key: string, initialValue: T): [T, (val: T) => unknown] {\n\tconst [value, setValueInner] = useState(() => {\n\t\ttry {\n\t\t\tconst curRecord = localStorage.getItem(key) //reading 'localStorage' from window may fail with SecurityError\n\t\t\treturn curRecord ? JSON.parse(curRecord) : initialValue //JSON parsing may fail\n\t\t} catch (ex) {\n\t\t\tlogError(ex)\n\t\t\treturn initialValue\n\t\t}\n\t})\n\n\tconst setValueAndSave = useCallback(\n\t\t(val: T) => {\n\t\t\ttry {\n\t\t\t\tlocalStorage.setItem(key, JSON.stringify(val)) //reading 'localStorage' from window may fail with SecurityError\n\t\t\t} catch (ex) {\n\t\t\t\t// \\_()_/\n\t\t\t}\n\t\t\tsetValueInner(val)\n\t\t\tdispatchEvent(new CustomEvent('x-local-tab-storage', { detail: { key } }))\n\t\t},\n\t\t[key],\n\t)\n\n\tuseEffect(() => {\n\t\tfunction onStorage(e: StorageEvent | { detail: { key: string } }) {\n\t\t\tconst affectedKey = 'detail' in e ? e.detail.key : e.key\n\t\t\tif (affectedKey === key) {\n\t\t\t\ttry {\n\t\t\t\t\tconst curRecord = localStorage.getItem(key) //reading 'localStorage' from window may fail with SecurityError\n\t\t\t\t\tif (curRecord) setValueInner(JSON.parse(curRecord)) //JSON parsing may fail\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tconsole.log(ex)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\taddEventListener('storage', onStorage)\n\t\taddEventListener('x-local-tab-storage', onStorage)\n\t\treturn () => {\n\t\t\tremoveEventListener('storage', onStorage)\n\t\t\tremoveEventListener('x-local-tab-storage', onStorage)\n\t\t}\n\t}, [key])\n\n\treturn [value, setValueAndSave]\n}\n\nexport type Migration<TIn, TOut> = (val: TIn) => TOut\ntype MigrationResult<T> = T extends Migration<infer _A, infer B> ? B : never\ntype Last<T> = T extends readonly [...infer _I, infer L] ? L : never\ntype VersionedValue<T> = { version: number; value: T }\n\nexport function useVersionedStorage<T extends readonly Migration<unknown, unknown>[]>({\n\tkey,\n\tversions,\n}: {\n\tkey: string\n\tversions: T\n}): [MigrationResult<Last<T>>, (val: MigrationResult<Last<T>>) => unknown] {\n\tconst [val, setVal] = useLocalStorage<VersionedValue<unknown> | null>(key, null)\n\n\tlet version = -1\n\tlet value = null as unknown\n\tif (val && typeof val === 'object' && 'version' in val) {\n\t\t;({ version, value } = val)\n\t}\n\tfor (let i = version + 1; i < versions.length; i++) {\n\t\tvalue = versions[i](value)\n\t\tversion = i\n\t}\n\n\tconst setValInner = useCallback(\n\t\t(value: MigrationResult<Last<T>>) => {\n\t\t\tsetVal({ version, value })\n\t\t},\n\t\t[setVal, version],\n\t)\n\treturn [value as MigrationResult<Last<T>>, setValInner]\n}\n\nexport function useHover<T extends Element>(): [RefObject<T>, boolean] {\n\tconst [value, setValue] = useState<boolean>(false)\n\tconst ref = useRef<T | null>(null)\n\tuseEffect(\n\t\t() => {\n\t\t\tconst node = ref.current\n\t\t\tif (!node) return\n\n\t\t\tconst handleMouseOver = () => setValue(true)\n\t\t\tconst handleMouseOut = () => setValue(false)\n\t\t\tnode.addEventListener('mouseover', handleMouseOver)\n\t\t\tnode.addEventListener('mouseout', handleMouseOut)\n\t\t\treturn () => {\n\t\t\t\tsetValue(false)\n\t\t\t\tnode.removeEventListener('mouseover', handleMouseOver)\n\t\t\t\tnode.removeEventListener('mouseout', handleMouseOut)\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[ref.current],\n\t)\n\treturn [ref, value]\n}\n\nexport const useWindowVisibility = () => {\n\tconst [isVisible, setIsVisible] = useState(\n\t\t// Focus for first render\n\t\tBUNDLE_ENV.IS_SSR ? true : document.visibilityState === 'visible',\n\t)\n\tuseEffect(() => {\n\t\tconst onVisibilityChange = () => setIsVisible(document.visibilityState === 'visible')\n\t\tconst onPageHide = () => setIsVisible(false)\n\t\tconst onPageShow = () => setIsVisible(true)\n\t\tdocument.addEventListener('visibilitychange', onVisibilityChange)\n\t\twindow.addEventListener('pagehide', onPageHide)\n\t\twindow.addEventListener('pageshow ', onPageShow)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('visibilitychange', onVisibilityChange)\n\t\t\twindow.removeEventListener('pagehide', onPageHide)\n\t\t\twindow.removeEventListener('pageshow ', onPageShow)\n\t\t}\n\t}, [])\n\treturn isVisible\n}\n/*\n * not used\n *\nexport function useInterval(callback: () => void, delay: number | null) {\n\tconst savedCallback = useRef(callback)\n\t// Remember the latest callback if it changes.\n\tuseLayoutEffect(() => {\n\t\tsavedCallback.current = callback\n\t}, [callback])\n\n\t// Set up the interval.\n\tuseEffect(() => {\n\t\t// Don't schedule if no delay is specified.\n\t\t// Note: 0 is a valid value for delay.\n\t\tif (!delay && delay !== 0) {\n\t\t\treturn\n\t\t}\n\n\t\tconst id = setInterval(() => savedCallback.current(), delay)\n\t\treturn () => clearInterval(id)\n\t}, [delay])\n}\n*/\nexport function useForceUpdate(): () => void {\n\tconst setValue = useState(0)[1]\n\treturn useRef(() => setValue(v => ~v)).current\n}\nexport function useVisibleTicker(callback: () => void, interval: number) {\n\tconst isVisible = useWindowVisibility()\n\n\tuseEffect(() => {\n\t\tif (!isVisible) return\n\t\tlet id\n\t\tfunction callbackInner() {\n\t\t\tcallback()\n\t\t\tid = setTimeout(callbackInner, interval - (Date.now() % interval) + 10)\n\t\t}\n\t\tcallbackInner()\n\t\treturn () => clearTimeout(id)\n\t\t//     \n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [interval, isVisible])\n}\nexport function useDocumentTitle(title: string, shouldRestoreOnUnmount = false) {\n\tconst defaultTitle = useRef(document.title).current\n\n\t// useEffect  :      \n\tuseMemo(() => {\n\t\tdocument.title = title\n\t}, [title])\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (shouldRestoreOnUnmount) {\n\t\t\t\tdocument.title = defaultTitle\n\t\t\t}\n\t\t}\n\t}, [shouldRestoreOnUnmount, defaultTitle])\n}\n","import { sendMessage } from '#src/errors/rollbar'\r\nimport {\r\n\tI18N_CANCEL,\r\n\tI18N_REPORT_BUG,\r\n\tI18N_REPORT_BUG_GUIDE,\r\n\tI18N_SUBMIT,\r\n\tI18N_SUBMIT_BUG_ERROR,\r\n\tI18N_SUBMIT_BUG_SUCCESS,\r\n\tI18N_YOUR_MESSAGE_HERE,\r\n} from '#src/i18n/i18n'\r\nimport { useClickAway } from '#src/utils/hooks'\r\nimport { createPortal } from '#src/utils/preact-compat'\r\nimport { useCallback, useRef, useState } from 'preact/hooks'\r\n\r\nlet modalsEl: Element | null = null\r\n\r\nexport const ReportBugModal = ({ onClickAway }: { onClickAway(): void }): JSX.Element => {\r\n\tconst [message, setMessage] = useState<string>('')\r\n\tconst [isInvalid, setIsInvalid] = useState<boolean>(false)\r\n\tconst onMessageChange = useCallback(\r\n\t\te => {\r\n\t\t\tsetMessage(e.target.value)\r\n\t\t\tisInvalid && setIsInvalid(false)\r\n\t\t},\r\n\t\t[setMessage, isInvalid, setIsInvalid],\r\n\t)\r\n\tmodalsEl ??= document.querySelector('.modals') as Element\r\n\tconst modalRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\r\n\tuseClickAway(modalRef, onClickAway)\r\n\tconst tryToSendMessage = useCallback(() => {\r\n\t\tif (!message.length) return setIsInvalid(true)\r\n\t\tsendMessage('message from bug report modal: ' + message)\r\n\t\t\t.then(() => alert(I18N_SUBMIT_BUG_SUCCESS))\r\n\t\t\t.catch(() => alert(I18N_SUBMIT_BUG_ERROR))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tonClickAway()\r\n\t\t\t})\r\n\t}, [message, onClickAway, setIsInvalid])\r\n\treturn createPortal(\r\n\t\t<>\r\n\t\t\t<div className=\"modal-backdrop show d-block\"></div>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"modal d-block\"\r\n\t\t\t\tid=\"exampleModal\"\r\n\t\t\t\ttab-index=\"-1\"\r\n\t\t\t\taria-labelledby=\"exampleModalLabel\"\r\n\t\t\t\taria-hidden=\"true\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"modal-dialog modal-dialog-scrollable\" ref={modalRef}>\r\n\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t<h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n\t\t\t\t\t\t\t\t{I18N_REPORT_BUG}\r\n\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn-close btn-sm\"\r\n\t\t\t\t\t\t\t\taria-label=\"Close\"\r\n\t\t\t\t\t\t\t\tonClick={onClickAway}\r\n\t\t\t\t\t\t\t></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t<div className=\"text-muted\">{I18N_REPORT_BUG_GUIDE}</div>\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tvalue={message}\r\n\t\t\t\t\t\t\t\tplaceholder={I18N_YOUR_MESSAGE_HERE}\r\n\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\tclassName={`w-100 bg-light border ${\r\n\t\t\t\t\t\t\t\t\tisInvalid ? 'border-2 border-danger' : 'border-light'\r\n\t\t\t\t\t\t\t\t} rounded`}\r\n\t\t\t\t\t\t\t\tonInput={onMessageChange}\r\n\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-link text-decoration-none text-capitalize\"\r\n\t\t\t\t\t\t\t\tonClick={onClickAway}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{I18N_CANCEL}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-primary text-capitalize\"\r\n\t\t\t\t\t\t\t\tonClick={tryToSendMessage}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{I18N_SUBMIT}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>,\r\n\t\tmodalsEl,\r\n\t)\r\n}\r\n","import {\n\tI18N_COPYRIGHTS,\n\tI18N_CREATED_BY_US,\n\tI18N_C_MIHOYO,\n\tI18N_GI_MAP,\n\tI18N_GI_WIKI,\n\tI18N_HELPER_TEAM_TABLE,\n\tI18N_HONEY_IMPACT,\n\tI18N_NOT_AFFILIATED_WITH_MIHOYO,\n\tI18N_ORDER_SITE_FROM_US,\n\tI18N_REPORT_BUG,\n\tI18N_WE_USE_DATA_FROM,\n} from '#src/i18n/i18n'\nimport { ReportBugModal } from '#src/modals/report-bug'\nimport {\n\tLINK_GI_MAP,\n\tLINK_GI_WIKI,\n\tLINK_GOOGLE_FORM_ORDER_SITE,\n\tLINK_HELPER_TEAM_TABLE,\n\tLINK_HONEY_IMPACT,\n} from '#src/utils/links'\nimport { useCallback, useState } from 'preact/hooks'\n\nexport function Footer() {\n\tconst [isReportBugModalVisible, setIsReportBugModalVisible] = useState<boolean>(false)\n\tconst onRepBugBtnClick = useCallback(() => {\n\t\tsetIsReportBugModalVisible(true)\n\t}, [setIsReportBugModalVisible])\n\tconst closeRepBugModal = useCallback(() => {\n\t\tsetIsReportBugModalVisible(false)\n\t}, [setIsReportBugModalVisible])\n\treturn (\n\t\t<footer className=\"mt-auto bg-dark\">\n\t\t\t<div className=\"container my-3 opacity-75\">\n\t\t\t\t<div className=\"row pt-3 gy-3\">\n\t\t\t\t\t<div className=\"col-12 col-md-3\">\n\t\t\t\t\t\t<h5>Genshin Base</h5>\n\t\t\t\t\t\t<p className=\"small\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\tclassName=\"link text-decoration-underline-dotted\"\n\t\t\t\t\t\t\t\tonClick={onRepBugBtnClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{I18N_REPORT_BUG}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{isReportBugModalVisible && <ReportBugModal onClickAway={closeRepBugModal} />}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"small\">{I18N_CREATED_BY_US}</p>\n\t\t\t\t\t\t<p className=\"small\">\n\t\t\t\t\t\t\t<a href={LINK_GOOGLE_FORM_ORDER_SITE} target=\"_blank\">\n\t\t\t\t\t\t\t\t{I18N_ORDER_SITE_FROM_US}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-12 col-md-4\">\n\t\t\t\t\t\t<div className=\"ps-md-3\">\n\t\t\t\t\t\t\t<h5>{I18N_WE_USE_DATA_FROM}</h5>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<a target=\"_blank\" href={LINK_HELPER_TEAM_TABLE} className=\"text-muted small\">\n\t\t\t\t\t\t\t\t\t{I18N_HELPER_TEAM_TABLE}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<a target=\"_blank\" href={LINK_HONEY_IMPACT} className=\"text-muted small\">\n\t\t\t\t\t\t\t\t\t{I18N_HONEY_IMPACT}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<a target=\"_blank\" href={LINK_GI_MAP} className=\"text-muted small\">\n\t\t\t\t\t\t\t\t\t{I18N_GI_MAP}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<a target=\"_blank\" href={LINK_GI_WIKI} className=\"text-muted small\">\n\t\t\t\t\t\t\t\t\t{I18N_GI_WIKI}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-12 col-md-4\">\n\t\t\t\t\t\t<div className=\"ps-md-3\">\n\t\t\t\t\t\t\t<h5>{I18N_COPYRIGHTS}</h5>\n\t\t\t\t\t\t\t<p className=\"small\">{I18N_C_MIHOYO}</p>\n\t\t\t\t\t\t\t<p className=\"small\">{I18N_NOT_AFFILIATED_WITH_MIHOYO}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</footer>\n\t)\n}\n","\nexport const GENERATED_DATA_HASH = \"773bcefe\"\n\n/** @type {import('#lib/parsing/combine').CharacterShortInfo[]} */\nexport const charactersShortList = [\n\t{\n\t\t\"code\": \"amber\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"barbara\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"beidou\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"bennett\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"chongyun\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"diluc\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"fischl\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"jean\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"kaeya\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"keqing\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"klee\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"lisa\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"mona\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"ningguang\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"noelle\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"qiqi\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"razor\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"sucrose\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"traveler-anemo\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"traveler-electro\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"traveler-geo\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"venti\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"xiangling\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"xingqiu\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"diona\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"tartaglia\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"xinyan\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"zhongli\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"albedo\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"ganyu\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"hu-tao\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"xiao\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"rosaria\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"eula\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"yanfei\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"kazuha\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"ayaka\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"sword\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"sayu\",\n\t\t\"elementCode\": \"anemo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"yoimiya\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"aloy\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"kokomi\",\n\t\t\"elementCode\": \"hydro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"kujou-sara\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"raiden-shogun\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"thoma\",\n\t\t\"elementCode\": \"pyro\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"gorou\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"bow\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"itto\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"claymore\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"shenhe\",\n\t\t\"elementCode\": \"cryo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 5\n\t},\n\t{\n\t\t\"code\": \"yun-jin\",\n\t\t\"elementCode\": \"geo\",\n\t\t\"weaponTypeCode\": \"polearm\",\n\t\t\"rarity\": 4\n\t},\n\t{\n\t\t\"code\": \"yae-miko\",\n\t\t\"elementCode\": \"electro\",\n\t\t\"weaponTypeCode\": \"catalyst\",\n\t\t\"rarity\": 5\n\t}\n]\n\n/** @type {import('#lib/parsing').ArtifcatSetGroupsCodes} */\nexport const ART_GROUP_CODES = {\n\t\"18%-atk\": [\n\t\t\"echoes-of-an-offering\",\n\t\t\"gladiators-finale\",\n\t\t\"shimenawas-reminiscence\",\n\t\t\"vermillion-hereafter\",\n\t\t\"brave-heart\",\n\t\t\"resolution-of-sojourner\"\n\t],\n\t\"20%-er\": [\n\t\t\"emblem-of-severed-fate\",\n\t\t\"scholar\",\n\t\t\"the-exile\"\n\t]\n}\n","import { charactersShortList } from '../api/generated.js'\n\nexport const paths = /** @type {const} */ ({\n\tfront: [''],\n\tbuilds: ['/builds'],\n\tbuildCharacters: ['/builds/', ['code', charactersShortList.map(x => x.code)]],\n\tequipment: ['/equipment'],\n\tabout: ['/about'],\n})\n\n/**\n * @param {import('./router').RoutePath} path\n * @param {string} url\n * @returns {Record<string, string> | null}\n */\nexport function matchPath(path, url) {\n\tif (path.length === 0) return null\n\tlet rem = url\n\tconst props = /**@type {Record<string, string>}*/ ({})\n\tfor (const part of path) {\n\t\tlet matched = true //true    variants\n\t\tif (typeof part === 'string') {\n\t\t\t;[rem, matched] = withoutPrefix(rem, part)\n\t\t} else {\n\t\t\tconst [name, variants] = part\n\t\t\tfor (const variant of variants) {\n\t\t\t\t;[rem, matched] = withoutPrefix(rem, variant)\n\t\t\t\tif (matched) {\n\t\t\t\t\tprops[name] = variant\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!matched) return null\n\t}\n\treturn !rem || rem === '/' ? props : null\n}\n\n/**\n * @param {string} prefix\n * @param {import('./router').RoutePath} path\n * @param {number} [fromIndex]\n * @returns {string[]}\n */\nexport function pathToStrings(prefix, path, fromIndex = 0) {\n\tif (path.length === 0) return []\n\tif (fromIndex >= path.length) return [prefix]\n\n\tconst part = path[fromIndex]\n\tif (typeof part === 'string') {\n\t\treturn pathToStrings(prefix + part, path, fromIndex + 1)\n\t} else {\n\t\tconst [, variants] = part\n\t\treturn variants.flatMap(x => pathToStrings(prefix + x, path, fromIndex + 1))\n\t}\n}\n\n/**\n * @param {string} url\n * @param {string} prefix\n * @returns {[string, boolean]}\n */\nfunction withoutPrefix(url, prefix) {\n\treturn url.startsWith(prefix) ? [url.slice(prefix.length), true] : [url, false]\n}\n","import { ComponentType, h, Ref } from 'preact'\nimport { useEffect, useState } from 'preact/hooks'\n\nimport { matchPath } from './paths'\n\nexport type RoutePath = readonly (string | readonly [name: string, variants: readonly string[]])[]\n\ntype Routes = [RoutePath, ComponentType][]\n\ntype SubRoute<T> = readonly [string, readonly T[]]\ntype EmptySubRoute = readonly [string, readonly []]\ntype PathProps<T extends RoutePath> = {\n\t[K in keyof T as T[K] extends EmptySubRoute\n\t\t? never\n\t\t: T[K] extends SubRoute<unknown>\n\t\t? T[K][0]\n\t\t: never]: T[K] extends SubRoute<infer A> ? A : never\n} & {\n\t[K in keyof T as T[K] extends EmptySubRoute ? T[K][0] : never]?: undefined\n}\n\nconst URL_LANG_PREFIX = makeUrlLangPrefix(BUNDLE_ENV.LANG)\n\nfunction findRoutedComponent(routes: Routes, url: string): [ComponentType, Record<string, string>] | null {\n\tfor (const [route, comp] of routes) {\n\t\tconst props = matchPath(route, url)\n\t\tif (props) return [comp, props]\n\t}\n\treturn null\n}\n\nfunction pathSearchHash(url: { pathname: string; search: string; hash: string }) {\n\treturn url.pathname + url.search + url.hash\n}\n\nfunction handleAnchorClick(e: MouseEvent, routes: Routes) {\n\tif (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey || e.button !== 0) return\n\n\tconst a = e.target instanceof Element && e.target.closest('a')\n\tif (a && a.href && (!a.target || a.target === '_self')) {\n\t\tconst url = new URL(a.href)\n\t\tif (url.origin === location.origin) {\n\t\t\tif (findRoutedComponent(routes, url.pathname)) {\n\t\t\t\tif (pathSearchHash(location) !== pathSearchHash(url))\n\t\t\t\t\thistory.pushState(null, '', pathSearchHash(url))\n\t\t\t\te.preventDefault()\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function useRouter(routes: Routes) {\n\tconst [, forceUpdate] = useState(0)\n\n\tuseEffect(() => {\n\t\tfunction onClick(e: MouseEvent) {\n\t\t\tconst handled = handleAnchorClick(e, routes)\n\t\t\tif (handled) forceUpdate(x => x + 1)\n\t\t}\n\t\tfunction onPopState(e: PopStateEvent) {\n\t\t\tforceUpdate(x => x + 1)\n\t\t}\n\t\taddEventListener('click', onClick)\n\t\taddEventListener('popstate', onPopState)\n\t\treturn () => {\n\t\t\tremoveEventListener('click', onClick)\n\t\t\tremoveEventListener('popstate', onPopState)\n\t\t}\n\t}, [routes])\n\n\tconst res = findRoutedComponent(routes, location.pathname)\n\tif (!res) return '404'\n\tconst [Comp, props] = res\n\treturn <Comp {...props} />\n}\n\nexport const route = <TPath extends RoutePath>(\n\tpath: TPath,\n\tcomp: ComponentType<PathProps<TPath>>,\n): [RoutePath, ComponentType] => [[URL_LANG_PREFIX, ...path], comp as ComponentType]\n\nfunction makeUrlLangPrefix(lang: string): string {\n\treturn lang === 'en' ? '' : '/ru'\n}\n\nexport function isOnRoute(path: RoutePath): boolean {\n\treturn matchPath([URL_LANG_PREFIX, ...path], location.pathname) !== null\n}\n\nexport function makeLocationHrefForLang(lang: string): string {\n\tconst url = location.pathname + location.search + location.hash\n\tconst curPrefix = URL_LANG_PREFIX\n\tconst newPrefix = makeUrlLangPrefix(lang)\n\tlet newUrl = newPrefix + (url.startsWith(curPrefix) ? url.slice(curPrefix.length) : url)\n\tif (newUrl === '') newUrl = '/'\n\treturn newUrl\n}\n\nexport function A(\n\tprops: JSX.HTMLAttributes<HTMLAnchorElement> & { ref?: Ref<typeof A>; innerRef?: Ref<HTMLAnchorElement> },\n): JSX.Element {\n\tprops = Object.assign({}, props)\n\t// @ts-ignore\n\tprops.ref = props.innerRef\n\tdelete props.innerRef\n\tif (props.href) props.href = URL_LANG_PREFIX + props.href\n\t//  JSX- - :\n\t//   <a {...props}/>   Object.assign({}, props)\n\treturn h('a', props as Parameters<typeof h>[1])\n}\n","export function GlobeIcon({ classes = '' }) {\n\treturn (\n\t\t<svg\n\t\t\tclass={classes}\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\td=\"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm2.8-2.6a7 7 0 0 0 4.2-5.9c-.8.5-1.9.8-3 1.1-.2 1.9-.6 3.5-1.2 4.8ZM9.2 5.6a7 7 0 0 0-4 4.6l1.2.8 1.6.5c0-2.3.5-4.4 1.2-6Zm.9 8.3c.2 1.5.5 2.7.9 3.7l.8 1.2.2.2.2-.2.8-1.2c.4-1 .7-2.2.9-3.7a20 20 0 0 1-3.8 0Zm-2-.3c.1 1.9.5 3.5 1 4.8a7 7 0 0 1-4-5.9c.7.5 1.8.8 3 1.1Zm5.9-1.7a17.8 17.8 0 0 1-4 0c0-2.2.4-4.2 1-5.5l.8-1.2.2-.2.2.2.8 1.2c.6 1.3 1 3.3 1 5.5Zm2-.4c0-2.3-.5-4.4-1.2-6a7 7 0 0 1 4 4.7l-1.2.8-1.6.5Z\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t/>\n\t\t</svg>\n\t)\n}\n","import { useCallback, useRef, useState } from 'preact/hooks'\n\nimport {\n\tI18N_ABOUT_SITE,\n\tI18N_BUILDS,\n\tI18N_LANG_NAME,\n\tI18N_LANG_NAMES,\n\tI18N_OUR_DISCORD,\n\tI18N_SUPPORT_US,\n\tI18N_SUPPORT_VIA_DON_ALERTS,\n\tI18N_SUPPORT_VIA_KO_FI,\n} from '#src/i18n/i18n'\nimport { paths } from '#src/routes/paths'\nimport { A, isOnRoute, makeLocationHrefForLang } from '#src/routes/router'\nimport { useClickAway } from '#src/utils/hooks'\nimport { VARIATION_SELECTOR } from '#src/utils/typography'\nimport { GlobeIcon } from './globe-icon'\nimport { LINK_DISCORD_INVITE, LINK_DONATION_ALERTS, LINK_KO_FI } from '#src/utils/links'\n\ntype Props = { isNavExpanded: boolean }\n\nexport function Nav({ isNavExpanded }: Props): JSX.Element {\n\tconst isPageActive = routs => routs.some(r => isOnRoute(r))\n\treturn (\n\t\t<div className={`collapse navbar-collapse ${isNavExpanded ? 'show' : ''}`}>\n\t\t\t<ul className=\"navbar-nav me-auto mb-2 mb-md-0\">\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<A\n\t\t\t\t\t\tclassName={`nav-link ${\n\t\t\t\t\t\t\tisPageActive([paths.builds, paths.buildCharacters]) ? ' active' : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\thref={paths.builds[0]}\n\t\t\t\t\t>\n\t\t\t\t\t\t{I18N_BUILDS}\n\t\t\t\t\t</A>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<A\n\t\t\t\t\t\tclassName={`nav-link ${isPageActive([paths.about]) ? ' active' : ''}`}\n\t\t\t\t\t\thref={paths.about[0]}\n\t\t\t\t\t>\n\t\t\t\t\t\t{I18N_ABOUT_SITE}\n\t\t\t\t\t</A>\n\t\t\t\t</li>\n\t\t\t\t<li className=\"nav-item\">\n\t\t\t\t\t<a className=\"nav-link\" target=\"_blank\" href={LINK_DISCORD_INVITE}>\n\t\t\t\t\t\t{I18N_OUR_DISCORD}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<ul className=\"navbar-nav mb-2 mb-md-0 float-md-end\">\n\t\t\t\t<DonationDd />\n\t\t\t\t<LangSelect />\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\nfunction LangSelect(): JSX.Element {\n\tconst [isExpanded, setIsExpanded] = useState(false)\n\tconst ddRef = useRef(null)\n\tconst closeDd = useCallback(() => isExpanded && setIsExpanded(false), [setIsExpanded, isExpanded])\n\tconst openDd = useCallback(() => !isExpanded && setIsExpanded(true), [setIsExpanded, isExpanded])\n\n\t// TODO   \n\tuseClickAway(ddRef, closeDd)\n\n\treturn (\n\t\t<li className=\"nav-item dropdown\">\n\t\t\t<a\n\t\t\t\tclassName={`nav-link dropdown-toggle ${isExpanded ? 'show' : ''}`}\n\t\t\t\tid=\"navbarDropdown\"\n\t\t\t\trole=\"button\"\n\t\t\t\tonClick={openDd}\n\t\t\t>\n\t\t\t\t<GlobeIcon />\n\t\t\t\t{VARIATION_SELECTOR} {I18N_LANG_NAME}\n\t\t\t</a>\n\t\t\t{/* todo -    dropdown-menu-end */}\n\t\t\t<ul className={`dropdown-menu ${isExpanded ? 'show' : ''}`} style={'right: 0'} ref={ddRef}>\n\t\t\t\t{/*     ,   ,\n\t\t\t\t\t\t      (    useMemo).\n\t\t\t\t\t\t        . */}\n\t\t\t\t{isExpanded &&\n\t\t\t\t\tBUNDLE_ENV.LANGS.map(lang => {\n\t\t\t\t\t\tconst langName = I18N_LANG_NAMES[lang]\n\t\t\t\t\t\tconst isActiveLang = langName === I18N_LANG_NAME\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li key={lang}>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName={`dropdown-item ${isActiveLang ? 'active' : ''}`}\n\t\t\t\t\t\t\t\t\thref={makeLocationHrefForLang(lang)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{I18N_LANG_NAMES[lang]}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t</ul>\n\t\t</li>\n\t)\n}\nfunction DonationDd(): JSX.Element {\n\tconst [isExpanded, setIsExpanded] = useState(false)\n\tconst ddRef = useRef(null)\n\tconst closeDd = useCallback(() => isExpanded && setIsExpanded(false), [setIsExpanded, isExpanded])\n\tconst openDd = useCallback(() => !isExpanded && setIsExpanded(true), [setIsExpanded, isExpanded])\n\n\t// TODO   \n\tuseClickAway(ddRef, closeDd)\n\n\treturn (\n\t\t<li className=\"nav-item dropdown\">\n\t\t\t<a\n\t\t\t\tclassName={`nav-link dropdown-toggle ${isExpanded ? 'show' : ''}`}\n\t\t\t\tid=\"navbarDropdown\"\n\t\t\t\trole=\"button\"\n\t\t\t\tonClick={openDd}\n\t\t\t>\n\t\t\t\t{I18N_SUPPORT_US}\n\t\t\t</a>\n\t\t\t<ul className={`dropdown-menu ${isExpanded ? 'show' : ''}`} style={'right: 0'} ref={ddRef}>\n\t\t\t\t{isExpanded ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a className={`dropdown-item `} href={LINK_KO_FI} target=\"_blank\">\n\t\t\t\t\t\t\t\t{I18N_SUPPORT_VIA_KO_FI}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a className={`dropdown-item `} href={LINK_DONATION_ALERTS} target=\"_blank\">\n\t\t\t\t\t\t\t\t{I18N_SUPPORT_VIA_DON_ALERTS}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</>\n\t\t\t\t) : null}\n\t\t\t</ul>\n\t\t</li>\n\t)\n}\n","import { A } from '#src/routes/router'\nimport { useState } from 'preact/hooks'\n\nimport { Nav } from '../components/nav'\n\nexport function Header() {\n\tconst [isNavExpanded, setIsNavExpanded] = useState(false)\n\t// TODO   \n\treturn (\n\t\t<header>\n\t\t\t<div className=\"navbar navbar-expand-md navbar-dark bg-primary\">\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<A className=\"navbar-brand\" href=\"/\">\n\t\t\t\t\t\tGenshin Base\n\t\t\t\t\t</A>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"navbar-toggler\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => setIsNavExpanded(!isNavExpanded)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<Nav isNavExpanded={isNavExpanded} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t)\n}\n","import { LINK_DISCORD_INVITE } from '#src/utils/links'\r\nimport { LANG } from './i18n'\r\n\r\nexport const I18N_ABOUT_SITE_EPIGRAPH = {\r\n\ten: { quote: 'A site to be hold!', footer: 'The head shrine maiden in charge of', cite: 'Grand Shrine' },\r\n\tru: { quote: ',  !', footer: ' ', cite: ' ' },\r\n}[LANG]\r\nexport const I18N_ABOUT_SITE_CONTENT = {\r\n\ten: (\r\n\t\t<>\r\n\t\t\t<p>\r\n\t\t\t\tThe Genshin Base is a site that contains only the necessary information about Genshin Impact.\r\n\t\t\t\tThe site is equally convenient to use both from a computer and from a phone.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tWe welcome any support. If you want to become a part of our team, arrange a collaboration or\r\n\t\t\t\tjust chat, we are waiting for you in our{' '}\r\n\t\t\t\t<a className=\"link\" target=\"_blank\" href={LINK_DISCORD_INVITE}>\r\n\t\t\t\t\tDiscord\r\n\t\t\t\t</a>\r\n\t\t\t\t.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tSurfing once again on the Internet in search of actual information about character builds, I\r\n\t\t\t\tfelt indignant. I spent a lot of time collecting information bit by bit from different places.\r\n\t\t\t\tBadly designed pictures with recommendations for leveling characters, the date of which was\r\n\t\t\t\talmost equal to the release date of the game, or complicated Google tables, funny articles\r\n\t\t\t\ttranslated by an electronic translator from copywriters for two pennies who have never seen\r\n\t\t\t\tthe game. Unable to endure it any longer, I called my few comrades together and announced: we\r\n\t\t\t\tare making a site on Genshin. We start today.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tA week passed and we started. First of all, we decided to make a page with builds. Based on\r\n\t\t\t\tone of the few usable tables, I came up with a universal character page design. It turned out\r\n\t\t\t\tthat for such a design, information from the table alone was not enough  we had to take\r\n\t\t\t\tinformation from four more sites.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tThe result is a section that contains the detailed information needed to level up and unlock\r\n\t\t\t\tthe potential of a character. For each character defined the team roles. For each role there\r\n\t\t\t\tare lists of recommended artifacts, weapons, talents, as well as tips for playing this role.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tFor each artifact, weapon, or material needed to upgrade a character or weapon, there are\r\n\t\t\t\tcards with a detailed description and information about where this item is obtained. Also, for\r\n\t\t\t\tartifacts and weapons there are always character recommendations.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tBut this seemed to us not enough. The site, consisting of a single section, looks somehow dry.\r\n\t\t\t\tWe started thinking about what else to add. After analyzing our needs as players, we came to\r\n\t\t\t\tthe conclusion that it would be good to show on the main page information for game planning.\r\n\t\t\t\tFirstly, we add a block with information about what is farmed today and tomorrow in dungeons,\r\n\t\t\t\tso users can plan where to spend the resin, and the time until the end of the day on different\r\n\t\t\t\tservers. Secondly, we designed a block with a summary of the character build. At the same\r\n\t\t\t\ttime, a system of favorites appeared: now any character and any material can be added to\r\n\t\t\t\tfavorites. Selected materials are highlighted on the main page. Information about selected\r\n\t\t\t\tcharacters is also displayed there.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tThe last thing I added was the Alchemy Calculator. A third of our team of three people laugh\r\n\t\t\t\tat him, but I find it extremely useful. It is designed to simplify the calculation of the\r\n\t\t\t\tnecessary resources for leveling up talent books, as well as materials for characters and\r\n\t\t\t\tweapons.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tWe have many plans for the future. Our goal is to make the most complete and useful site about\r\n\t\t\t\tGenshin . And we need your help. Message to us on{' '}\r\n\t\t\t\t<a className=\"link\" target=\"_blank\" href={LINK_DISCORD_INVITE}>\r\n\t\t\t\t\tDiscord\r\n\t\t\t\t</a>{' '}\r\n\t\t\t\tif you want to participate in the development.\r\n\t\t\t</p>\r\n\t\t</>\r\n\t),\r\n\tru: (\r\n\t\t<>\r\n\t\t\t<p>\r\n\t\t\t\t   ,         . \r\n\t\t\t\t     ,    .\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t    .       , \r\n\t\t\t\t         {' '}\r\n\t\t\t\t<a className=\"link\" target=\"_blank\" href={LINK_DISCORD_INVITE}>\r\n\t\t\t\t\t\r\n\t\t\t\t</a>\r\n\t\t\t\t.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t          ,  \r\n\t\t\t\t.      ,      \r\n\t\t\t\t .         , \r\n\t\t\t\t        ,     ,\r\n\t\t\t\t ,        , \r\n\t\t\t\t   .      ,    \r\n\t\t\t\t  :     .  .\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t   ,   .         .\r\n\t\t\t\t       ,     \r\n\t\t\t\t. , ,         \r\n\t\t\t\t        .\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t  ,    ,    \r\n\t\t\t\t  .     ,   \r\n\t\t\t\t  .   ,   ,   \r\n\t\t\t\t, , ,           .\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t  ,   ,      ,\r\n\t\t\t\t         ,  \r\n\t\t\t\t .         .\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t    . -   ,   -\r\n\t\t\t\t.   ,    .    \r\n\t\t\t\t,    ,          \r\n\t\t\t\t.     ,       ,   \r\n\t\t\t\t,   ,        .    \r\n\t\t\t\t   .      : \r\n\t\t\t\t          . \r\n\t\t\t\t   .         \r\n\t\t\t\t,        .\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t    .        \r\n\t\t\t\t,      .       \r\n\t\t\t\t  ,        .\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t     .           . \r\n\t\t\t\t   .   {' '}\r\n\t\t\t\t<a className=\"link\" target=\"_blank\" href={LINK_DISCORD_INVITE}>\r\n\t\t\t\t\t\r\n\t\t\t\t</a>\r\n\t\t\t\t,     .\r\n\t\t\t</p>\r\n\t\t</>\r\n\t),\r\n}[LANG]\r\n","import { setDayStartUTC, weekdayAsMonSun } from './utils/date.js'\n\n/** @typedef {'pyro' | 'electro' | 'hydro' | 'dendro' | 'cryo' | 'anemo' | 'geo'} GI_ElementCode */\n/** @typedef {'claymore' | 'sword' | 'catalyst' | 'polearm' | 'bow'} GI_WeaponTypeCode */\n/** @typedef {'flower' | 'plume' | 'sands' | 'goblet' | 'circlet'} GI_ArtifactTypeCode */\n/** @typedef {1 | 2 | 3 | 4 | 5} GI_RarityCode */\n/**\n * @typedef {'wishes'|'event-wishes'|'events'|'battle-pass'|'in-game-shop'|\n *   'forging'|'fishing'|'npc-shop'|'chests'|'quests'|'puzzles'|'investigation'|\n *   'adventure-rank-10'|'playstation'} GI_WeaponObtainSource\n */\n/** @typedef {'limited'|'unlimited'} GI_DomainTypeCode */\n\n/** @typedef {{mapCode:MapCode, x:number, y:number}} MapLocation */\n\n/** @typedef {'teyvat'|'enkanomiya'} MapCode */\n/** @type {MapCode[]} */\nexport const GI_MAP_CODES = ['teyvat', 'enkanomiya']\n\n/** @typedef {'mondstadt'|'liyue'|'inazuma'} GI_RegionCode */\n/** @type {GI_RegionCode[]} */\nexport const GI_REGION_CODES = ['mondstadt', 'liyue', 'inazuma']\n\n/** @typedef {'europe'|'asia'|'north-america'} GI_ServerRegionCode */\n/** @type {GI_ServerRegionCode[]} */\nexport const GI_SERVER_REGIONS = ['europe', 'asia', 'north-america']\n\n/** @typedef {'mon'|'tue'|'wed'|'thu'|'fri'|'sat'|'sun'} WeekdayCode */\n/** @type {WeekdayCode[]} */\nexport const GI_ROTATION_WEEKDAY_CODES = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun']\n\n/** @type {GI_ElementCode[]} */\nexport const GI_ELEMENT_CODES = ['pyro', 'electro', 'hydro', 'dendro', 'cryo', 'anemo', 'geo']\n\n/** @type {GI_WeaponTypeCode[]} */\nexport const GI_WEAPON_TYPE_CODES = ['claymore', 'sword', 'catalyst', 'polearm', 'bow']\n\n/** @type {GI_ArtifactTypeCode[]} */\nexport const GI_ARTIFACT_TYPE_CODES = ['flower', 'plume', 'sands', 'goblet', 'circlet']\n\nexport const ART_GROUP_18_ATK_CODE = '18%-atk'\nexport const ART_GROUP_20_ER_CODE = '20%-er'\n/** @typedef {'18%-atk'|'20%-er'} GI_ArtifactGroupCode */\n/** @type {GI_ArtifactGroupCode[]} */\nexport const GI_ARTIFACT_GROUP_CODES = [ART_GROUP_18_ATK_CODE, ART_GROUP_20_ER_CODE]\n\n/** @type {GI_RarityCode[]} */\nexport const GI_RARITY_CODES = [1, 2, 3, 4, 5]\n\n/**  ,    */\nconst _GI_STAT_REGULAR = /**@type {const}*/ (['em'])\n/**     ,    : <stat>  <stat>% */\nconst _GI_STAT_PERCENT = /**@type {const}*/ (['def', 'dmg', 'atk', 'hp', 'er', 'healing'])\n/**    'crit-' */\nconst _GI_STAT_CRIT_SUFFIXES = /**@type {const}*/ (['rate', 'dmg', 'rate%', 'dmg%'])\n/**    '-dmg'  '-dmg%' */\nconst _GI_STAT_DMG_PEFIXES = /**@type {const}*/ (['phys', 'cryo', 'geo', 'anemo', 'hydro', 'electro', 'pyro'])\n\n/**\n * @typedef {typeof _GI_STAT_REGULAR[number]\n *   | typeof _GI_STAT_PERCENT[number]\n *   | `${typeof _GI_STAT_PERCENT[number]}%`\n *   | `crit-${typeof _GI_STAT_CRIT_SUFFIXES[number]}`\n *   | `${typeof _GI_STAT_DMG_PEFIXES[number]}-dmg`\n *   | `${typeof _GI_STAT_DMG_PEFIXES[number]}-dmg%`} GI_KnownStatBonusCode\n */\n\nexport const GI_KNOWN_STAT_BONUS_CODES = /**@type {GI_KnownStatBonusCode[]}*/ (\n\t/**@type {readonly string[]}*/ (_GI_STAT_REGULAR)\n\t\t.concat(_GI_STAT_PERCENT)\n\t\t.concat(_GI_STAT_PERCENT.map(x => x + '%'))\n\t\t.concat(_GI_STAT_CRIT_SUFFIXES.map(x => 'crit-' + x))\n\t\t.concat(_GI_STAT_DMG_PEFIXES.map(x => x + '-dmg'))\n\t\t.concat(_GI_STAT_DMG_PEFIXES.map(x => x + '-dmg%'))\n)\n\n/**\n *     UTC ( )\n * @type {Record<GI_ServerRegionCode, number>}\n */\nexport const GI_REGION_TIMEZONE_OFFSET = {\n\teurope: 1,\n\tasia: 8,\n\t'north-america': -5,\n}\n/**    ( )       */\nexport const GI_SERVER_RESET_TIME = 4\n/**\n * @param {GI_ServerRegionCode} regionCode\n * @returns {{weekdayCode:WeekdayCode, weekdayMonSun:number, resetIn:number, resetAt:Date}}\n */\nexport function getRegionTime(regionCode) {\n\tconst now = new Date()\n\t//         UTC\n\tconst offsetHours = GI_SERVER_RESET_TIME - GI_REGION_TIMEZONE_OFFSET[regionCode]\n\n\tconst lastResetDate = new Date(now)\n\tlastResetDate.setHours(lastResetDate.getHours() - offsetHours)\n\tconst weekdayMonSun = weekdayAsMonSun(lastResetDate.getUTCDay())\n\tsetDayStartUTC(lastResetDate)\n\tlastResetDate.setUTCHours(offsetHours)\n\n\tconst nextResetDate = new Date(lastResetDate)\n\tnextResetDate.setDate(nextResetDate.getDate() + 1)\n\n\treturn {\n\t\tweekdayMonSun: weekdayMonSun,\n\t\tweekdayCode: GI_ROTATION_WEEKDAY_CODES[weekdayMonSun],\n\t\tresetIn: +nextResetDate - +now,\n\t\tresetAt: nextResetDate,\n\t}\n}\n/**\n * {@link https://www.timeanddate.com/time/map/}\n * @returns {GI_ServerRegionCode}\n */\nexport function guessCurrentRegion() {\n\tif (navigator.language.startsWith('ru')) return 'europe'\n\tconst curOffset = -new Date().getTimezoneOffset() / 60\n\tif (curOffset <= -2) return 'north-america'\n\tif (curOffset >= 5) return 'asia'\n\treturn 'europe'\n}\n\n/** @param {string} name */\nexport function getCharacterCodeFromName(name) {\n\tconst code = name.trim().toLocaleLowerCase().replace(/\\s/g, '-')\n\tif (code === 'childe') return 'tartaglia'\n\tif (code === 'kamisato-ayaka') return 'ayaka'\n\tif (code === 'sangonomiya-kokomi') return 'kokomi'\n\tif (code === 'kaedehara-kazuha') return 'kazuha'\n\tif (code === 'arataki-itto') return 'itto'\n\treturn code\n}\n\n/** @param {string} name */\nexport function getArtifactCodeFromName(name) {\n\treturn name.trim().toLocaleLowerCase().replace(/\\s/g, '-').replace(/'/g, '')\n}\n\n/** @param {string} name */\nexport function getWeaponCodeFromName(name) {\n\treturn name\n\t\t.trim()\n\t\t.toLocaleLowerCase()\n\t\t.replace(/\\s+/g, '-')\n\t\t.replace(/['\"]/g, '')\n}\n\n/** @param {string} name */\nexport function getDomainCodeFromName(name) {\n\treturn name\n\t\t.trim()\n\t\t.toLocaleLowerCase()\n\t\t.replace(/[\\s:]+/g, '-')\n\t\t.replace(/'/g, '')\n}\n\n/** @param {string} name */\nexport function getItemCodeFromName(name) {\n\treturn name.trim().toLocaleLowerCase().replace(/\\s+/g, '-').replace(/'/g, '')\n}\n\n/** @param {string} name */\nexport function getEnemyCodeFromName(name) {\n\treturn name\n\t\t.trim()\n\t\t.toLocaleLowerCase()\n\t\t.replace(/[\\s:\\-,]+/g, '-')\n\t\t.replace(/'/g, '')\n}\n\n/**\n * @template {{rarity:GI_RarityCode}} T\n * @param {T[]} items\n * @returns {T}\n */\nexport function getWithMaxRarity(items) {\n\tlet maxItem = items[0]\n\tfor (let i = 0; i < items.length; i++) if (maxItem.rarity < items[i].rarity) maxItem = items[i]\n\treturn maxItem\n}\n\n/** @type {Record<MapCode, string>} */\nconst locEnc_map2code = {\n\tteyvat: 'T',\n\tenkanomiya: 'E',\n}\n/** @type {Record<string, MapCode>} */\nconst locEnc_code2map = {\n\tT: 'teyvat',\n\tE: 'enkanomiya',\n}\n/**\n * @param {MapLocation[]} locations\n * @param {number} [downsample]\n * @returns {string}\n */\nexport function encodeLocations(locations, downsample = 1) {\n\tif (downsample < 1 || downsample > 35 || downsample % 1 !== 0)\n\t\tthrow new Error(`wrong downsample: ${downsample}`)\n\n\tconst sortedLocs = locations.slice().sort((a, b) => a.x - b.x || a.y - b.y)\n\n\tlet res = downsample.toString(36)\n\tfor (const [groupMapCode, groupLetter] of Object.entries(locEnc_map2code)) {\n\t\tlet xx = ''\n\t\tlet yy = ''\n\t\tfor (const { mapCode, x, y } of sortedLocs) {\n\t\t\tif (mapCode === groupMapCode) {\n\t\t\t\txx += encodeLocNum(x, downsample)\n\t\t\t\tyy += encodeLocNum(y, downsample)\n\t\t\t}\n\t\t}\n\t\tif (xx || yy) res += xx + yy + groupLetter\n\t}\n\treturn res\n}\n/**\n * @param {MapLocation[]} locations\n * @param {number} [downsample]\n * @returns {string}\n */\nexport function encodeLocationsChecked(locations, downsample = 1) {\n\tconst res = encodeLocations(locations, downsample)\n\n\tconst codes = Object.keys(locEnc_map2code)\n\tconst sortedLocs = locations\n\t\t.slice()\n\t\t.sort((a, b) => codes.indexOf(a.mapCode) - codes.indexOf(b.mapCode) || a.x - b.x || a.y - b.y)\n\t\t.map(l => ({\n\t\t\t...l,\n\t\t\tx: Math.round(l.x / downsample) * downsample,\n\t\t\ty: Math.round(l.y / downsample) * downsample,\n\t\t}))\n\tconst decodedLocs = decodeLocations(res)\n\tconst inJson = JSON.stringify(sortedLocs)\n\tconst outJson = JSON.stringify(decodedLocs)\n\tif (inJson !== outJson)\n\t\tthrow new Error('wrong decoded locations:\\n> ' + inJson + '\\n> ' + outJson + '\\n> ' + res)\n\n\treturn res\n}\n/**\n * @param {string} encodedLocations\n * @returns {MapLocation[]}\n */\nexport function decodeLocations(encodedLocations) {\n\tconst downsample = parseInt(encodedLocations[0], 36)\n\tencodedLocations = encodedLocations.slice(1)\n\n\tconst locs = /**@type {MapLocation[]}*/ ([])\n\twhile (encodedLocations) {\n\t\tlet i = 0\n\t\tfor (; i < encodedLocations.length; i++) {\n\t\t\tconst mapCode = locEnc_code2map[encodedLocations[i]]\n\t\t\tif (mapCode) {\n\t\t\t\tconst len3 = (i / 2) | 0\n\t\t\t\tfor (let j = 0; j < len3; j += 3) {\n\t\t\t\t\tconst x = decodeLocNum(encodedLocations, j, downsample)\n\t\t\t\t\tconst y = decodeLocNum(encodedLocations, j + len3, downsample)\n\t\t\t\t\tlocs.push({ mapCode, x, y })\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tencodedLocations = encodedLocations.slice(i + 1)\n\t}\n\treturn locs\n}\nconst LOC_NUM_ENC_OFFSET = 18 * 36 * 36\n/**\n * @param {number} num\n * @param {number} downsample\n */\nfunction encodeLocNum(num, downsample) {\n\tconst numD = Math.round(num / downsample)\n\tif (numD < -LOC_NUM_ENC_OFFSET || numD >= LOC_NUM_ENC_OFFSET)\n\t\tthrow new Error(`location value out of range: ${num} (${numD})`)\n\tconst str = (LOC_NUM_ENC_OFFSET + numD).toString(36)\n\treturn '0'.repeat(3 - str.length) + str\n}\n/**\n * @param {string} str\n * @param {number} i\n * @param {number} downsample\n */\nfunction decodeLocNum(str, i, downsample) {\n\treturn (parseInt(str.slice(i, i + 3), 36) - LOC_NUM_ENC_OFFSET) * downsample\n}\n","/**\n *      --  --\n * @param {number} weekday\n * @returns {number}\n */\nexport function weekdayAsMonSun(weekday) {\n\treturn weekday === 0 ? 6 : weekday - 1\n}\n\n/**\n * @param {Date} date\n * @returns {number}\n */\nexport function setDayStartUTC(date) {\n\treturn date.setUTCHours(0, 0, 0, 0)\n}\n","import { DomainShortInfo, EnemyShortInfo, ItemShortInfo } from '#lib/parsing/combine'\n\nexport function apiGetJSONFile<T>(path: string, signal?: AbortSignal | null): Promise<T> | T {\n\tif (BUNDLE_ENV.IS_SSR) {\n\t\treturn JSON.parse(global._SSR_READ_PUBLIC(path))\n\t} else {\n\t\treturn fetch(BUNDLE_ENV.ASSET_PATH + path, { method: 'GET', signal }).then(x => x.json())\n\t}\n}\n\ntype MapByCodeInner<T> = T extends (infer A)[] ? (A extends { code: string } ? Map<string, A> : never) : never\n\nexport type MapAllByCode<T> = T & {\n\tmaps: {\n\t\t[K in keyof T as T[K] extends (infer A)[]\n\t\t\t? A extends { code: string }\n\t\t\t\t? K\n\t\t\t\t: never\n\t\t\t: never]: MapByCodeInner<T[K]>\n\t}\n}\n\nexport function mapAllByCode<T>(obj: T): MapAllByCode<T> {\n\t// @ts-ignore\n\tconst maps: MapAllByCode<T>['maps'] = {}\n\tfor (const attr in obj) {\n\t\tconst val = obj[attr]\n\t\tif (Array.isArray(val) && (val.length === 0 || 'code' in val[0])) {\n\t\t\t// @ts-ignore\n\t\t\tmaps[attr] = new Map(val.map(x => [x.code, x]))\n\t\t}\n\t}\n\treturn Object.assign({}, obj, { maps })\n}\n\nexport type RelItemsShort = { items: Map<string, ItemShortInfo> }\nexport type RelDomainsShort = { domains: Map<string, DomainShortInfo> }\nexport type RelEnemiesShort = { enemies: Map<string, EnemyShortInfo> }\n\nexport function getAllRelated<T>(map: Map<string, T>, codes: string[]): T[] {\n\tconst res: T[] = []\n\tfor (const code of codes) {\n\t\tconst item = map.get(code)\n\t\tif (item !== undefined) res.push(item)\n\t}\n\treturn res\n}\n\n/*\ntype MergeNestedInner<TBase, T> = T & {\n\t[K in keyof T as K extends 'materialCodes'\n\t\t? 'materials'\n\t\t: K extends 'domainCodes'\n\t\t? 'domains'\n\t\t: K extends 'enemyCodes'\n\t\t? 'enemies'\n\t\t: K]: K extends 'materialCodes'\n\t\t? TBase extends { items: (infer TItem)[] }\n\t\t\t? TItem[]\n\t\t\t: never\n\t\t: K extends 'domainCodes'\n\t\t? TBase extends { domains: (infer TDomain)[] }\n\t\t\t? TDomain[]\n\t\t\t: never\n\t\t: K extends 'enemyCodes'\n\t\t? TBase extends { enemies: (infer TEnemy)[] }\n\t\t\t? TEnemy[]\n\t\t\t: never\n\t\t: MergeNestedInner<TBase, T[K]>\n}\n\ntype WithNested_<T, TArt, TItem, TDomain, TEnemy> = T & {\n\t[K in keyof T as K extends 'materialCodes'\n\t\t? 'materials'\n\t\t: K extends 'domainCodes'\n\t\t? 'domains'\n\t\t: K extends 'enemyCodes'\n\t\t? 'enemies'\n\t\t: K]: K extends 'materialCodes'\n\t\t? TItem\n\t\t: K extends 'domainCodes'\n\t\t? TDomain\n\t\t: K extends 'enemyCodes'\n\t\t? TEnemy\n\t\t: WithNested_<T[K], TItem, TDomain, TEnemy>\n}\n\ntype WithNestedAuto<T> = WithNested_<\n\tT,\n\tT extends { items: (infer TItem)[] } ? TItem[] : never,\n\tT extends { artifacts: (infer TArt)[] } ? TArt[] : never,\n\tT extends { domains: (infer TDomain)[] } ? TDomain[] : never,\n\tT extends { enemies: (infer TEnemy)[] } ? TEnemy[] : never\n>\n\nexport type WithNested<T> = MergeNestedInner<T, T>\n\nexport function addNested<T>(obj: T): WithNested<T> {\n\tconst mapsCache = {}\n\tfunction getAllByCode(codes, attr) {\n\t\tif (!(attr in obj)) throw new Error(`no attr '${attr}' in obj`)\n\t\tconst map = (mapsCache[attr] = mapsCache[attr] ?? new Map(obj[attr].map(x => [x.code, x])))\n\t\tconst res: unknown[] = []\n\t\tfor (const code of codes) {\n\t\t\tconst item = map.get(code)\n\t\t\tif (item) res.push(item)\n\t\t}\n\t\treturn res\n\t}\n\n\tconst relatedAttrMap = {\n\t\tmaterialCodes: ['materials', 'items'],\n\t\tdomainCodes: ['domains', 'domains'],\n\t\tenemyCodes: ['enemies', 'enemies'],\n\t}\n\tfunction mergeInner(cur) {\n\t\tif (cur === null || typeof cur !== 'object') return cur\n\n\t\tfor (const attr in cur) {\n\t\t\tmergeInner(cur[attr])\n\t\t\tconst rel = relatedAttrMap[attr]\n\t\t\tif (rel) cur[rel[0]] = getAllByCode(cur[attr], rel[1])\n\t\t}\n\t}\n\n\tmergeInner(obj)\n\treturn obj as WithNested<T>\n}\n*/\n\n/*\ntype ItemsWithCodeAttrs<T> = {\n\t[K in keyof T]: T[K] extends (infer A)[] ? (A extends { code: string } ? K : never) : never\n}[keyof T]\n\nexport function mapByCode<T, K extends ItemsWithCodeAttrs<T>>(obj: T, attrs: K[]): MapByCode<T, K> {\n\t// @ts-ignore\n\tconst maps: MapByCode<T, K>['maps'] = {}\n\tfor (const attr of attrs) {\n\t\t// @ts-ignore\n\t\tmaps[attr] = new Map(obj[attr].map(x => [x.code, x]))\n\t}\n\treturn Object.assign({}, obj, { maps })\n}\n*/\n","import { isPromise } from '#lib/utils/values'\nimport { GENERATED_DATA_HASH } from './generated'\nimport { apiGetJSONFile, mapAllByCode, MapAllByCode } from './utils'\n\nimport type {\n\tArtifactsFullInfoWithRelated,\n\tCharacterFullInfoWithRelated,\n\tExtractedLocationsInfo,\n\tMaterialsTimetableWithRelated,\n\tWeaponsFullInfoWithRelated,\n} from '#lib/parsing/combine'\nimport type { ChangelogsTable } from '#lib/parsing/helperteam/types'\n\nconst get = <T>(prefix: string, signal: AbortSignal) =>\n\tapiGetJSONFile<T>(`generated/${prefix}.json?v=${GENERATED_DATA_HASH}`, signal)\n\nconst getLang = <T>(prefix: string, signal: AbortSignal) => get<T>(prefix + '-' + BUNDLE_ENV.LANG, signal)\n\ntype PromiseOrSync<T> = Promise<T> | T\n\nconst _map = <T, R>(val: PromiseOrSync<T>, func: (v: T) => R): PromiseOrSync<R> =>\n\tisPromise(val) ? val.then(func) : func(val)\n\nexport function apiGetCharacter(\n\tcode: string,\n\tsignal: AbortSignal,\n): PromiseOrSync<MapAllByCode<CharacterFullInfoWithRelated>> {\n\treturn _map(getLang<CharacterFullInfoWithRelated>(`characters/${code}`, signal), mapAllByCode)\n}\n\nexport function apiGetCharacterRelatedLocs(\n\tcode: string,\n\tsignal: AbortSignal,\n): PromiseOrSync<ExtractedLocationsInfo> {\n\treturn getLang(`characters/${code}-locs`, signal)\n}\n\nexport function apiGetArtifacts(\n\tsignal: AbortSignal,\n): PromiseOrSync<MapAllByCode<ArtifactsFullInfoWithRelated>> {\n\treturn _map(getLang<ArtifactsFullInfoWithRelated>(`artifacts`, signal), mapAllByCode)\n}\n\nexport function apiGetWeapons(signal: AbortSignal): PromiseOrSync<MapAllByCode<WeaponsFullInfoWithRelated>> {\n\treturn _map(getLang<WeaponsFullInfoWithRelated>(`weapons`, signal), mapAllByCode)\n}\n\nexport function apiMaterialsTimetable(\n\tsignal: AbortSignal,\n): PromiseOrSync<MapAllByCode<MaterialsTimetableWithRelated>> {\n\treturn _map(getLang<MaterialsTimetableWithRelated>(`timetables/materials`, signal), mapAllByCode)\n}\n\nexport function apiGetChangelogs(onlyRecent: boolean, signal: AbortSignal): PromiseOrSync<ChangelogsTable> {\n\treturn get(`changelogs${onlyRecent ? '-recent' : ''}`, signal)\n}\n","import { useMemo } from 'preact/hooks'\n\nimport { decodeLocations } from '#lib/genshin'\nimport {\n\tCharacterFullInfoWithRelated,\n\tEnemyShortInfo,\n\tExtractedLocationsInfo,\n\tItemShortInfo,\n} from '#lib/parsing/combine'\nimport { promiseNever } from '#lib/utils/values'\nimport { isLoaded, LoadingState, useFetch, useFetchWithPrev } from '#src/utils/hooks'\nimport { apiGetCharacter, apiGetCharacterRelatedLocs } from './endpoints'\nimport { MapAllByCode, mapAllByCode } from './utils'\n\nexport function useBuildWithDelayedLocs(\n\tcharacterCode: string,\n): [build: LoadingState<MapAllByCode<CharacterFullInfoWithRelated>>, isUpdating: boolean] {\n\tconst [build, isUpdating] = useFetchWithPrev(sig => apiGetCharacter(characterCode, sig), [characterCode])\n\tconst buildIsLoaded = isLoaded(build)\n\n\tconst locs = useFetch(\n\t\tsig =>\n\t\t\tbuildIsLoaded\n\t\t\t\t? apiGetCharacterRelatedLocs(characterCode, sig) //\n\t\t\t\t: promiseNever(), //  ,      \n\t\t[characterCode, buildIsLoaded],\n\t)\n\n\tconst buildWithLocs = useMemo(\n\t\t() => (buildIsLoaded && isLoaded(locs) ? applyFullInfoLocationsImmut(build, locs) : build),\n\t\t[build, buildIsLoaded, locs],\n\t)\n\treturn [buildWithLocs, isUpdating]\n}\n\nfunction applyFullInfoLocationsImmut(\n\tfullInfo: MapAllByCode<CharacterFullInfoWithRelated>,\n\tlocsInfo: ExtractedLocationsInfo,\n): MapAllByCode<CharacterFullInfoWithRelated> {\n\tconst items = applyItemsLocationsImmut(fullInfo.items, locsInfo.items)\n\tconst enemies = applyItemsLocationsImmut(fullInfo.enemies, locsInfo.enemies)\n\treturn mapAllByCode({ ...fullInfo, items, enemies })\n}\n\nfunction applyItemsLocationsImmut<T extends ItemShortInfo | EnemyShortInfo>(\n\titems: T[],\n\tlocItems: Record<string, string>,\n): T[] {\n\tlet resItems = items\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst locs = locItems[items[i].code]\n\t\tif (locs) {\n\t\t\tif (resItems === items) resItems = items.slice()\n\t\t\tresItems[i] = { ...items[i], locations: decodeLocations(locs) }\n\t\t}\n\t}\n\treturn resItems\n}\n","export function Spinner(): JSX.Element {\n\treturn (\n\t\t<div class=\"d-flex justify-content-center\">\n\t\t\t<div class=\"spinner-border\" role=\"status\">\n\t\t\t\t<span class=\"visually-hidden\">Loading...</span>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\nexport function CentredSpinner(): JSX.Element {\n\treturn (\n\t\t<div className=\"position-absolute top-0 bottom-0 start-0 end-0 d-flex justify-content-center align-items-center\">\n\t\t\t<Spinner />\n\t\t</div>\n\t)\n}\n","export default __webpack_public_path__ + \"circlet.a7d84b1e.png\";","export default __webpack_public_path__ + \"flower.695510cb.png\";","export default __webpack_public_path__ + \"goblet.06e92e38.png\";","export default __webpack_public_path__ + \"plume.6851630b.png\";","export default __webpack_public_path__ + \"sands.e69477c6.png\";","import { GI_ARTIFACT_GROUP_CODES, GI_ArtifactTypeCode } from '#lib/genshin'\nimport { ART_GROUP_CODES } from '#src/api/generated'\nimport icon_circlet from '#src/media/circlet.png'\nimport icon_flower from '#src/media/flower.png'\nimport icon_goblet from '#src/media/goblet.png'\nimport icon_plume from '#src/media/plume.png'\nimport icon_sands from '#src/media/sands.png'\n\nexport type GI_ArtifactType = { readonly code: GI_ArtifactTypeCode; imgSrc: string }\nexport const artifactTypes: GI_ArtifactType[] = [\n\t{ code: 'flower' as const, imgSrc: icon_flower },\n\t{ code: 'plume' as const, imgSrc: icon_plume },\n\t{ code: 'sands' as const, imgSrc: icon_sands },\n\t{ code: 'goblet' as const, imgSrc: icon_goblet },\n\t{ code: 'circlet' as const, imgSrc: icon_circlet },\n]\n\nexport function getArtifactTypeIconSrc(artifactTypeCode: string): string {\n\treturn (artifactTypes.find(at => at.code === artifactTypeCode) || artifactTypes[0]).imgSrc\n}\n\nfunction isGroup(code: string) {\n\treturn (GI_ARTIFACT_GROUP_CODES as string[]).includes(code)\n}\n\nexport function getArtifactIconSrc(artifactCode: string): string {\n\treturn isGroup(artifactCode) ? icon_flower : BUNDLE_ENV.ASSET_PATH + `media/artifacts/${artifactCode}.png`\n}\n\nexport function getArtifactIconLargeSrc(artifactCode: string): string {\n\treturn isGroup(artifactCode)\n\t\t? icon_flower\n\t\t: BUNDLE_ENV.ASSET_PATH + `media/artifacts/${artifactCode}.large.png`\n}\n\nfunction getAllOrNone<T>(codes: string[], map: Map<string, T>) {\n\tconst res: T[] = []\n\tfor (const code of codes) {\n\t\tconst item = map.get(code)\n\t\tif (!item) return []\n\t\tres.push(item)\n\t}\n\treturn res\n}\nexport function getAllArtifacts<T>(code: string, artsMap: Map<string, T>): T[] {\n\tif (code in ART_GROUP_CODES) return getAllOrNone(ART_GROUP_CODES[code], artsMap)\n\treturn getAllOrNone([code], artsMap)\n}\n","export function BlockHeader({ children, classes = '' }) {\n\treturn <h6 className={`text-uppercase opacity-75 letter-spacing-1 ${classes}`}>{children}</h6>\n}\n","import { useCallback } from 'preact/hooks'\n\nexport type Option = { title: string | JSX.Element; code: string }\n\nexport function SimpleSelect({\n\toptions,\n\tselectedOption,\n\tonOptionSelect,\n\tclasses = '',\n\tsize = 1,\n}: {\n\toptions: Option[]\n\tselectedOption: Option | null\n\tonOptionSelect(Option): unknown\n\tclasses?: string\n\tsize?: number\n}): JSX.Element {\n\tconst handleChange = useCallback(\n\t\te => {\n\t\t\tonOptionSelect(options.find(o => o.code === e.target.value))\n\t\t},\n\t\t[options, onOptionSelect],\n\t)\n\treturn (\n\t\t<select\n\t\t\tclassName={`form-select border-secondary bg-dark text-light c-pointer ${classes}`}\n\t\t\tonChange={handleChange}\n\t\t\tsize={size}\n\t\t>\n\t\t\t<option value=\"\" disabled selected hidden>\n\t\t\t\tSelect\n\t\t\t</option>\n\t\t\t{options.map(o => (\n\t\t\t\t<option\n\t\t\t\t\tclassName=\"c-pointer\"\n\t\t\t\t\tkey={o.code}\n\t\t\t\t\tvalue={o.code}\n\t\t\t\t\tselected={!!(selectedOption && o.code === selectedOption.code)}\n\t\t\t\t>\n\t\t\t\t\t{o.title}\n\t\t\t\t</option>\n\t\t\t))}\n\t\t</select>\n\t)\n}\n","import { useCallback, useMemo, useState } from 'preact/hooks'\n\nimport { arrShallowEqual } from '#lib/utils/collections'\n\nexport type Tab = { code: string; title?: string | JSX.Element }\n\nexport function tabTitleFromName(obj: { name: string }): string {\n\treturn obj.name\n}\n\nexport function Tabs<T extends Tab>({\n\ttabs,\n\ttitleFunc,\n\tselectedTab,\n\tonTabSelect,\n\tclasses = '',\n}: {\n\ttabs: T[]\n\ttitleFunc?: (tab: T) => string | JSX.Element\n\tselectedTab: T\n\tonTabSelect: (tab: T) => unknown\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ul className={`nav nav-tabs ${classes}`}>\n\t\t\t{tabs.map(t => (\n\t\t\t\t<li className=\"nav-item\" key={t.code}>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName={`nav-link ${t.code === selectedTab.code ? 'active' : ''}`}\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\tonTabSelect(t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{titleFunc ? titleFunc(t) : 'title' in t ? t.title : t.code}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t)\n}\n\nexport function BtnTabGroup<T extends Tab>({\n\ttabs,\n\ttitleFunc,\n\tselectedTab,\n\tonTabSelect,\n\tclasses = '',\n\tvisibleTabsLength,\n}: {\n\ttabs: T[]\n\ttitleFunc?: (tab: T) => string | JSX.Element\n\tselectedTab: T\n\tonTabSelect: (tab: T) => void\n\tclasses?: string\n\tvisibleTabsLength?: number\n}): JSX.Element {\n\tconst tabsGrouped: T[][] = []\n\tif (visibleTabsLength) {\n\t\ttabsGrouped[0] = tabs.slice(0, visibleTabsLength)\n\t\ttabsGrouped[1] = tabs.slice(visibleTabsLength, tabs.length - 1)\n\t} else {\n\t\ttabsGrouped[0] = tabs\n\t}\n\t// todo    \n\treturn (\n\t\t<div>\n\t\t\t<div class={`btn-group ${classes}`}>\n\t\t\t\t{tabsGrouped[0].map(t => (\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tdisabled={tabs.length === 1}\n\t\t\t\t\t\tclassName={`btn lh-sm ${\n\t\t\t\t\t\t\tt.code === selectedTab.code ? 'btn-primary' : 'btn-outline-primary'\n\t\t\t\t\t\t} `}\n\t\t\t\t\t\tkey={t.code}\n\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\tonTabSelect(t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{titleFunc ? titleFunc(t) : 'title' in t ? t.title : t.code}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t{visibleTabsLength && tabsGrouped[1].length ? (\n\t\t\t\t<div class={`btn-group ${classes}`}>\n\t\t\t\t\t{tabsGrouped[1].map(t => (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tdisabled={tabs.length === 1}\n\t\t\t\t\t\t\tclassName={`btn lh-sm ${\n\t\t\t\t\t\t\t\tt.code === selectedTab.code ? 'btn-primary' : 'btn-outline-primary'\n\t\t\t\t\t\t\t} `}\n\t\t\t\t\t\t\tkey={t.code}\n\t\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\t\tonTabSelect(t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{titleFunc ? titleFunc(t) : 'title' in t ? t.title : t.code}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n\n/**\n * )      (  ,    \n *       ,   ).\n * )    args,        args\n *    (,       ,\n *      ,    -  ).\n */\nexport function useSelectable<T extends Tab>(tabs: T[], args?: unknown[]): [T, (tab: T) => unknown] {\n\tconst [tabCodes, setTabCodes] = useState<{ code: string; args: unknown[] }[]>([])\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst argsInner = useMemo(() => args ?? [], args)\n\n\tconst item = useMemo(() => tabCodes.find(x => arrShallowEqual(argsInner, x.args)), [argsInner, tabCodes])\n\n\tconst tab = useMemo(() => (item && tabs.find(x => x.code === item.code)) ?? tabs[0], [tabs, item])\n\n\tconst setTab = useCallback(\n\t\t(tab: T) => {\n\t\t\tif (item) {\n\t\t\t\tif (item.code !== tab.code) {\n\t\t\t\t\tsetTabCodes(tabCodes.filter(x => x !== item).concat({ ...item, code: tab.code }))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTabCodes(tabCodes.concat({ code: tab.code, args: argsInner }))\n\t\t\t}\n\t\t},\n\t\t[argsInner, item, tabCodes],\n\t)\n\treturn [tab, setTab]\n}\n","// bootstrap edition\nexport function calcPosForDd(\n\tparentRect: DOMRect,\n\tddRect: DOMRect,\n\t{ isAbsolute = false, isCentered = false, shouldFitInScreen = false } = {},\n): { top: number; left: number; layoutPosition: { x: 'end' | 'start'; y: 'top' | 'bottom' } } {\n\tconst tWidth = window.innerWidth\n\tconst tHeight = window.innerHeight\n\tconst scrollTopFix = isAbsolute ? window.scrollY : 0\n\tconst centredFix = isCentered ? (parentRect.width - ddRect.width) / 2 : 0\n\tlet top = 0\n\tlet left = 0\n\tlet layoutPositionX: 'end' | 'start' = 'end'\n\tlet layoutPositionY: 'top' | 'bottom' = 'bottom'\n\tif (parentRect.top + parentRect.height + ddRect.height < tHeight) {\n\t\t// to bottom\n\t\ttop = parentRect.top + parentRect.height + scrollTopFix\n\t\tlayoutPositionY = 'bottom'\n\t} else {\n\t\t// to top\n\t\ttop = parentRect.top - ddRect.height + scrollTopFix\n\t\tlayoutPositionY = 'top'\n\t}\n\tif (parentRect.left + ddRect.width + centredFix < tWidth) {\n\t\t// to right\n\t\tleft = parentRect.left + centredFix\n\t\tlayoutPositionX = 'end'\n\t} else {\n\t\t// to left\n\t\tleft = parentRect.left + parentRect.width - ddRect.width - centredFix\n\t\tlayoutPositionX = 'start'\n\t}\n\tif (shouldFitInScreen) {\n\t\tleft = Math.min(Math.max(0, left), tWidth - ddRect.width)\n\t\ttop = Math.max(top, 0)\n\t}\n\treturn { top, left, layoutPosition: { y: layoutPositionY, x: layoutPositionX } }\n}\n","import { useCallback, useEffect, useLayoutEffect, useRef, useState } from 'preact/hooks'\n\nimport { calcPosForDd } from '#src/utils/calc-pos-for-dd'\nimport { useClickAway, useWindowSize } from '#src/utils/hooks'\nimport { createPortal } from '#src/utils/preact-compat'\n\nlet modalsEl: Element | null = null\n\nexport const ItemDetailDdPortal = ({\n\tonClickAway,\n\tchildren,\n\tclasses = '',\n\ttargetEl,\n\tcontentKey = null,\n\tshouldScrollToTop,\n}: {\n\tonClickAway?(): void\n\tchildren: JSX.Nodes\n\tclasses?: string\n\ttargetEl: HTMLElement | null | undefined\n\tcontentKey?: string | null | undefined\n\tshouldScrollToTop?: boolean\n}): JSX.Element => {\n\tmodalsEl ??= document.querySelector('.modals') as Element\n\tconst wrapRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\n\tconst defClassName = `popover item-detail-popover ${classes}`\n\tconst [arrowStyle, setArrowStyle] = useState('')\n\tconst onResize = useCallback(() => {\n\t\tif (!wrapRef.current) return\n\t\tif (!targetEl) return\n\t\tconst wrapEl = wrapRef.current\n\t\tconst pos = calcPosForDd(targetEl.getBoundingClientRect(), wrapEl.getBoundingClientRect(), {\n\t\t\tisAbsolute: true,\n\t\t\tisCentered: true,\n\t\t\tshouldFitInScreen: true,\n\t\t})\n\t\t;('bs-popover-top bs-popover-bottom')\n\t\twrapEl.className = `${defClassName} bs-popover-${pos.layoutPosition.y}`\n\t\twrapEl.style.left = `${pos.left}px`\n\t\twrapEl.style.top = `${pos.top}px`\n\t\tsetArrowStyle(\n\t\t\t`position: absolute; transform: translate3d(${wrapEl.offsetWidth / 2 - 8}px, 0, 0); left: 0`,\n\t\t)\n\t}, [wrapRef, targetEl, defClassName, setArrowStyle])\n\tuseLayoutEffect(onResize)\n\tuseEffect(() => {\n\t\tif (!shouldScrollToTop) return\n\t\tconst wrapEl = wrapRef.current\n\t\tif (!wrapEl) return\n\t\tconst elTop = wrapEl.getBoundingClientRect().top\n\t\tif (elTop < 0) scrollTo(0, scrollY + elTop)\n\t})\n\tuseWindowSize()\n\tuseClickAway(wrapRef, onClickAway)\n\t//todo  ,   \n\treturn createPortal(\n\t\t<div class={defClassName} ref={wrapRef}>\n\t\t\t{children}\n\t\t\t<div class=\"popover-arrow\" style={arrowStyle}></div>\n\t\t</div>,\n\t\tmodalsEl,\n\t)\n}\nexport const ItemDetailDdMobilePortal = ({\n\tonClickAway,\n\tchildren,\n\tclasses = '',\n\tcontentKey = null,\n}: {\n\tonClickAway?(): void\n\tchildren: JSX.Nodes\n\tclasses?: string\n\tcontentKey?: string | null | undefined\n}): JSX.Element => {\n\tmodalsEl ??= document.querySelector('.modals') as Element\n\tconst wrapRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\n\tconst defClassName = `fixed-bottom ${classes}`\n\n\tuseClickAway(wrapRef, onClickAway)\n\n\treturn createPortal(\n\t\t<div class={defClassName} ref={wrapRef}>\n\t\t\t{children}\n\t\t</div>,\n\t\tmodalsEl,\n\t)\n}\n","import { calcPosForDd } from '#src/utils/calc-pos-for-dd'\nimport { useWindowSize } from '#src/utils/hooks'\nimport { createPortal } from '#src/utils/preact-compat'\nimport { useCallback, useLayoutEffect, useRef, useState } from 'preact/hooks'\n\nlet modalsEl: Element | null = null\n\nexport function Tooltip({\n\tchildren,\n\tclasses = '',\n\ttargetEl,\n}: {\n\tchildren: JSX.Node\n\tclasses?: string\n\ttargetEl: HTMLElement | null | undefined\n}): JSX.Element {\n\tmodalsEl ??= document.querySelector('.modals') as Element\n\tconst wrapRef: preact.RefObject<HTMLDivElement> | null = useRef(null)\n\tconst defClassName = `tooltip fade show ${classes}`\n\tconst [arrowStyle, setArrowStyle] = useState<string>('')\n\tconst onResize = useCallback(() => {\n\t\tif (!wrapRef.current) return\n\t\tif (!targetEl) return\n\t\tconst wrapEl = wrapRef.current\n\t\tconst pos = calcPosForDd(targetEl.getBoundingClientRect(), wrapEl.getBoundingClientRect(), {\n\t\t\tisAbsolute: true,\n\t\t\tisCentered: true,\n\t\t})\n\t\t;('bs-tooltip-top bs-tooltip-bottom')\n\t\twrapEl.className = `${defClassName} bs-tooltip-${pos.layoutPosition.y}`\n\t\twrapEl.style.left = `${Math.max(0, pos.left)}px`\n\t\twrapEl.style.top = `${Math.max(0, pos.top)}px`\n\t\tsetArrowStyle(\n\t\t\t`position: absolute; transform: translate3d(${wrapEl.offsetWidth / 2 - 8}px, 0, 0); left: 0`,\n\t\t)\n\t}, [wrapRef, targetEl, defClassName, setArrowStyle])\n\tuseLayoutEffect(onResize)\n\tuseWindowSize()\n\t//todo  ,   \n\treturn createPortal(\n\t\t<div className={defClassName} ref={wrapRef}>\n\t\t\t<div className=\"tooltip-arrow\" style={arrowStyle}></div>\n\t\t\t<div className=\"tooltip-inner\">{children}</div>\n\t\t</div>,\n\t\tmodalsEl,\n\t)\n}\n","import { guessCurrentRegion } from '#lib/genshin'\n\n//sv - storage versioned\nexport const SV_SELECTED_REGION_CODE = {\n\tkey: 'selected-region-code',\n\tversions: [() => guessCurrentRegion()] as const,\n}\n\nexport type SV_FavCodes = string[]\nconst favCodes = (key: string) => ({\n\tkey,\n\tversions: [() => [] as SV_FavCodes] as const,\n})\nexport const SV_FAV_CHAR_CODES = favCodes('favoriteCharacterCodes')\nexport const SV_FAV_TALENT_MATERIAL_CODES = favCodes('favoriteTalentMaterialCodes')\nexport const SV_FAV_WEAPON_PRIMARY_MATERIAL_CODES = favCodes('favoriteWeaponPrimaryMaterialCodes')\n\nexport type STORAGE_WEAPON_DATA = [weaponCode: string, weaponMaterialCode: string]\nexport const SV_FAV_WEAPON_DATAS = {\n\tkey: 'favoriteWeaponDatas',\n\tversions: [() => [] as STORAGE_WEAPON_DATA[]] as const,\n}\n","import { useCallback, useMemo } from 'preact/hooks'\n\nimport { CharacterFullInfoWithRelated } from '#lib/parsing/combine'\nimport { CompactTextParagraphs, TextNode } from '#lib/parsing/helperteam/text'\nimport { ArtifactRef, ArtifactRefNode, CharacterBuildInfoRole } from '#lib/parsing/helperteam/types'\nimport { mustBeDefined, staticNever } from '#lib/utils/values'\nimport { ART_GROUP_CODES } from '#src/api/generated'\nimport { MapAllByCode } from '#src/api/utils'\nimport { Tooltip } from '#src/components/tooltip'\nimport { ArtifactCard } from '#src/containers/item-cards/dd-cards'\nimport { ItemLabelWithDd, LabeledItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport { logError } from '#src/errors'\nimport { I18N_ART_GROUP_NAME, I18N_CONJUCTIONS, I18N_FAV_TIPS, I18N_STAT_NAME } from '#src/i18n/i18n'\nimport { getAllArtifacts, getArtifactIconSrc } from '#src/utils/artifacts'\nimport { Migration, useHover, useVersionedStorage } from '#src/utils/hooks'\nimport {\n\tSV_FAV_CHAR_CODES,\n\tSV_FAV_TALENT_MATERIAL_CODES,\n\tSV_FAV_WEAPON_DATAS,\n\tSV_FAV_WEAPON_PRIMARY_MATERIAL_CODES,\n\tSV_FavCodes,\n} from '#src/utils/local-storage-keys'\nimport { HEART, HEART_EMPTY, STAR } from '#src/utils/typography'\n\nexport const DUMMY_ROLE: { code: string; name: string } & Partial<CharacterBuildInfoRole<'monolang'>> = {\n\tname: '',\n\tcode: '',\n}\nexport const DUMMY_ROLES = [DUMMY_ROLE]\n\nexport type BuildRoleOrDummy = CharacterBuildInfoRole<'monolang'> | typeof DUMMY_ROLE\n\nexport function makeRoleTitle(r: BuildRoleOrDummy) {\n\treturn (\n\t\t<span key={r.code}>\n\t\t\t{r.isRecommended && (\n\t\t\t\t<span className=\"fs-4 lh-1 opacity-75 text-warning align-bottom\">{STAR}</span>\n\t\t\t)}\n\t\t\t{r.name}\n\t\t</span>\n\t)\n}\nexport const CIRCLET_GOBLET_SANDS = ['sands', 'goblet', 'circlet'] as const\nexport function getRoleData(build: CharacterFullInfoWithRelated, selectedCode: string) {\n\treturn mustBeDefined(build.character.roles.find(x => x.code === selectedCode))\n}\nexport function genArtMainStatDetail(\n\trole: CharacterBuildInfoRole<'monolang'>,\n\titemCode: 'circlet' | 'goblet' | 'sands',\n\tisShort?: boolean,\n) {\n\treturn (\n\t\t<span className=\"\">\n\t\t\t{genSimpleList(role.mainStats[itemCode].codes.map(I18N_STAT_NAME))}{' '}\n\t\t\t{!isShort && genNotes(role.mainStats[itemCode])}\n\t\t\t{!isShort && genSeeCharNotes(role.mainStats[itemCode])}\n\t\t</span>\n\t)\n}\nexport function genSimpleList(arr: string[]) {\n\treturn arr.join(', ')\n}\nexport function notesWrap(str) {\n\treturn <span className=\"text-muted small\">{str}</span>\n}\nexport function genNotes(item: { notes: CompactTextParagraphs | null }) {\n\treturn item.notes === null ? '' : notesWrap(notesToJSX(item.notes))\n}\nexport function genSeeCharNotes(item: { seeCharNotes: boolean }) {\n\treturn '' //TODO\n\treturn item.seeCharNotes ? notesWrap(' (see notes)') : ''\n}\nexport function notesToJSX(tips: CompactTextParagraphs | null): JSX.Nodes {\n\tfunction processString(str: string) {\n\t\treturn str\n\t\t\t.split('\\n')\n\t\t\t.map((sub, i, arr) => [sub, i < arr.length - 1 ? <br /> : ''])\n\t\t\t.flat()\n\t\t\t.filter(a => a)\n\t}\n\tfunction processObj(tip: TextNode) {\n\t\tif (typeof tip === 'string') return processString(tip)\n\t\tif ('p' in tip) return <p>{notesToJSX(tip.p)}</p>\n\t\tif ('b' in tip) return <b class=\"opacity-75 text-normal\">{notesToJSX(tip.b)}</b>\n\t\tif ('i' in tip) return <i>{notesToJSX(tip.i)}</i>\n\t\tif ('s' in tip) return <s>{notesToJSX(tip.s)}</s>\n\t\tif ('a' in tip)\n\t\t\treturn (\n\t\t\t\t<a href={tip.href} target=\"_blank\">\n\t\t\t\t\t{notesToJSX(tip.a)}\n\t\t\t\t</a>\n\t\t\t)\n\t\tif ('weapon' in tip)\n\t\t\treturn (\n\t\t\t\t<ItemLabelWithDd type=\"weapon\" code={tip.code}>\n\t\t\t\t\t{notesToJSX(tip.weapon)}\n\t\t\t\t</ItemLabelWithDd>\n\t\t\t)\n\t\tif ('artifact' in tip)\n\t\t\treturn (\n\t\t\t\t<ItemLabelWithDd type=\"artifact\" code={tip.code}>\n\t\t\t\t\t{notesToJSX(tip.artifact)}\n\t\t\t\t</ItemLabelWithDd>\n\t\t\t)\n\t\tif ('item' in tip) return <>{notesToJSX(tip.item)}</>\n\t\tstaticNever(tip)\n\t\tlogError('unknown text node: ' + JSON.stringify(tip))\n\t\treturn <span>{JSON.stringify(tip)}</span>\n\t}\n\tif (!tips) return null\n\tif (Array.isArray(tips)) return tips.map(processObj).flat()\n\treturn processObj(tips)\n}\n\nexport function getCoverArtifactForSet(code, artsForDd) {\n\tlet coverArt\n\tif (code in ART_GROUP_CODES) {\n\t\tcoverArt = {\n\t\t\tname: I18N_ART_GROUP_NAME[code],\n\t\t\tcode: code,\n\t\t\trarity: 5,\n\t\t}\n\t} else {\n\t\tcoverArt = artsForDd[0]\n\t}\n\treturn coverArt\n}\nexport function genArtifactAdvice(\n\tset: ArtifactRef | ArtifactRefNode,\n\tbuild: MapAllByCode<CharacterFullInfoWithRelated>,\n\tisLast = true,\n) {\n\t// todo notes\n\tif ('code' in set) {\n\t\t//ArtifactRef\n\t\tconst artifactsForDd = getAllArtifacts(set.code, build.maps.artifacts)\n\t\tif (!artifactsForDd.length) return null\n\t\tconst coverArt = getCoverArtifactForSet(set.code, artifactsForDd)\n\t\treturn (\n\t\t\t<LabeledItemAvatar\n\t\t\t\timgSrc={getArtifactIconSrc(set.code)}\n\t\t\t\trarity={coverArt.rarity}\n\t\t\t\ttitle={coverArt.name}\n\t\t\t\tkey={set.code}\n\t\t\t\tavatarTopEndBadge={'x' + set.count}\n\t\t\t\tavatarClasses=\"with-padding\"\n\t\t\t\tclasses={`small ${isLast ? 'mb-1' : ''}`}\n\t\t\t\tddComponent={\n\t\t\t\t\t<ArtifactCard artifacts={artifactsForDd} related={build.maps} title={coverArt.name} />\n\t\t\t\t}\n\t\t\t/>\n\t\t)\n\t} else {\n\t\t//ArtifactRefNode\n\t\treturn (\n\t\t\t<ItemsListGroupWrap>\n\t\t\t\t{set.arts.map((art, i) => {\n\t\t\t\t\tconst isLastInList = i >= set.arts.length - 1\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{genArtifactAdvice(art, build, isLastInList)}\n\t\t\t\t\t\t\t{!isLastInList && <ItemsJoinerWrap>{I18N_CONJUCTIONS[set.op]}</ItemsJoinerWrap>}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</ItemsListGroupWrap>\n\t\t)\n\t}\n}\nexport function ItemsJoinerWrap({ children }): JSX.Element {\n\treturn <div className=\"text-start text-muted small px-5 my-n1\">{children}</div>\n}\nexport function ItemsListGroupWrap({\n\tchildren,\n}: {\n\tchildren: JSX.Node | (JSX.Element | null)[]\n}): JSX.Element {\n\treturn <div className=\"border-2 rounded border-secondary border-start ps-2\">{children}</div>\n}\nexport const MAX_SMTHS_TO_STORE = 5\nexport function removeOldSmthsFromList<T>(codes: T[]): T[] {\n\treturn codes.slice(0, MAX_SMTHS_TO_STORE)\n}\n\nfunction ToggleSmthFav<\n\tTStorageKey extends {\n\t\tkey: string\n\t\tversions: readonly [...Migration<unknown, unknown>[], Migration<unknown, SV_FavCodes>]\n\t},\n>({\n\tsmthCode,\n\tclasses,\n\tstorageKey,\n\ttipFav,\n\ttipNotFav,\n}: {\n\tsmthCode: string\n\tclasses?: string\n\tstorageKey: TStorageKey\n\ttipFav: string\n\ttipNotFav: string\n}): JSX.Element {\n\tconst [favSmthCodes, setFavSmthCodes] = useVersionedStorage(storageKey)\n\tconst [elRef, isHovered] = useHover<HTMLDivElement>()\n\tconst isFav = ~favSmthCodes.indexOf(smthCode)\n\tconst toggleFav = useCallback(() => {\n\t\tsetFavSmthCodes(\n\t\t\tremoveOldSmthsFromList(\n\t\t\t\tisFav ? favSmthCodes.filter(c => c !== smthCode) : [smthCode, ...favSmthCodes],\n\t\t\t),\n\t\t)\n\t}, [smthCode, setFavSmthCodes, favSmthCodes, isFav])\n\treturn (\n\t\t<div\n\t\t\trole=\"button\"\n\t\t\tclassName={`user-select-none lh-1 ${isFav ? 'text-danger' : 'text-danger opacity-50'} ${classes}`}\n\t\t\tonClick={toggleFav}\n\t\t\tref={elRef}\n\t\t>\n\t\t\t{isFav ? HEART : HEART_EMPTY}\n\t\t\t{elRef.current && isHovered ? (\n\t\t\t\t<Tooltip targetEl={elRef.current}>{isFav ? tipFav : tipNotFav}</Tooltip>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n\nexport function ToggleCharFav({\n\tcharacterCode,\n\tclasses,\n}: {\n\tcharacterCode: string\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ToggleSmthFav\n\t\t\tsmthCode={characterCode}\n\t\t\tclasses={classes}\n\t\t\tstorageKey={SV_FAV_CHAR_CODES}\n\t\t\ttipFav={I18N_FAV_TIPS.remove.character}\n\t\t\ttipNotFav={I18N_FAV_TIPS.add.character}\n\t\t/>\n\t)\n}\nexport function ToggleWeaponPrimaryMaterialFav({\n\titemCode,\n\tclasses,\n}: {\n\titemCode: string\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ToggleSmthFav\n\t\t\tsmthCode={itemCode}\n\t\t\tclasses={classes}\n\t\t\tstorageKey={SV_FAV_WEAPON_PRIMARY_MATERIAL_CODES}\n\t\t\ttipFav={I18N_FAV_TIPS.remove.material}\n\t\t\ttipNotFav={I18N_FAV_TIPS.add.material}\n\t\t/>\n\t)\n}\nexport function ToggleTalentMaterialFav({\n\titemCode,\n\tclasses,\n}: {\n\titemCode: string\n\tclasses?: string\n}): JSX.Element {\n\treturn (\n\t\t<ToggleSmthFav\n\t\t\tsmthCode={itemCode}\n\t\t\tclasses={classes}\n\t\t\tstorageKey={SV_FAV_TALENT_MATERIAL_CODES}\n\t\t\ttipFav={I18N_FAV_TIPS.remove.material}\n\t\t\ttipNotFav={I18N_FAV_TIPS.add.material}\n\t\t/>\n\t)\n}\n\n//not used\nexport function ToggleWeaponFav({\n\tweaponCode,\n\tweapMatCode,\n\tclasses,\n}: {\n\tweaponCode: string\n\tweapMatCode: string\n\tclasses?: string\n}): JSX.Element {\n\tconst [favWeaponDatas, setWeaponDatas] = useVersionedStorage(SV_FAV_WEAPON_DATAS)\n\tconst favWeaponCodes = useMemo(() => favWeaponDatas.map(wd => wd[0]), [favWeaponDatas])\n\tconst [elRef, isHovered] = useHover<HTMLDivElement>()\n\tconst isFav = ~favWeaponCodes.indexOf(weaponCode)\n\tconst toggleFav = useCallback(() => {\n\t\tsetWeaponDatas(\n\t\t\tremoveOldSmthsFromList(\n\t\t\t\tisFav\n\t\t\t\t\t? favWeaponDatas.filter(d => d[0] !== weaponCode)\n\t\t\t\t\t: [[weaponCode, weapMatCode], ...favWeaponDatas],\n\t\t\t),\n\t\t)\n\t}, [weaponCode, weapMatCode, setWeaponDatas, favWeaponDatas, isFav])\n\treturn (\n\t\t<div\n\t\t\trole=\"button\"\n\t\t\tclassName={`user-select-none lh-1 ${isFav ? 'text-danger' : 'text-danger opacity-50'} ${classes}`}\n\t\t\tonClick={toggleFav}\n\t\t\tref={elRef}\n\t\t>\n\t\t\t{isFav ? HEART : HEART_EMPTY}\n\t\t\t{elRef.current && isHovered ? (\n\t\t\t\t<Tooltip targetEl={elRef.current}>\n\t\t\t\t\t{isFav ? I18N_FAV_TIPS.remove.weapon : I18N_FAV_TIPS.add.weapon}\n\t\t\t\t</Tooltip>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n","export function getItemIconSrc(itemCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/items/${itemCode}.png`\n}\n\nexport function getItemIconLargeSrc(itemCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/items/${itemCode}.large.png`\n}\n","export default __webpack_public_path__ + \"Icon_Bow.e7c82786.png\";","export default __webpack_public_path__ + \"Icon_Catalyst.871a7999.png\";","export default __webpack_public_path__ + \"Icon_Claymore.46946e88.png\";","export default __webpack_public_path__ + \"Icon_Polearm.73080ee4.png\";","import icon_Bow from '#src/media/Icon_Bow.png'\nimport icon_Catalyst from '#src/media/Icon_Catalyst.png'\nimport icon_Claymore from '#src/media/Icon_Claymore.png'\nimport icon_Polearm from '#src/media/Icon_Polearm.png'\nimport icon_Sword from '#src/media/Icon_Sword.png'\n\nimport type { GI_WeaponTypeCode } from '#lib/genshin'\n\nexport type GI_WeaponType = { readonly code: GI_WeaponTypeCode; imgSrc: string }\nexport const weaponTypes: GI_WeaponType[] = [\n\t{ code: 'sword' as const, imgSrc: icon_Sword },\n\t{ code: 'bow' as const, imgSrc: icon_Bow },\n\t{ code: 'catalyst' as const, imgSrc: icon_Catalyst },\n\t{ code: 'claymore' as const, imgSrc: icon_Claymore },\n\t{ code: 'polearm' as const, imgSrc: icon_Polearm },\n]\n\nexport function getWeaponIconSrc(weaponCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/weapons/${weaponCode}.png`\n}\n\nexport function getWeaponIconLageSrc(weaponCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/weapons/${weaponCode}.large.png`\n}\n","export default __webpack_public_path__ + \"Icon_Sword.a2824108.png\";","import { useCallback, useEffect, useState } from 'preact/hooks'\nimport { ItemAvatar } from './item-cards/item-avatars'\nimport { getItemIconSrc } from '#src/utils/items'\nimport { GI_RarityCode } from '#src/../../lib/genshin'\n\nconst DEF_ANCESTRY_CODES = [\n\t'agnidus-agate-sliver',\n\t'agnidus-agate-fragment',\n\t'agnidus-agate-chunk',\n\t'agnidus-agate-gemstone',\n]\nexport function AlchemyCalculator({\n\tclasses = '',\n\tancestryCodes = DEF_ANCESTRY_CODES,\n}: {\n\tclasses?: string\n\tancestryCodes?: string[]\n}): JSX.Element {\n\tconst [values, setValues] = useState<number[]>([])\n\tconst onValueChange = useCallback(\n\t\te => {\n\t\t\tconst value = +e.target.value\n\t\t\tconst index = +e.target.dataset.index\n\t\t\tsetValues(values.map((v, i) => (v = Math.floor(3 ** (index - i) * value))))\n\t\t},\n\t\t[setValues, values],\n\t)\n\tuseEffect(() => {\n\t\tsetValues(ancestryCodes.map((c, i) => 3 ** (ancestryCodes.length - 1 - i)))\n\t}, [ancestryCodes])\n\tconst startNotRoundClass = 'not-rounded-start'\n\tconst endNotRoundClass = 'not-rounded-end'\n\tconst endRoundClass = 'rounded-end'\n\treturn (\n\t\t<div className={`alchemy-calculator overflow-hidden ${classes}`}>\n\t\t\t<div className=\"input-group\">\n\t\t\t\t{ancestryCodes.map((c, i) => {\n\t\t\t\t\tconst isFirst = i === 0\n\t\t\t\t\tconst isLast = i === ancestryCodes.length - 1\n\t\t\t\t\tconst rarity = 5 - (ancestryCodes.length - 1 - i)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{i !== 0 ? (\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={`input-group-text text-dark border-light border-top border-bottom bg-${\n\t\t\t\t\t\t\t\t\t\trarity - 1\n\t\t\t\t\t\t\t\t\t} ps-1`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{'='}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\tclassName={`form-control bg-dark text-light text-end border-secondary pe-1 ${\n\t\t\t\t\t\t\t\t\t!isFirst ? startNotRoundClass : ''\n\t\t\t\t\t\t\t\t} ${endNotRoundClass}`}\n\t\t\t\t\t\t\t\tonInput={onValueChange}\n\t\t\t\t\t\t\t\tvalue={values[i]}\n\t\t\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tsrc={getItemIconSrc(c)}\n\t\t\t\t\t\t\t\trarity={rarity as GI_RarityCode}\n\t\t\t\t\t\t\t\tclasses={`small-avatar with-padding input-group-avatar ${startNotRoundClass} ${\n\t\t\t\t\t\t\t\t\t!isLast ? endNotRoundClass : endRoundClass + ' border-end'\n\t\t\t\t\t\t\t\t} border-top border-bottom border-light`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { useMemo, useState } from 'preact/hooks'\n\nimport { GI_DomainTypeCode, MapCode, MapLocation } from '#lib/genshin'\nimport { ArtifactFullInfo, ItemShortInfo, WeaponFullInfo } from '#lib/parsing/combine'\nimport { arrGetAfter } from '#lib/utils/collections'\nimport { getAllRelated, RelDomainsShort, RelEnemiesShort, RelItemsShort } from '#src/api/utils'\nimport { BlockHeader } from '#src/components/block-header'\nimport { SimpleSelect } from '#src/components/select'\nimport { Spinner } from '#src/components/spinners'\nimport { BtnTabGroup, tabTitleFromName, useSelectable } from '#src/components/tabs'\nimport {\n\tItemDetailDdMobilePortal,\n\tItemDetailDdPortal,\n} from '#src/containers/item-cards/item-detail-dd-portal'\nimport {\n\tI18N_ALCHEMY_CALC,\n\tI18N_BASE_ATTACK,\n\tI18N_ERROR,\n\tI18N_FOR_NOBODY,\n\tI18N_MAP_CODES_NAME,\n\tI18N_OBTAINED_DURING_STORYLINE,\n\tI18N_PIECE_BONUS,\n\tI18N_PIECES_BONUS,\n\tI18N_PINCH_TO_ZOOM,\n\tI18N_RECOMMENDED_FOR,\n\tI18N_SCROLL_TO_ZOOM,\n\tI18N_SECONDARY_STAT,\n\tI18N_SOURCE,\n\tI18N_STAT_NAME,\n\tI18N_WEAPON_OBTAIN_SOURCE_NAME,\n\tI18N_WEAPON_TYPE_NAME,\n} from '#src/i18n/i18n'\nimport {\n\tnotesToJSX,\n\tToggleTalentMaterialFav,\n\tToggleWeaponPrimaryMaterialFav,\n} from '#src/modules/builds/common'\nimport { getArtifactIconLargeSrc, getArtifactIconSrc } from '#src/utils/artifacts'\nimport { BS_isBreakpointLessThen } from '#src/utils/bootstrap'\nimport { getDomainIconSrc } from '#src/utils/domains'\nimport { getEnemyIconSrc } from '#src/utils/enemies'\nimport { isLoaded, useFetch, useWindowSize } from '#src/utils/hooks'\nimport { getItemIconSrc } from '#src/utils/items'\nimport { BULLET, LEFT_POINTING, RIGHT_POINTING } from '#src/utils/typography'\nimport { getWeaponIconLageSrc } from '#src/utils/weapons'\nimport { AlchemyCalculator } from '../alchemy-calculator'\nimport { CharacterAvatar, DdContext, ItemAvatar, LabeledItemAvatar } from './item-avatars'\n\nimport type { MapMarkerRaw } from '#src/components/teyvat-map'\nconst LazyTeyvatMap = import('#src/components/teyvat-map')\n\nfunction RecommendedFor({ charCodes }: { charCodes: string[] }): JSX.Element {\n\treturn (\n\t\t<>\n\t\t\t<BlockHeader>{I18N_RECOMMENDED_FOR}</BlockHeader>\n\t\t\t{charCodes.length\n\t\t\t\t? charCodes.map(c => (\n\t\t\t\t\t\t<CharacterAvatar key={c} code={c} isNoBg={true} classes={`small-avatar mb-2 me-2`} />\n\t\t\t\t  ))\n\t\t\t\t: I18N_FOR_NOBODY}\n\t\t</>\n\t)\n}\n\n//     \nexport function CardDescMobileWrap({\n\tchildren,\n\ttargetEl,\n\tonClickAway,\n}: {\n\tonClickAway: () => void\n\ttargetEl: HTMLElement | null | undefined\n\tchildren: JSX.Element\n}): JSX.Element {\n\tconst windowSize = useWindowSize()\n\treturn BS_isBreakpointLessThen(windowSize.breakpoint, 'xl') ? (\n\t\t<ItemDetailDdMobilePortal onClickAway={onClickAway}>{children}</ItemDetailDdMobilePortal>\n\t) : (\n\t\t<ItemDetailDdPortal onClickAway={onClickAway} targetEl={targetEl} shouldScrollToTop={true}>\n\t\t\t{children}\n\t\t</ItemDetailDdPortal>\n\t)\n}\n//   \nfunction Card({\n\tclasses = '',\n\ttitleEl,\n\tselectorEl,\n\tbodyEl,\n\tmapEl,\n}: {\n\tclasses?: string\n\ttitleEl: JSX.Nodes | string\n\tselectorEl?: JSX.Nodes\n\tbodyEl?: JSX.Nodes\n\tmapEl?: JSX.Nodes\n}): JSX.Element {\n\treturn (\n\t\t<div className={`item-detail-popover-card card ${classes}`}>\n\t\t\t<h3 className=\"card-header fs-4 d-flex position-relative\">\n\t\t\t\t<span className=\"flex-fill\">{titleEl}</span>{' '}\n\t\t\t\t<DdContext.Consumer>\n\t\t\t\t\t{ddContext =>\n\t\t\t\t\t\tddContext.onClickAway && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclass=\"btn-close btn-sm position-absolute end-0 top-50 translate-middle\"\n\t\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\t\tonClick={ddContext.onClickAway}\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</DdContext.Consumer>\n\t\t\t</h3>\n\t\t\t{selectorEl && <div class=\"p-3\">{selectorEl}</div>}\n\t\t\t<div\n\t\t\t\tclassName={`card-body overflow-auto flex-shrink-1 hide-if-empty mb-3 pb-0 ${\n\t\t\t\t\tselectorEl ? 'pt-0' : ''\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t{bodyEl}\n\t\t\t</div>\n\t\t\t{mapEl}\n\t\t</div>\n\t)\n}\n\ntype MapWrapMarkerGroup = {\n\tcode: string\n\ttitle: string\n\tmarkers: 'external' | MapMarkerRaw[]\n}\n\nfunction addMarkerGroupsByDomains(\n\tmarkerGroups: MapWrapMarkerGroup[],\n\tdomains: { code: string; name: string; type: GI_DomainTypeCode; location: MapLocation }[],\n) {\n\tfor (const domain of domains) {\n\t\tconst loc = domain.location\n\t\tconst icon = getDomainIconSrc(domain.type)\n\t\tmarkerGroups.push({ code: domain.code, title: domain.name, markers: [{ ...loc, icon }] })\n\t}\n}\nfunction addMarkerGroupsByEnemies(\n\tmarkerGroups: MapWrapMarkerGroup[],\n\tenemies: { code: string; name: string; locations: 'external' | MapLocation[] }[],\n) {\n\tfor (const enemy of enemies) {\n\t\tconst markers =\n\t\t\tenemy.locations === 'external'\n\t\t\t\t? 'external'\n\t\t\t\t: enemy.locations.map((loc): MapMarkerRaw => {\n\t\t\t\t\t\tconst icon = getEnemyIconSrc(enemy.code)\n\t\t\t\t\t\treturn { ...loc, icon, style: 'circle' }\n\t\t\t\t  })\n\t\tmarkerGroups.push({ code: enemy.code, title: enemy.name, markers })\n\t}\n}\n\nfunction MapWrap({\n\titemData,\n\tmarkerGroups,\n\tisItemFavable,\n}: {\n\titemData?: {\n\t\timgSrc: string\n\t\titem: ItemShortInfo | ArtifactFullInfo | WeaponFullInfo\n\t}\n\tmarkerGroups: MapWrapMarkerGroup[]\n\tisItemFavable?: boolean\n}): JSX.Element {\n\tconst TeyvatMap = useFetch(() => LazyTeyvatMap.then(x => x.TeyvatMap), [])\n\n\tconst [selectedSource, setSelectedSource] = useSelectable(markerGroups)\n\n\tconst visibleMapCodeTabs = useMemo(() => {\n\t\tif (selectedSource.markers === 'external') return []\n\t\tconst mapCodes = new Set<MapCode>()\n\t\tfor (const marker of selectedSource.markers) mapCodes.add(marker.mapCode)\n\t\treturn Array.from(mapCodes, code => ({ code }))\n\t}, [selectedSource])\n\n\tconst [selectedMapCodeTab, setMapCodeTab] = useSelectable(visibleMapCodeTabs)\n\tconst selectedMapCode = selectedMapCodeTab.code\n\n\tconst setSourceAndFixMapCode = (selectedSource: MapWrapMarkerGroup) => {\n\t\tif (\n\t\t\tselectedSource.markers !== 'external' &&\n\t\t\t!selectedSource.markers.find(m => m.mapCode === selectedMapCode)\n\t\t)\n\t\t\tsetMapCodeTab({ code: selectedSource.markers[0].mapCode })\n\t\tsetSelectedSource(selectedSource)\n\t}\n\tconst goToPrevGroup = () => {\n\t\tsetSourceAndFixMapCode(arrGetAfter(markerGroups, selectedSource, -1))\n\t}\n\tconst goToNextGroup = () => {\n\t\tsetSourceAndFixMapCode(arrGetAfter(markerGroups, selectedSource))\n\t}\n\n\tlet sourceSelectEl\n\tif (!markerGroups.length) {\n\t\tsourceSelectEl = null\n\t} else if (markerGroups.length === 1) {\n\t\tsourceSelectEl = <span className=\"align-self-center lh-1 small\">{markerGroups[0].title}</span>\n\t} else if (markerGroups.length < 3) {\n\t\tsourceSelectEl = (\n\t\t\t<BtnTabGroup\n\t\t\t\ttabs={markerGroups}\n\t\t\t\tselectedTab={selectedSource}\n\t\t\t\tonTabSelect={setSourceAndFixMapCode}\n\t\t\t\tclasses=\"w-100 btn-group-sm\"\n\t\t\t/>\n\t\t)\n\t} else {\n\t\tsourceSelectEl = (\n\t\t\t<div className=\"btn-group w-100\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"btn btn-secondary border-dark border-end-0 text-muted fs-4 lh-1\"\n\t\t\t\t\tonClick={goToPrevGroup}\n\t\t\t\t>\n\t\t\t\t\t{LEFT_POINTING}\n\t\t\t\t</button>\n\t\t\t\t<SimpleSelect\n\t\t\t\t\toptions={markerGroups}\n\t\t\t\t\tselectedOption={selectedSource}\n\t\t\t\t\tonOptionSelect={setSourceAndFixMapCode}\n\t\t\t\t\tclasses=\"w-100 rounded-0\"\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"btn btn-secondary border-dark border-start-0 text-muted fs-4 lh-1\"\n\t\t\t\t\tonClick={goToNextGroup}\n\t\t\t\t>\n\t\t\t\t\t{RIGHT_POINTING}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t)\n\t}\n\n\tconst isItemWeaponPrimaryMaterial = useMemo(\n\t\t() =>\n\t\t\titemData?.item &&\n\t\t\t'types' in itemData.item &&\n\t\t\t~itemData?.item.types?.indexOf('weapon-material-primary'),\n\t\t[itemData?.item],\n\t)\n\n\treturn (\n\t\t<div className={`map-wrap position-relative mb-3`}>\n\t\t\t<div className=\"map-header position-absolute d-flex flex-row justify-content-between px-3 py-1 w-100\">\n\t\t\t\t<div className=\"map-header-bg position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-75\"></div>\n\t\t\t\t{itemData && (\n\t\t\t\t\t<div className=\"me-2 flex-shrink-1 d-flex align-self-center\">\n\t\t\t\t\t\t{isItemWeaponPrimaryMaterial && isItemFavable ? (\n\t\t\t\t\t\t\t<ToggleWeaponPrimaryMaterialFav\n\t\t\t\t\t\t\t\titemCode={itemData.item.code}\n\t\t\t\t\t\t\t\tclasses=\"align-self-center p-1 flex-fill fs-5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<LabeledItemAvatar\n\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\tclasses=\"small-avatar small\"\n\t\t\t\t\t\t\tavatarClasses=\"with-padding \"\n\t\t\t\t\t\t\timgSrc={itemData.imgSrc}\n\t\t\t\t\t\t\ttitle={itemData.item.name}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{markerGroups.length ? (\n\t\t\t\t\t<div className={`d-flex flex-fill justify-content-end align-self-center`}>\n\t\t\t\t\t\t<label className=\"me-1 text-muted align-self-center small\">{I18N_SOURCE}:</label>\n\t\t\t\t\t\t{sourceSelectEl}\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t\t<div className=\"map-tip position-absolute px-3 pt-1 lh-1 top-100 start-0 small text-muted opacity-75 user-select-none\">\n\t\t\t\t{visibleMapCodeTabs.map(({ code }) => (\n\t\t\t\t\t<div className=\"d-inline me-2\" key={code} onClick={() => setMapCodeTab({ code })}>\n\t\t\t\t\t\t{visibleMapCodeTabs.length > 1 ? (\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"lh-1 align-middle c-pointer me-1\"\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tid={code}\n\t\t\t\t\t\t\t\tchecked={code === selectedMapCode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`lh-1 align-middle text-capitalize ${\n\t\t\t\t\t\t\t\tvisibleMapCodeTabs.length > 1 ? 'c-pointer' : ''\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\tfor={code}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{I18N_MAP_CODES_NAME[code]}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className=\"map-tip position-absolute px-3 pt-1 lh-1 top-100 end-0 small text-muted opacity-75 pe-none\">\n\t\t\t\t<div class=\"d-none d-xl-block\">{I18N_SCROLL_TO_ZOOM}</div>\n\t\t\t\t<div class=\"d-xl-none\">{I18N_PINCH_TO_ZOOM}</div>\n\t\t\t</div>\n\t\t\t{selectedSource.markers !== 'external' && isLoaded(TeyvatMap) ? (\n\t\t\t\t<TeyvatMap\n\t\t\t\t\tclasses=\"position-relative\"\n\t\t\t\t\tpos=\"auto\"\n\t\t\t\t\tmapCode={selectedMapCode}\n\t\t\t\t\tmarkers={selectedSource.markers}\n\t\t\t\t/>\n\t\t\t) : TeyvatMap instanceof Error ? (\n\t\t\t\t<div className=\"text-muted position-absolute top-0 bottom-0 start-0 end-0 d-flex justify-content-center align-items-center\">\n\t\t\t\t\t{I18N_ERROR}\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<Spinner />\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport function ArtifactCard({\n\tclasses,\n\tartifacts,\n\trelated,\n\ttitle,\n}: {\n\tclasses?: string\n\tartifacts: ArtifactFullInfo[]\n\trelated: RelItemsShort & RelDomainsShort & RelEnemiesShort\n\ttitle: string\n}): JSX.Element {\n\tconst [selectedArt, setSelectedArt] = useSelectable(artifacts)\n\n\tconst dataForMap = useMemo(() => {\n\t\tconst srcs = selectedArt.obtainSources\n\t\tconst markerGroups = []\n\t\taddMarkerGroupsByDomains(markerGroups, getAllRelated(related.domains, srcs.domainCodes))\n\t\taddMarkerGroupsByEnemies(markerGroups, getAllRelated(related.enemies, srcs.enemyCodes))\n\n\t\treturn {\n\t\t\titemData: {\n\t\t\t\titem: selectedArt,\n\t\t\t\timgSrc: getArtifactIconSrc(selectedArt.code),\n\t\t\t},\n\t\t\tmarkerGroups,\n\t\t}\n\t}, [selectedArt, related])\n\treturn (\n\t\t<Card\n\t\t\ttitleEl={title}\n\t\t\tclasses={classes}\n\t\t\tselectorEl={\n\t\t\t\tartifacts.length > 1 ? (\n\t\t\t\t\t<BtnTabGroup\n\t\t\t\t\t\ttabs={artifacts}\n\t\t\t\t\t\ttitleFunc={tabTitleFromName}\n\t\t\t\t\t\tselectedTab={selectedArt}\n\t\t\t\t\t\tonTabSelect={setSelectedArt}\n\t\t\t\t\t\tclasses=\"w-100 btn-group-sm\"\n\t\t\t\t\t\tvisibleTabsLength={3}\n\t\t\t\t\t/>\n\t\t\t\t) : null\n\t\t\t}\n\t\t\tbodyEl={\n\t\t\t\t<div className=\"\">\n\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\trarity={selectedArt.rarity}\n\t\t\t\t\t\tclasses=\"float-end me-2 large-avatar\"\n\t\t\t\t\t\tsrc={getArtifactIconLargeSrc(selectedArt.code)}\n\t\t\t\t\t/>\n\t\t\t\t\t{selectedArt.sets[1] && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockHeader>{I18N_PIECE_BONUS(1)}</BlockHeader>\n\t\t\t\t\t\t\t<div className=\"mb-3\">{notesToJSX(selectedArt.sets[1])}</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedArt.sets[2] && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockHeader>{I18N_PIECES_BONUS(2)}</BlockHeader>\n\t\t\t\t\t\t\t<div className=\"mb-3\">{notesToJSX(selectedArt.sets[2])}</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedArt.sets[4] && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockHeader>{I18N_PIECES_BONUS(4)}</BlockHeader>\n\t\t\t\t\t\t\t<div className=\"mb-3\">{notesToJSX(selectedArt.sets[4])}</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t{<RecommendedFor charCodes={selectedArt.recommendedTo} />}\n\t\t\t\t</div>\n\t\t\t}\n\t\t\tmapEl={dataForMap.markerGroups.length ? <MapWrap {...dataForMap} /> : null}\n\t\t></Card>\n\t)\n}\n\nexport function WeaponCard({\n\tclasses,\n\tweapon,\n\trelated,\n}: {\n\tonCloseClick?: () => void\n\tclasses?: string\n\tweapon: WeaponFullInfo\n\trelated: RelItemsShort & RelDomainsShort & RelEnemiesShort\n}): JSX.Element {\n\tconst materials = getAllRelated(related.items, weapon.materialCodes)\n\tconst [materialOnMap, setMaterialOnMap] = useState(materials[0])\n\tconst dataForMap = useMemo(() => {\n\t\tconst srcs = materialOnMap.obtainSources\n\t\tconst markerGroups = []\n\t\taddMarkerGroupsByDomains(markerGroups, getAllRelated(related.domains, srcs.domainCodes))\n\t\taddMarkerGroupsByEnemies(markerGroups, getAllRelated(related.enemies, srcs.enemyCodes))\n\n\t\treturn {\n\t\t\titemData: {\n\t\t\t\titem: materialOnMap,\n\t\t\t\timgSrc: getItemIconSrc(materialOnMap.code),\n\t\t\t},\n\t\t\tmarkerGroups,\n\t\t}\n\t}, [materialOnMap, related])\n\n\treturn (\n\t\t<Card\n\t\t\ttitleEl={\n\t\t\t\tweapon.name\n\t\t\t\t// <>\n\t\t\t\t// \t{weapon.name}{' '}\n\t\t\t\t// \t{ascMaterial && (\n\t\t\t\t// \t\t<ToggleWeaponFav\n\t\t\t\t// \t\t\tweaponCode={weapon.code}\n\t\t\t\t// \t\t\tweapMatCode={ascMaterial.code}\n\t\t\t\t// \t\t\tclasses=\"d-inline align-middle p-1\"\n\t\t\t\t// \t\t/>\n\t\t\t\t// \t)}\n\t\t\t\t// </>\n\t\t\t}\n\t\t\tclasses={classes}\n\t\t\tbodyEl={\n\t\t\t\t<div className=\"\">\n\t\t\t\t\t<div className=\"float-end\">\n\t\t\t\t\t\t<div className=\"d-flex w-100 justify-content-around\">\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\trarity={weapon.rarity}\n\t\t\t\t\t\t\t\tclasses=\"mb-2 large-avatar\"\n\t\t\t\t\t\t\t\tsrc={getWeaponIconLageSrc(weapon.code)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"d-flex justify-content-between w-100\">\n\t\t\t\t\t\t\t{materials.map(m => (\n\t\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\t\tkey={m.code}\n\t\t\t\t\t\t\t\t\trarity={2}\n\t\t\t\t\t\t\t\t\tclasses={`mb-2 mx-1 small-avatar with-padding ${\n\t\t\t\t\t\t\t\t\t\tmaterialOnMap.code !== m.code && 'opacity-50'\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tsrc={getItemIconSrc(m.code)}\n\t\t\t\t\t\t\t\t\tonClick={() => setMaterialOnMap(m)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden\">\n\t\t\t\t\t\t<BlockHeader classes=\"d-inline-block me-1\">\n\t\t\t\t\t\t\t{I18N_WEAPON_TYPE_NAME(weapon.typeCode)}\n\t\t\t\t\t\t</BlockHeader>\n\t\t\t\t\t\t<span className=\"mb-2 text-muted\">\n\t\t\t\t\t\t\t{BULLET} {weapon.obtainSources.map(I18N_WEAPON_OBTAIN_SOURCE_NAME).join(', ')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t\t<div className=\"me-2\">\n\t\t\t\t\t\t\t<div className=\"opacity-75\">{I18N_BASE_ATTACK}</div>\n\t\t\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t\t\t{weapon.atk.base} / {weapon.atk.max}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{weapon.subStat && (\n\t\t\t\t\t\t\t<div className=\"ms-1\">\n\t\t\t\t\t\t\t\t<div className=\"opacity-75\">{I18N_STAT_NAME(weapon.subStat.code)}</div>\n\t\t\t\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t\t\t\t{weapon.subStat.base} / {weapon.subStat.max}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<span className=\"opacity-75\">{I18N_SECONDARY_STAT}</span>\n\t\t\t\t\t\t<div className=\"\">{notesToJSX(weapon.passiveStat)}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<RecommendedFor charCodes={weapon.recommendedTo} />\n\t\t\t\t</div>\n\t\t\t}\n\t\t\tmapEl={dataForMap.markerGroups.length ? <MapWrap isItemFavable={true} {...dataForMap} /> : null}\n\t\t></Card>\n\t)\n}\n\nexport function OtherItemCard({\n\tclasses,\n\titem,\n\trelated,\n}: {\n\tonCloseClick?: () => void\n\tclasses?: string\n\titem: ItemShortInfo\n\trelated: RelItemsShort & RelDomainsShort & RelEnemiesShort\n}): JSX.Element {\n\tconst materials = getAllRelated(related.items, [item.code])\n\tconst materialOnMap = materials[0]\n\tconst dataForMap = useMemo(() => {\n\t\tconst markerGroups: MapWrapMarkerGroup[] = []\n\t\tconst srcs = materialOnMap.obtainSources\n\t\taddMarkerGroupsByDomains(markerGroups, getAllRelated(related.domains, srcs.domainCodes))\n\t\taddMarkerGroupsByEnemies(markerGroups, getAllRelated(related.enemies, srcs.enemyCodes))\n\t\tif (materialOnMap.locations.length > 0) {\n\t\t\tconst icon = getItemIconSrc(materialOnMap.code)\n\t\t\tconst markers =\n\t\t\t\tmaterialOnMap.locations === 'external'\n\t\t\t\t\t? 'external'\n\t\t\t\t\t: materialOnMap.locations.map((loc): MapMarkerRaw => ({ ...loc, icon, style: 'outline' }))\n\t\t\tmarkerGroups.push({ code: materialOnMap.code, title: materialOnMap.name, markers })\n\t\t}\n\n\t\treturn {\n\t\t\titemData: {\n\t\t\t\titem: materialOnMap,\n\t\t\t\timgSrc: getItemIconSrc(materialOnMap.code),\n\t\t\t},\n\t\t\tmarkerGroups,\n\t\t}\n\t}, [materialOnMap, related])\n\n\tconst isItemCharTalentMaterial = useMemo(() => ~item.types.indexOf('character-material-talent'), [item])\n\tconst isItemWeaponPrimaryMaterial = useMemo(() => ~item.types.indexOf('weapon-material-primary'), [item])\n\tconst codesForCalc = useMemo(() => {\n\t\treturn [...item.ancestryCodes.reverse(), item.code]\n\t}, [item])\n\treturn (\n\t\t<Card\n\t\t\ttitleEl={\n\t\t\t\t<>\n\t\t\t\t\t{item.name}{' '}\n\t\t\t\t\t{isItemCharTalentMaterial ? (\n\t\t\t\t\t\t<ToggleTalentMaterialFav itemCode={item.code} classes=\"d-inline align-middle p-1\" />\n\t\t\t\t\t) : null}\n\t\t\t\t\t{isItemWeaponPrimaryMaterial ? (\n\t\t\t\t\t\t<ToggleWeaponPrimaryMaterialFav\n\t\t\t\t\t\t\titemCode={item.code}\n\t\t\t\t\t\t\tclasses=\"d-inline align-middle p-1\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</>\n\t\t\t}\n\t\t\tclasses={classes}\n\t\t\tbodyEl={\n\t\t\t\titem.code === 'brilliant-diamond-gemstone' ? (\n\t\t\t\t\tI18N_OBTAINED_DURING_STORYLINE\n\t\t\t\t) : item.ancestryCodes.length > 0 ? (\n\t\t\t\t\t<div className=\"\">\n\t\t\t\t\t\t{/* <ItemAvatar rarity={3} classes=\"large-avatar float-end\" src={getItemIconSrc(item.code)} /> */}\n\t\t\t\t\t\t{/* <BlockHeader></BlockHeader>\n\t\t\t\t<div className=\"mb-3\">{notesToJSX()}</div> */}\n\t\t\t\t\t\t<BlockHeader>{I18N_ALCHEMY_CALC}</BlockHeader>\n\t\t\t\t\t\t<AlchemyCalculator ancestryCodes={codesForCalc} />\n\t\t\t\t\t</div>\n\t\t\t\t) : null\n\t\t\t}\n\t\t\tmapEl={dataForMap.markerGroups.length ? <MapWrap {...dataForMap} /> : null}\n\t\t></Card>\n\t)\n}\n","import { GI_DomainTypeCode } from '#lib/genshin'\n\nexport function getDomainIconSrc(domainType: GI_DomainTypeCode): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/domains/${domainType}.png`\n}\n","export function getEnemyIconSrc(enemyCode: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/enemies/${enemyCode}.png`\n}\n","export default __webpack_public_path__ + \"Element_Anemo.f809fde3.png\";","export default __webpack_public_path__ + \"Element_Cryo.019d72f9.png\";","export default __webpack_public_path__ + \"Element_Electro.342332ac.png\";","export default __webpack_public_path__ + \"Element_Geo.94f4e68a.png\";","export default __webpack_public_path__ + \"Element_Hydro.f2f8bd8a.png\";","import element_Anemo from '#src/media/Element_Anemo.png'\n// import element_Dendro from '#src/media/Element_Dendro.png'\nimport element_Cryo from '#src/media/Element_Cryo.png'\nimport element_Electro from '#src/media/Element_Electro.png'\nimport element_Geo from '#src/media/Element_Geo.png'\nimport element_Hydro from '#src/media/Element_Hydro.png'\nimport element_Pyro from '#src/media/Element_Pyro.png'\n\nimport type { GI_ElementCode } from '#lib/genshin'\n\nexport type GI_Element = { readonly code: GI_ElementCode; imgSrc: string }\nexport const elements: GI_Element[] = [\n\t{ code: 'pyro' as const, imgSrc: element_Pyro },\n\t{ code: 'hydro' as const, imgSrc: element_Hydro },\n\t{ code: 'anemo' as const, imgSrc: element_Anemo },\n\t{ code: 'electro' as const, imgSrc: element_Electro },\n\t// { code: 'dendro' as const , imgSrc: element_Dendro },\n\t{ code: 'cryo' as const, imgSrc: element_Cryo },\n\t{ code: 'geo' as const, imgSrc: element_Geo },\n]\n","export default __webpack_public_path__ + \"Element_Pyro.f65c2e38.png\";","// export type Character = {\n// \tcode: string,\n// \telement:\n// }\n\n// export function getCharactersWithElement = (characters, elementCode) = {\n// \treturn characters.filter(c=> c.element = elementCode)\n// }\n\nfunction unprefixTraveler(code: string) {\n\treturn code.startsWith('traveler-') ? 'traveler' : code\n}\n\nexport function getCharacterAvatarSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/avatars/${unprefixTraveler(code)}.png`\n}\n\nexport function getCharacterAvatarLargeSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/avatars/${unprefixTraveler(code)}.large.png`\n}\n\nexport function getCharacterPortraitSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/portraits/${unprefixTraveler(code)}.png`\n}\n\nexport function getCharacterSilhouetteSrc(code: string): string {\n\treturn BUNDLE_ENV.ASSET_PATH + `media/characters/silhouettes/${unprefixTraveler(code)}.svg`\n}\n","import { createContext } from 'preact'\nimport { useCallback, useContext, useRef, useState } from 'preact/hooks'\n\nimport { GI_RarityCode } from '#lib/genshin'\nimport {\n\tArtifactFullInfo,\n\tDomainShortInfo,\n\tEnemyShortInfo,\n\tItemShortInfo,\n\tWeaponFullInfo,\n} from '#lib/parsing/combine'\nimport { mustBeNever } from '#src/../../lib/utils/values'\nimport { A } from '#src/routes/router'\nimport { getAllArtifacts } from '#src/utils/artifacts'\nimport { ArtifactCard, CardDescMobileWrap, WeaponCard } from './dd-cards'\n\nimport './item-cards.scss'\nimport { elements } from '#src/utils/elements'\nimport { getCharacterAvatarSrc } from '#src/utils/characters'\nimport { getCoverArtifactForSet } from '#src/modules/builds/common'\n\nexport function getRarityBorder(r: GI_RarityCode): string {\n\treturn r === 5 ? 'border-warning' : 'border-light'\n}\n\ninterface ItemAvatarCommonProps {\n\trarity?: GI_RarityCode\n\tisNoBg?: boolean\n\tclasses?: string\n\thref?: string\n\tonClick?(): unknown\n\tbadgeTopStart?: string | null | JSX.Node\n\tbadgeTopEnd?: string | null | JSX.Node\n\tddComponent?: JSX.Element\n}\ninterface ItemAvatarProps extends ItemAvatarCommonProps {\n\tsrc: string\n}\ninterface CharacterAvatarProps extends ItemAvatarCommonProps {\n\tcode: string //todo charcode\n}\nexport function ItemAvatar({\n\tsrc,\n\trarity,\n\tclasses = '',\n\thref,\n\tisNoBg,\n\tonClick,\n\tbadgeTopStart,\n\tbadgeTopEnd,\n\tddComponent,\n}: ItemAvatarProps): JSX.Element {\n\t;['bg-2', 'bg-3', 'bg-4', 'bg-5']\n\tconst rarityClass = isNoBg ? '' : rarity ? 'bg-' + rarity : 'bg-dark'\n\n\tconst elRef = useRef<HTMLAnchorElement>(null)\n\tconst [isExpanded, setIsExpanded] = useState(false)\n\tconst closeDd = useCallback(() => isExpanded && setIsExpanded(false), [setIsExpanded, isExpanded])\n\tconst openDd = useCallback(() => !isExpanded && setIsExpanded(true), [setIsExpanded, isExpanded])\n\tconst pointerClass = ddComponent || onClick ? 'c-pointer' : ''\n\tconst onClickLocal = useCallback(() => {\n\t\topenDd && openDd()\n\t\tonClick && onClick()\n\t}, [openDd, onClick])\n\treturn (\n\t\t<DdContext.Provider value={{ onClickAway: closeDd }}>\n\t\t\t<A\n\t\t\t\thref={href}\n\t\t\t\tclassName={`item-avatar position-relative rounded-circle d-inline-block ${pointerClass} ${rarityClass} ${classes}`}\n\t\t\t\tinnerRef={elRef}\n\t\t\t\tonClick={onClickLocal}\n\t\t\t>\n\t\t\t\t<img className=\"image\" src={src} />\n\t\t\t\t{badgeTopStart && (\n\t\t\t\t\t<span className=\"position-absolute top-0 start-0 translate-middle badge rounded-pill opacity-75 small\">\n\t\t\t\t\t\t{badgeTopStart}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t\t{badgeTopEnd && (\n\t\t\t\t\t<span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill opacity-75 small\">\n\t\t\t\t\t\t{badgeTopEnd}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t\t{/* <span className=\"position-absolute top-0 start-0 translate-middle badge rounded-pill bg-primary border border-light\">\n\t\t\t\t4\n\t\t\t</span> */}\n\t\t\t\t{isExpanded && elRef.current && ddComponent && (\n\t\t\t\t\t<CardDescMobileWrap onClickAway={closeDd} targetEl={elRef.current}>\n\t\t\t\t\t\t{ddComponent}\n\t\t\t\t\t</CardDescMobileWrap>\n\t\t\t\t)}\n\t\t\t</A>\n\t\t</DdContext.Provider>\n\t)\n}\nconst codeToBadge = (code: string) => {\n\tconst e = elements.find(e => code === `traveler-${e.code}`)\n\treturn e ? <img className=\"badge-element-icon d-block ms-n1 mb-n1\" src={e.imgSrc} /> : null\n}\nexport function CharacterAvatar(props: CharacterAvatarProps) {\n\tconst classesLocal = props.rarity\n\t\t? `${props.classes} border ${getRarityBorder(props.rarity)}`\n\t\t: props.classes\n\treturn (\n\t\t<ItemAvatar\n\t\t\t{...props}\n\t\t\trarity={undefined} //     ,   \n\t\t\tclasses={classesLocal}\n\t\t\tsrc={getCharacterAvatarSrc(props.code)}\n\t\t\tbadgeTopEnd={codeToBadge(props.code)}\n\t\t/>\n\t)\n}\nfunction ItemLabel({\n\trarity,\n\tclasses = '',\n\tchildren,\n}: {\n\trarity?: GI_RarityCode | null\n\tclasses?: string\n\tchildren: JSX.Nodes\n}): JSX.Element {\n\tconst rarityClass =\n\t\trarity === 5 //\n\t\t\t? 'text-warning'\n\t\t\t: rarity === 4\n\t\t\t? 'text-primary'\n\t\t\t: ''\n\t//todo c-pointer text-decoration-underline-dotted  \n\treturn <label class={`${classes} ${rarityClass}`}>{children}</label>\n}\n\nfunction ItemDd({\n\tclasses = '',\n\tchildren,\n\tddComponent,\n}: {\n\tclasses?: string\n\tddComponent?: JSX.Element | null\n\tchildren: JSX.Nodes\n}): JSX.Element {\n\tconst elRef = useRef<HTMLButtonElement>(null)\n\tconst [isExpanded, setIsExpanded] = useState(false)\n\n\tconst closeDd = useCallback(() => setIsExpanded(false), [])\n\tconst openDd = useCallback(() => setIsExpanded(true), [])\n\n\tconst pointerClass = ddComponent ? 'c-pointer' : ''\n\treturn (\n\t\t<DdContext.Provider value={{ onClickAway: closeDd }}>\n\t\t\t<button\n\t\t\t\tclassName={`btn-reset ${pointerClass} ${classes}`}\n\t\t\t\tref={elRef}\n\t\t\t\tonClick={openDd}\n\t\t\t\tdisabled={!ddComponent}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t\t{isExpanded && elRef.current && ddComponent && (\n\t\t\t\t\t<CardDescMobileWrap onClickAway={closeDd} targetEl={elRef.current}>\n\t\t\t\t\t\t{ddComponent}\n\t\t\t\t\t</CardDescMobileWrap>\n\t\t\t\t)}\n\t\t\t</button>\n\t\t</DdContext.Provider>\n\t)\n}\n\nexport const ItemsDataContext = createContext({\n\tweapons: new Map<string, WeaponFullInfo>(),\n\tartifacts: new Map<string, ArtifactFullInfo>(),\n\tdomains: new Map<string, DomainShortInfo>(),\n\tenemies: new Map<string, EnemyShortInfo>(),\n\titems: new Map<string, ItemShortInfo>(),\n})\n\nexport function ItemLabelWithDd({\n\tclasses = '',\n\ttype,\n\tcode,\n\tchildren,\n}: {\n\tclasses?: string\n\ttype: 'weapon' | 'artifact'\n\tcode: string\n\tchildren: JSX.Nodes\n}): JSX.Element {\n\tconst maps = useContext(ItemsDataContext)\n\n\tlet ddComp: JSX.Element | undefined = undefined\n\tlet rarity: GI_RarityCode | undefined = undefined\n\tif (type === 'weapon') {\n\t\tconst weapon = maps.weapons.get(code)\n\t\tif (weapon) {\n\t\t\tddComp = <WeaponCard weapon={weapon} related={maps} />\n\t\t\trarity = weapon.rarity\n\t\t}\n\t} else if (type === 'artifact') {\n\t\tconst artifacts = getAllArtifacts(code, maps.artifacts)\n\t\tif (artifacts.length > 0) {\n\t\t\tconst coverArtifact = getCoverArtifactForSet(code, artifacts)\n\t\t\tddComp = <ArtifactCard title={coverArtifact.name} artifacts={artifacts} related={maps} />\n\t\t\trarity = artifacts[0].rarity\n\t\t}\n\t} else mustBeNever(type)\n\n\tconst interactiveLabelClass = ddComp ? 'text-decoration-underline-dotted' : ''\n\treturn (\n\t\t<ItemDd ddComponent={ddComp} classes={`d-inline ${classes}`}>\n\t\t\t<ItemLabel classes={`${interactiveLabelClass} c-inherit`} rarity={rarity}>\n\t\t\t\t{children}\n\t\t\t</ItemLabel>\n\t\t</ItemDd>\n\t)\n}\n\nexport const DdContext = createContext({\n\tonClickAway: () => {\n\t\treturn\n\t},\n})\n\nexport function LabeledItemAvatar({\n\timgSrc,\n\trarity,\n\tclasses = '',\n\tavatarClasses = '',\n\ttitle,\n\tavatarTopStartBadge,\n\tavatarTopEndBadge,\n\tddComponent,\n\tisNoBg = false,\n}: {\n\tisNoBg?: boolean\n\timgSrc: string\n\trarity?: GI_RarityCode\n\ttitle: string\n\tclasses?: string\n\tavatarClasses?: string\n\tavatarTopStartBadge?: string\n\tavatarTopEndBadge?: string\n\tddComponent?: JSX.Element\n}): JSX.Element {\n\tconst interactiveLabelClass = ddComponent ? 'text-decoration-underline-dotted' : ''\n\treturn (\n\t\t<ItemDd ddComponent={ddComponent} classes={`w-100 text-nowrap ${classes}`}>\n\t\t\t<ItemAvatar\n\t\t\t\tclasses={`small-avatar align-middle ${avatarClasses}`}\n\t\t\t\tsrc={imgSrc}\n\t\t\t\tbadgeTopStart={avatarTopStartBadge}\n\t\t\t\tbadgeTopEnd={avatarTopEndBadge}\n\t\t\t\tisNoBg={isNoBg}\n\t\t\t/>\n\t\t\t<ItemLabel\n\t\t\t\tclasses={'text-wrap align-middle lh-1 ps-1 mw-75 c-inherit ' + interactiveLabelClass}\n\t\t\t\trarity={rarity}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</ItemLabel>\n\t\t</ItemDd>\n\t)\n}\n","import { useMemo, useState } from 'preact/hooks'\n\nimport { GI_ElementCode, GI_WeaponTypeCode } from '#lib/genshin'\nimport { charactersShortList } from '#src/api/generated'\nimport { CharacterAvatar, ItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport { elements } from '#src/utils/elements'\nimport { weaponTypes } from '#src/utils/weapons'\n\nexport function CharacterPickerMobile() {\n\tconst [selectedElementCode, setSelectedElementCode] = useState<null | GI_ElementCode>(null)\n\tconst selectElement = el => setSelectedElementCode(selectedElementCode === el.code ? null : el.code)\n\tconst [selectedWeaponTypeCode, setSelectedWeaponTypeCode] = useState<null | GI_WeaponTypeCode>(null)\n\n\tconst selectWeaponType = wp =>\n\t\tsetSelectedWeaponTypeCode(selectedWeaponTypeCode === wp.code ? null : wp.code)\n\n\tconst elementGroups = useMemo(() => {\n\t\tconst filteredElements = selectedElementCode\n\t\t\t? elements.filter(x => x.code === selectedElementCode)\n\t\t\t: elements\n\t\treturn filteredElements\n\t\t\t.map(element => ({\n\t\t\t\telement,\n\t\t\t\tcharacters: charactersShortList.filter(\n\t\t\t\t\tx =>\n\t\t\t\t\t\tx.elementCode === element.code &&\n\t\t\t\t\t\t(selectedWeaponTypeCode === null || x.weaponTypeCode === selectedWeaponTypeCode),\n\t\t\t\t),\n\t\t\t}))\n\t\t\t.filter(x => x.characters.length > 0)\n\t}, [selectedElementCode, selectedWeaponTypeCode])\n\n\tconst rows = elementGroups.map(({ element, characters }) => (\n\t\t<div className=\"row py-2\" key={element.code}>\n\t\t\t<div className=\"col-2 py-1\">\n\t\t\t\t<ItemAvatar isNoBg={true} classes=\"d-block mx-auto muted-icon\" src={element.imgSrc} />\n\t\t\t</div>\n\t\t\t<div className=\"col py-31\">\n\t\t\t\t{characters.map(x => (\n\t\t\t\t\t<CharacterAvatar\n\t\t\t\t\t\tcode={x.code}\n\t\t\t\t\t\trarity={x.rarity}\n\t\t\t\t\t\thref={'/builds/' + x.code}\n\t\t\t\t\t\tclasses={`m-1`}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t))\n\n\treturn (\n\t\t<div className=\"character-picker-mobile\">\n\t\t\t<div className=\"m-auto text-center my-3\">\n\t\t\t\t<div className=\"m-auto\">Filter </div>\n\t\t\t\t<div className=\"d-inline\">\n\t\t\t\t\t<div className=\"d-inline\">\n\t\t\t\t\t\t{elements.map(el => (\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tclasses={`small-avatar bg-secondary p-1 m-1 ${\n\t\t\t\t\t\t\t\t\tselectedElementCode && selectedElementCode !== el.code ? 'opacity-25' : ''\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tkey={el.code}\n\t\t\t\t\t\t\t\tsrc={el.imgSrc}\n\t\t\t\t\t\t\t\tonClick={() => selectElement(el)} //todo      ?\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<br />\n\t\t\t\t\t<div className=\"d-inline\">\n\t\t\t\t\t\t{weaponTypes.map(wt => (\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tclasses={`small-avatar bg-secondary p-1 m-1 ${\n\t\t\t\t\t\t\t\t\tselectedWeaponTypeCode && selectedWeaponTypeCode !== wt.code\n\t\t\t\t\t\t\t\t\t\t? 'opacity-25'\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tkey={wt.code}\n\t\t\t\t\t\t\t\tsrc={wt.imgSrc}\n\t\t\t\t\t\t\t\tonClick={() => selectWeaponType(wt)} //todo      ?\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{rows.length === 0 ? 'not yet' : rows}\n\t\t</div>\n\t)\n}\n","import { charactersShortList } from '#src/api/generated'\nimport { CharacterAvatar, ItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport { elements } from '#src/utils/elements'\nimport { GI_WeaponType, weaponTypes } from '#src/utils/weapons'\nimport { CharacterPickerMobile } from './mobile-character-picker'\n\nimport './character-picker.scss'\n\nfunction CharacterPickerDesktop({ weaponTypes }: { weaponTypes: GI_WeaponType[] }) {\n\treturn (\n\t\t<>\n\t\t\t{elements.map((el, i, arr) => {\n\t\t\t\tconst isLastRowClass = i + 1 === arr.length ? 'rounded-bottom' : ''\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"row\" key={el.code}>\n\t\t\t\t\t\t<div className=\"col col-2 pt-3 pb-2 opacity-50 rounded-start\">\n\t\t\t\t\t\t\t<ItemAvatar classes=\"d-block mx-auto\" isNoBg={true} src={el.imgSrc} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{weaponTypes.map(wType => (\n\t\t\t\t\t\t\t<div className={`col col-2 pt-3 pb-2 px-2 ${isLastRowClass}`} key={wType.code}>\n\t\t\t\t\t\t\t\t{charactersShortList\n\t\t\t\t\t\t\t\t\t.filter(x => x.elementCode === el.code && x.weaponTypeCode === wType.code)\n\t\t\t\t\t\t\t\t\t.map(x => (\n\t\t\t\t\t\t\t\t\t\t<CharacterAvatar\n\t\t\t\t\t\t\t\t\t\t\tkey={x.code}\n\t\t\t\t\t\t\t\t\t\t\tcode={x.code}\n\t\t\t\t\t\t\t\t\t\t\trarity={x.rarity}\n\t\t\t\t\t\t\t\t\t\t\thref={'/builds/' + x.code}\n\t\t\t\t\t\t\t\t\t\t\tclasses={`mb-1 me-1 mb-xxl-2 me-xxl-2`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})}\n\t\t</>\n\t)\n}\n\nexport function CharacterPicker() {\n\treturn (\n\t\t<div className=\"character-picker\">\n\t\t\t<div class=\"d-none d-xl-block container overflow-hidden big-table\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col col-2 pb-3 pt-2\"></div>\n\t\t\t\t\t{weaponTypes.map((wt, i) => (\n\t\t\t\t\t\t<div className=\"col col-2 pb-3 pt-2 rounded-top \" key={wt.code}>\n\t\t\t\t\t\t\t<ItemAvatar classes=\"d-block mx-auto\" isNoBg={true} src={wt.imgSrc} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<CharacterPickerDesktop weaponTypes={weaponTypes} />\n\t\t\t</div>\n\t\t\t<div class=\"d-xl-none\">\n\t\t\t\t<CharacterPickerMobile />\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { useEffect, useMemo } from 'preact/hooks'\n\nimport { charactersShortList } from '#src/api/generated'\nimport { I18N_FAV_CHARACTERS } from '#src/i18n/i18n'\nimport { MAX_SMTHS_TO_STORE } from '#src/modules/builds/common'\nimport { useVersionedStorage } from '#src/utils/hooks'\nimport { SV_FAV_CHAR_CODES } from '#src/utils/local-storage-keys'\nimport { CharacterAvatar } from '../item-cards/item-avatars'\n\nconst shortListReversed = charactersShortList.reverse()\nexport function FavoriteCharacters({\n\tclasses = '',\n\tonCharacterSelect,\n\tshoudSelectFirst,\n\tnavigateToCharacter,\n\tselectedCharacterCode,\n\tblockLabel = I18N_FAV_CHARACTERS,\n}: {\n\tclasses?: string\n\tonCharacterSelect?(characterCode: string): void\n\tshoudSelectFirst?: boolean\n\tnavigateToCharacter: boolean\n\tselectedCharacterCode?: string\n\tblockLabel?: string\n}): JSX.Element {\n\tconst [favCharCodes] = useVersionedStorage(SV_FAV_CHAR_CODES)\n\t//todo sort characters by release date\n\tconst charactersShortListCodes = useMemo(\n\t\t() => shortListReversed.map(c => c.code).filter(c => (~favCharCodes.indexOf(c) ? false : c)),\n\t\t[favCharCodes],\n\t)\n\tconst characterCodes =\n\t\tfavCharCodes.length < MAX_SMTHS_TO_STORE\n\t\t\t? favCharCodes.concat(charactersShortListCodes.slice(0, MAX_SMTHS_TO_STORE - favCharCodes.length))\n\t\t\t: favCharCodes.slice(0, MAX_SMTHS_TO_STORE)\n\t// const optsForSelect = useMemo(\n\t// \t//todo     \n\t// \t() =>\n\t// \t\t(characterCodes.length > 4 ? characterCodes.slice(4, characterCodes.length) : []).map(c => {\n\t// \t\t\treturn { title: c, code: c }\n\t// \t\t}),\n\t// \t[characterCodes],\n\t// )\n\t// const onSelectViaSelect = useCallback(\n\t// \topt => {\n\t// \t\tonCharacterSelect && onCharacterSelect(opt.code)\n\t// \t},\n\t// \t[onCharacterSelect],\n\t// )\n\n\tuseEffect(() => {\n\t\tshoudSelectFirst && onCharacterSelect && onCharacterSelect(characterCodes[0])\n\t}, [onCharacterSelect, characterCodes, shoudSelectFirst])\n\n\tconst charactersElems = useMemo(\n\t\t() =>\n\t\t\tcharacterCodes.map(code => (\n\t\t\t\t<CharacterAvatar\n\t\t\t\t\tcode={code}\n\t\t\t\t\t// rarity={charactersShortList.find(x => x.code === code)?.rarity ?? 5}\n\t\t\t\t\tclasses={`me-1 small-avatar ${\n\t\t\t\t\t\tselectedCharacterCode && selectedCharacterCode !== code && 'opacity-50'\n\t\t\t\t\t}`}\n\t\t\t\t\tkey={code}\n\t\t\t\t\thref={navigateToCharacter ? '/builds/' + code : undefined}\n\t\t\t\t\tonClick={() => onCharacterSelect && onCharacterSelect(code)}\n\t\t\t\t/>\n\t\t\t)),\n\t\t[characterCodes, onCharacterSelect, navigateToCharacter, selectedCharacterCode],\n\t)\n\treturn (\n\t\t<div className={`favorite-characters ${classes}`}>\n\t\t\t<label className=\"opacity-75 pe-2 align-middle py-1\">{blockLabel}:</label>\n\t\t\t<br className=\"d-xl-none\" />\n\t\t\t{charactersElems}\n\t\t\t{/* {optsForSelect.length ? (\n\t\t\t\t<SimpleSelect\n\t\t\t\t\tclasses=\"d-inline w-auto align-top\"\n\t\t\t\t\toptions={optsForSelect}\n\t\t\t\t\tonOptionSelect={onSelectViaSelect}\n\t\t\t\t\tselectedOption={null}\n\t\t\t\t/>\n\t\t\t) : null} */}\n\t\t</div>\n\t)\n}\n","import './characters.scss'\n\nexport function CharacterPortrait({ src, classes = '' }: { src: string; classes?: string }): JSX.Element {\n\treturn <img className={`character-portrait ${classes}`} src={src} />\n}\n","import { useMemo } from 'preact/hooks'\n\nimport { arrOrItemToArr } from '#lib/utils/collections'\nimport { CharacterFullInfoWithRelated } from '#src/../../lib/parsing/combine'\nimport { getAllRelated, MapAllByCode } from '#src/api/utils'\nimport { BlockHeader } from '#src/components/block-header'\nimport { CharacterPortrait } from '#src/components/characters'\nimport { CentredSpinner } from '#src/components/spinners'\nimport { BtnTabGroup, Tabs, useSelectable } from '#src/components/tabs'\nimport { OtherItemCard, WeaponCard } from '#src/containers/item-cards/dd-cards'\nimport { ItemAvatar, ItemsDataContext, LabeledItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport {\n\tI18N_ART_STATS_PRIORITY,\n\tI18N_ART_TYPE,\n\tI18N_ARTIFACTS,\n\tI18N_ASC_MATERIALS,\n\tI18N_BACK,\n\tI18N_CONJUCTIONS,\n\tI18N_NOTES,\n\tI18N_STAT_NAME,\n\tI18N_SUBSTATS_PRIORITY,\n\tI18N_TALENT_NAME,\n\tI18N_TALENTS_PRIORITY,\n\tI18N_WEAPON_REFINE,\n\tI18N_WEAPON_STACKS_COUNT,\n\tI18N_WEAPONS,\n} from '#src/i18n/i18n'\nimport { A } from '#src/routes/router'\nimport { getArtifactTypeIconSrc } from '#src/utils/artifacts'\nimport {\n\tgetCharacterAvatarLargeSrc,\n\tgetCharacterPortraitSrc,\n\tgetCharacterSilhouetteSrc,\n} from '#src/utils/characters'\nimport { getItemIconSrc } from '#src/utils/items'\nimport { getWeaponIconSrc } from '#src/utils/weapons'\nimport {\n\tBuildRoleOrDummy,\n\tCIRCLET_GOBLET_SANDS,\n\tgenArtifactAdvice,\n\tgenArtMainStatDetail,\n\tgenNotes,\n\tgenSeeCharNotes,\n\tgenSimpleList,\n\tgetRoleData,\n\tItemsJoinerWrap,\n\tItemsListGroupWrap,\n\tmakeRoleTitle,\n\tnotesToJSX,\n\tToggleCharFav,\n} from './common'\n\nimport './character-build-detailed.scss'\n\nexport function CharacterBuildDetailed({\n\tbuild,\n\tisUpdating,\n}: {\n\tbuild: MapAllByCode<CharacterFullInfoWithRelated>\n\tisUpdating: boolean\n}): JSX.Element {\n\tconst roleTabs: BuildRoleOrDummy[] = build.character.roles\n\tconst characterCode = build.character.code\n\tconst [selectedRoleTab, setSelectedRoleTab] = useSelectable(roleTabs, [characterCode])\n\n\tconst weaponListBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\tif (!role) return []\n\t\treturn role.weapons.advices.map((advice, i) => {\n\t\t\tconst isInList = advice.similar.length > 1\n\t\t\tconst map = advice.similar.map((item, i) => {\n\t\t\t\tconst weapon = build.weapons.find(x => x.code === item.code)\n\t\t\t\tif (!weapon) return null\n\t\t\t\tconst isLastInList = i >= advice.similar.length - 1\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<LabeledItemAvatar\n\t\t\t\t\t\t\timgSrc={getWeaponIconSrc(weapon.code)}\n\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\tweapon.name +\n\t\t\t\t\t\t\t\t(item.refine === null ? '' : ` [${I18N_WEAPON_REFINE(item.refine)}]`) +\n\t\t\t\t\t\t\t\t(item.stacks === null ? '' : ` (${I18N_WEAPON_STACKS_COUNT(item.stacks)})`)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trarity={weapon.rarity}\n\t\t\t\t\t\t\tavatarClasses=\"with-padding\"\n\t\t\t\t\t\t\tclasses={`small ${!isInList || isLastInList ? 'mb-1' : ''}`}\n\t\t\t\t\t\t\tddComponent={<WeaponCard weapon={weapon} related={build.maps} />}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{genNotes(item)}\n\t\t\t\t\t\t{genSeeCharNotes(item)}\n\t\t\t\t\t\t{isInList && !isLastInList && (\n\t\t\t\t\t\t\t<ItemsJoinerWrap>{I18N_CONJUCTIONS.or}</ItemsJoinerWrap>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\t})\n\t\t\treturn (\n\t\t\t\t<li key={i} className=\"pt-1\">\n\t\t\t\t\t{isInList ? <ItemsListGroupWrap>{map}</ItemsListGroupWrap> : map}\n\t\t\t\t</li>\n\t\t\t)\n\t\t})\n\t}, [build, selectedRoleTab])\n\n\tconst artifactsListBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\tif (!role) return []\n\n\t\treturn role.artifacts.sets.map((set, i) => {\n\t\t\treturn (\n\t\t\t\t<li key={i} className=\"pt-1\">\n\t\t\t\t\t{genArtifactAdvice(set.arts, build)}\n\t\t\t\t\t{genNotes(set)}\n\t\t\t\t\t{genSeeCharNotes(set)}\n\t\t\t\t</li>\n\t\t\t)\n\t\t})\n\t}, [build, selectedRoleTab])\n\tconst artifactStatsAndSkillsBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<BlockHeader>{I18N_ART_STATS_PRIORITY}</BlockHeader>\n\t\t\t\t<ul className=\"mb-1 list-unstyled ms-1 small\">\n\t\t\t\t\t{CIRCLET_GOBLET_SANDS.map(ac => (\n\t\t\t\t\t\t<li className=\"my-1 ms-1\">\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tsrc={getArtifactTypeIconSrc(ac)}\n\t\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\t\tclasses=\"small-avatar small with-padding align-middle\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<b className=\"text-muted\">{I18N_ART_TYPE(ac)}  </b>\n\t\t\t\t\t\t\t{genArtMainStatDetail(role, ac)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"opacity-75 small\">\n\t\t\t\t\t{notesToJSX(role.mainStats.notes)} {genSeeCharNotes(role.mainStats)}\n\t\t\t\t</div>\n\t\t\t\t<BlockHeader classes=\"mt-3\">{I18N_SUBSTATS_PRIORITY}</BlockHeader>\n\t\t\t\t<ol className=\"mb-1 small\">\n\t\t\t\t\t{role.subStats.advices.map(advice => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t{genSimpleList(advice.codes.map(I18N_STAT_NAME))} {genNotes(advice)}\n\t\t\t\t\t\t\t\t{genSeeCharNotes(advice)}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</ol>\n\t\t\t\t<div className=\"opacity-75 small\">\n\t\t\t\t\t{notesToJSX(role.subStats.notes)} {genSeeCharNotes(role.subStats)}\n\t\t\t\t</div>\n\t\t\t\t<BlockHeader classes=\"mt-3\">{I18N_TALENTS_PRIORITY}</BlockHeader>\n\t\t\t\t<ol className=\"small\">\n\t\t\t\t\t{role.talents.advices.map(advice => {\n\t\t\t\t\t\treturn <li>{arrOrItemToArr(advice).map(I18N_TALENT_NAME)}</li>\n\t\t\t\t\t})}\n\t\t\t\t</ol>\n\t\t\t\t<div className=\"opacity-75 small\">\n\t\t\t\t\t{notesToJSX(role.talents.notes)} {genSeeCharNotes(role.subStats)}\n\t\t\t\t</div>\n\t\t\t</>\n\t\t)\n\t}, [build, selectedRoleTab])\n\tconst notesBlock = useMemo(() => {\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div>{notesToJSX(role.tips)}</div>\n\t\t\t\t<div>{notesToJSX(role.notes)}</div>\n\t\t\t\t<div>{notesToJSX(build.character.credits)}</div>\n\t\t\t</>\n\t\t)\n\t}, [build, selectedRoleTab])\n\tconst materialsBlock = useMemo(() => {\n\t\tconst materials = getAllRelated(build.maps.items, build.character.materialCodes)\n\t\treturn (\n\t\t\t<div className=\"w-100 d-flex flex-wrap justify-content-between\">\n\t\t\t\t{materials.map(m => (\n\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\tclasses=\"mb-2 mx-1 small-avatar with-padding\"\n\t\t\t\t\t\tsrc={getItemIconSrc(m.code)}\n\t\t\t\t\t\tddComponent={<OtherItemCard item={m} related={build.maps} />}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t)\n\t}, [build])\n\tconst CharacterDetailDesktop = (\n\t\t<div className=\"d-none d-xl-block\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col col-3 p-0\">\n\t\t\t\t\t\t<A className=\"btn btn-secondary align-self-center\" type=\"submit\" href=\"/builds\">\n\t\t\t\t\t\t\t<span className=\"fs-4 lh-1 opacity-75\"> </span> {I18N_BACK}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col col-9\">\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\ttabs={roleTabs}\n\t\t\t\t\t\t\ttitleFunc={makeRoleTitle}\n\t\t\t\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col col-3 pt-3\">\n\t\t\t\t\t\t<div className=\"position-relative\">\n\t\t\t\t\t\t\t<CharacterPortrait src={getCharacterPortraitSrc(characterCode)} classes=\"w-100\" />\n\t\t\t\t\t\t\t<div className=\"mt-3\">{materialsBlock}</div>\n\t\t\t\t\t\t\t<ToggleCharFav\n\t\t\t\t\t\t\t\tclasses=\"fs-3 position-absolute top-0 end-0\"\n\t\t\t\t\t\t\t\tcharacterCode={characterCode}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col col-9\">\n\t\t\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t\t\t<div className=\"flex-fill w-33 p-3\">\n\t\t\t\t\t\t\t\t<BlockHeader>{I18N_WEAPONS}</BlockHeader>\n\t\t\t\t\t\t\t\t<ol className=\"items-list\">{weaponListBlock}</ol>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-fill w-33 p-3\">\n\t\t\t\t\t\t\t\t<BlockHeader>{I18N_ARTIFACTS}</BlockHeader>\n\t\t\t\t\t\t\t\t<ol className=\"items-list\">{artifactsListBlock}</ol>\n\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex-fill w-33 p-3\">{artifactStatsAndSkillsBlock}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"w-100\">\n\t\t\t\t\t\t\t<div className=\"p-3\">\n\t\t\t\t\t\t\t\t<BlockHeader>{I18N_NOTES}</BlockHeader>\n\t\t\t\t\t\t\t\t<div className=\"text-muted\">{notesBlock}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n\tconst CharacterDetailMobile = (\n\t\t<div className=\"d-xl-none\">\n\t\t\t<CharacterPortrait\n\t\t\t\tsrc={getCharacterSilhouetteSrc(characterCode)}\n\t\t\t\tclasses=\"w-75 character-portrait-mobile\"\n\t\t\t/>\n\t\t\t<BtnTabGroup\n\t\t\t\ttabs={roleTabs}\n\t\t\t\ttitleFunc={makeRoleTitle}\n\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\tclasses=\"w-100 btn-group-sm mt-3 mb-0\"\n\t\t\t/>\n\t\t\t<div className=\"\">\n\t\t\t\t<div className=\"my-3\">\n\t\t\t\t\t<BlockHeader>{I18N_ASC_MATERIALS}</BlockHeader>\n\t\t\t\t\t{materialsBlock}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"my-3\">\n\t\t\t\t\t<BlockHeader>{I18N_ARTIFACTS}</BlockHeader>\n\t\t\t\t\t<ol className=\"items-list\">{artifactsListBlock}</ol>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"my-3\">{artifactStatsAndSkillsBlock}</div>\n\t\t\t\t<div className=\"my-3\">\n\t\t\t\t\t<BlockHeader>{I18N_WEAPONS}</BlockHeader>\n\t\t\t\t\t<ol className=\"items-list\">{weaponListBlock}</ol>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<BlockHeader>{I18N_NOTES}</BlockHeader>\n\t\t\t\t<div className=\"opacity-75\">{notesBlock}</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n\treturn (\n\t\t<ItemsDataContext.Provider value={build.maps}>\n\t\t\t<div className=\"character-build-detailed mt-2 mb-3 position-relative\">\n\t\t\t\t<div className=\"d-flex d-xl-none mt-3\">\n\t\t\t\t\t<A className=\"btn btn-secondary align-self-center\" type=\"submit\" href=\"/builds\">\n\t\t\t\t\t\t<span className=\"fs-4 lh-1 opacity-75\"> </span> {I18N_BACK}\n\t\t\t\t\t</A>\n\t\t\t\t\t<h5 className=\"ps-3 pe-1 m-0 align-self-center w-50 d-inline-block overflow-hidden text-truncate text-wrap\">\n\t\t\t\t\t\t{build.character.name}\n\t\t\t\t\t</h5>\n\t\t\t\t\t<div className=\"align-self-end ms-auto d-flex\">\n\t\t\t\t\t\t<ToggleCharFav classes=\"fs-3\" characterCode={characterCode} />\n\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\tsrc={getCharacterAvatarLargeSrc(characterCode)}\n\t\t\t\t\t\t\tclasses=\"large-avatar mt-n5 align-self-end\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{isUpdating ? <CentredSpinner /> : null}\n\t\t\t\t<div className={isUpdating ? 'opacity-50 pe-none' : ''}>\n\t\t\t\t\t{CharacterDetailDesktop}\n\t\t\t\t\t{CharacterDetailMobile}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ItemsDataContext.Provider>\n\t)\n}\n","import { BtnTabGroup } from '#src/components/tabs'\nimport { useCallback, useMemo, useState } from 'preact/hooks'\nconst cats = [\n\t{ title: 'Weapons', code: 'weapons' },\n\t{ title: 'Artifacts', code: 'artifacts' },\n]\nconst weapons = new Array(23).fill('1') //todo\nexport function WeaponsList() {\n\tconst [selectedCatCode, setSelectedCatCode] = useState<string | null>(null)\n\tconst selectCat = useCallback(tab => setSelectedCatCode(tab.code), [setSelectedCatCode])\n\tconst selectedCat = useMemo(\n\t\t() => cats.find(c => c.code === selectedCatCode) || cats[0],\n\t\t[selectedCatCode],\n\t)\n\tconsole.log(weapons)\n\treturn (\n\t\t<div>\n\t\t\t{weapons.map(w => (\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col\">1</div>\n\t\t\t\t\t<div className=\"col\">2</div>\n\t\t\t\t\t<div className=\"col\">3</div>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t)\n}\n","import { Tabs } from '#src/components/tabs'\n\nimport { useCallback, useMemo, useState } from 'preact/hooks'\nimport { WeaponsList } from './weapons-list'\nconst cats = [\n\t{ title: 'Weapons', code: 'weapons' },\n\t{ title: 'Artifacts', code: 'artifacts' },\n]\nexport function Equipment() {\n\tconst [selectedCatCode, setSelectedCatCode] = useState<string | null>(null)\n\tconst selectCat = useCallback(tab => setSelectedCatCode(tab.code), [setSelectedCatCode])\n\tconst selectedCat = useMemo(\n\t\t() => cats.find(c => c.code === selectedCatCode) || cats[0],\n\t\t[selectedCatCode],\n\t)\n\treturn (\n\t\t<div className=\"equipment container\">\n\t\t\t<h1 className=\"my-1 letter-spacing-1\">Character equipment</h1>\n\t\t\t<Tabs classes=\"w-100\" tabs={cats} onTabSelect={selectCat} selectedTab={selectedCat} />\n\t\t\t<WeaponsList />\n\t\t</div>\n\t)\n}\n","import { useMemo } from 'preact/hooks'\n\nimport { getRegionTime, GI_ROTATION_WEEKDAY_CODES } from '#lib/genshin'\nimport { arrGetAfter } from '#lib/utils/collections'\nimport { mustBeDefined } from '#src/../../lib/utils/values'\nimport { apiMaterialsTimetable } from '#src/api/endpoints'\nimport { Spinner } from '#src/components/spinners'\nimport { BtnTabGroup, Tabs, useSelectable } from '#src/components/tabs'\nimport {\n\tI18N_DUNGEONS,\n\tI18N_TALENTS,\n\tI18N_TODAY,\n\tI18N_TOMORROW,\n\tI18N_WEAPONS,\n\tI18N_WEEKDAYS,\n\tI18N_WHY_ADD_TO_FAVS_TIP,\n} from '#src/i18n/i18n'\nimport { isLoaded, useFetch, useForceUpdate, useVersionedStorage, useVisibleTicker } from '#src/utils/hooks'\nimport { getItemIconLargeSrc, getItemIconSrc } from '#src/utils/items'\nimport {\n\tSV_FAV_CHAR_CODES,\n\tSV_FAV_TALENT_MATERIAL_CODES,\n\tSV_FAV_WEAPON_PRIMARY_MATERIAL_CODES,\n\tSV_SELECTED_REGION_CODE,\n} from '#src/utils/local-storage-keys'\nimport { HEART } from '#src/utils/typography'\nimport { OtherItemCard } from './item-cards/dd-cards'\nimport { CharacterAvatar, ItemAvatar } from './item-cards/item-avatars'\n\nimport './farm-today.scss'\n\nexport function FarmToday({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst ttData = useFetch(apiMaterialsTimetable, [])\n\tconst [selectedRegionCode] = useVersionedStorage(SV_SELECTED_REGION_CODE)\n\tconst { weekdayMonSun, weekdayCode } = getRegionTime(selectedRegionCode)\n\tconst tomorrowCode = arrGetAfter(GI_ROTATION_WEEKDAY_CODES, weekdayCode)\n\tconst [favCharCodes] = useVersionedStorage(SV_FAV_CHAR_CODES)\n\tconst [favTalMaterialCodes] = useVersionedStorage(SV_FAV_TALENT_MATERIAL_CODES)\n\t// const [favWeaponDatas] = useLocalStorage<STORAGE_WEAPON_DATA[]>(SK_FAV_WEAPON_DATAS, [])\n\t// const favWeapMatCodes = useMemo(() => [...favWeaponDatas.map(wd => wd[1])], [favWeaponDatas])\n\tconst [favWeapPrimMatCodes] = useVersionedStorage(SV_FAV_WEAPON_PRIMARY_MATERIAL_CODES)\n\tconst forceUpdate = useForceUpdate()\n\tuseVisibleTicker(() => {\n\t\tforceUpdate()\n\t}, 60 * 1000)\n\tconst tabs = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tcode: weekdayCode,\n\t\t\t\ttitle: `${I18N_WEEKDAYS[weekdayMonSun]}, ${I18N_TODAY}`,\n\t\t\t},\n\t\t\t{ code: tomorrowCode, title: I18N_TOMORROW },\n\t\t],\n\t\t[weekdayCode, tomorrowCode, weekdayMonSun],\n\t)\n\tconst [selectedTab, setSelectedTab] = useSelectable(tabs, [selectedRegionCode])\n\n\treturn (\n\t\t<div className={`farm-today ${classes}`}>\n\t\t\t{!BUNDLE_ENV.IS_SSR && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"d-none d-xl-flex\">\n\t\t\t\t\t\t<h5 className=\"py-2 m-0 me-2 d-block \">{I18N_DUNGEONS}</h5>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\ttabs={tabs}\n\t\t\t\t\t\t\tselectedTab={selectedTab}\n\t\t\t\t\t\t\tonTabSelect={setSelectedTab}\n\t\t\t\t\t\t\tclasses=\"mb-2 flex-grow-1\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"d-block d-xl-none\">\n\t\t\t\t\t\t<BtnTabGroup\n\t\t\t\t\t\t\ttabs={tabs}\n\t\t\t\t\t\t\tselectedTab={selectedTab}\n\t\t\t\t\t\t\tonTabSelect={setSelectedTab}\n\t\t\t\t\t\t\tclasses=\"w-100 mb-2 btn-group-sm\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isLoaded(ttData) && !BUNDLE_ENV.IS_SSR ? (\n\t\t\t\t<>\n\t\t\t\t\t<h6 className=\"opacity-75 text-capitalize\">{I18N_TALENTS}</h6>\n\t\t\t\t\t<div className=\"talents-wrap pt-1\">\n\t\t\t\t\t\t{ttData.timetable[selectedTab.code].characterAscensions.map(asc => (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className=\"mb-3 ps-2 ms-1 d-flex align-items-center\" key={asc.itemCode}>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\t\t\t\tsrc={getItemIconLargeSrc(asc.itemCode)}\n\t\t\t\t\t\t\t\t\t\t\tclasses=\"me-3 vertical-align-middle\"\n\t\t\t\t\t\t\t\t\t\t\tbadgeTopStart={\n\t\t\t\t\t\t\t\t\t\t\t\t~favTalMaterialCodes.indexOf(asc.itemCode) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">{HEART}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tddComponent={\n\t\t\t\t\t\t\t\t\t\t\t\t<OtherItemCard\n\t\t\t\t\t\t\t\t\t\t\t\t\titem={mustBeDefined(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tttData.items.find(i => i.code === asc.itemCode),\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\trelated={ttData.maps}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex flex-wrap align-self-center pt-2\">\n\t\t\t\t\t\t\t\t\t\t{asc.characterCodes.map(c => (\n\t\t\t\t\t\t\t\t\t\t\t<CharacterAvatar\n\t\t\t\t\t\t\t\t\t\t\t\tkey={c}\n\t\t\t\t\t\t\t\t\t\t\t\tcode={c}\n\t\t\t\t\t\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\t\t\t\t\t\tclasses={`small-avatar mb-2 me-2 ${\n\t\t\t\t\t\t\t\t\t\t\t\t\t~favCharCodes.indexOf(c) ? 'order-1' : 'order-2'\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\tbadgeTopStart={\n\t\t\t\t\t\t\t\t\t\t\t\t\t~favCharCodes.indexOf(c) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">{HEART}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<h6 class=\"opacity-75 text-capitalize\">{I18N_WEAPONS}</h6>\n\t\t\t\t\t<div className=\"ps-2 ms-1\">\n\t\t\t\t\t\t{ttData.timetable[selectedTab.code].weaponMaterialCodes.map(code => (\n\t\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\t\tkey={code}\n\t\t\t\t\t\t\t\tsrc={getItemIconSrc(code)}\n\t\t\t\t\t\t\t\tclasses=\"small-avatar me-3 with-padding\"\n\t\t\t\t\t\t\t\tbadgeTopStart={\n\t\t\t\t\t\t\t\t\t~favWeapPrimMatCodes.indexOf(code) ? (\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-danger\">{HEART}</span>\n\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tddComponent={\n\t\t\t\t\t\t\t\t\t<OtherItemCard\n\t\t\t\t\t\t\t\t\t\titem={mustBeDefined(ttData.items.find(i => i.code === code))}\n\t\t\t\t\t\t\t\t\t\trelated={ttData.maps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Spinner />\n\t\t\t)}\n\t\t\t<div className=\"text-muted small text-center px-2 mx-1 py-3\">{I18N_WHY_ADD_TO_FAVS_TIP}</div>\n\t\t</div>\n\t)\n}\n","import { useCallback, useMemo } from 'preact/hooks'\n\nimport { GI_ServerRegionCode } from '#src/../../lib/genshin'\nimport { SimpleSelect } from '#src/components/select'\nimport { I18N_ASIA, I18N_EUROPE, I18N_NORH_AMERICA } from '#src/i18n/i18n'\nimport { useVersionedStorage } from '#src/utils/hooks'\nimport { SV_SELECTED_REGION_CODE } from '#src/utils/local-storage-keys'\n\ntype Opt = { title: string; code: GI_ServerRegionCode }\nconst europeOpt: Opt = { title: I18N_EUROPE, code: 'europe' }\nconst options: Opt[] = [\n\teuropeOpt,\n\t{ title: I18N_ASIA, code: 'asia' },\n\t{ title: I18N_NORH_AMERICA, code: 'north-america' },\n]\n\nexport function RegionSwitch({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst [selectedRegionCode, setSelectedRegionCode] = useVersionedStorage(SV_SELECTED_REGION_CODE)\n\tconst selectedOption = useMemo(\n\t\t() => options.find(o => o.code === selectedRegionCode) || europeOpt,\n\t\t[selectedRegionCode],\n\t)\n\tconst onOptSelectLocal = useCallback(o => setSelectedRegionCode(o.code), [setSelectedRegionCode])\n\treturn (\n\t\t<SimpleSelect options={options} selectedOption={selectedOption} onOptionSelect={onOptSelectLocal} />\n\t)\n}\n","import { getRegionTime } from '#lib/genshin'\nimport { I18N_MS_TO_HM_WORDS } from '#src/i18n/i18n'\nimport { useForceUpdate, useVersionedStorage, useVisibleTicker } from '#src/utils/hooks'\nimport { SV_SELECTED_REGION_CODE } from '#src/utils/local-storage-keys'\nimport { BULLET, ELLIPSIS } from '#src/utils/typography'\n\nexport function TimeUntilDayReset({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst [selectedRegionCode] = useVersionedStorage(SV_SELECTED_REGION_CODE)\n\tconst { resetIn } = getRegionTime(selectedRegionCode)\n\tconst forceUpdate = useForceUpdate()\n\tuseVisibleTicker(() => {\n\t\tforceUpdate()\n\t}, 60 * 1000)\n\treturn (\n\t\t<div className={`time-until-day-reset ${classes}`}>\n\t\t\t{BUNDLE_ENV.IS_SSR ? ELLIPSIS : I18N_MS_TO_HM_WORDS(resetIn)}\n\t\t\t<span className=\"animation-time-glow ps-1\">{BULLET}</span>\n\t\t</div>\n\t)\n}\n","import { useMemo, useState } from 'preact/hooks'\n\nimport { arrOrItemToArr } from '#src/../../lib/utils/collections'\nimport { useBuildWithDelayedLocs } from '#src/api'\nimport { getAllRelated } from '#src/api/utils'\nimport { CentredSpinner, Spinner } from '#src/components/spinners'\nimport { BtnTabGroup, Tabs, useSelectable } from '#src/components/tabs'\nimport { FavoriteCharacters } from '#src/containers/character-picker/favorite-characters'\nimport { ItemAvatar } from '#src/containers/item-cards/item-avatars'\nimport {\n\tI18N_ART_STATS_PRIORITY,\n\tI18N_ARTIFACTS,\n\tI18N_ASC_MATERIALS,\n\tI18N_FULL_BUILD_INFO,\n\tI18N_MORE_ON_BUILDS_PAGE,\n\tI18N_STAT_NAME,\n\tI18N_SUBSTATS_PRIORITY,\n\tI18N_TALENT_NAME,\n\tI18N_TALENTS_PRIORITY,\n\tI18N_CHOOSE_FROM_FAV,\n} from '#src/i18n/i18n'\nimport { A } from '#src/routes/router'\nimport { getArtifactTypeIconSrc } from '#src/utils/artifacts'\nimport { isLoaded } from '#src/utils/hooks'\nimport { getItemIconSrc } from '#src/utils/items'\nimport {\n\tBuildRoleOrDummy,\n\tCIRCLET_GOBLET_SANDS,\n\tDUMMY_ROLES,\n\tgenArtifactAdvice,\n\tgenArtMainStatDetail,\n\tgenSimpleList,\n\tgetRoleData,\n\tmakeRoleTitle,\n} from './common'\n\nimport './character-build-preview.scss'\nimport { OtherItemCard } from '#src/containers/item-cards/dd-cards'\n\nfunction CharacterBuildPreview({ characterCode }: { characterCode: string }): JSX.Element {\n\tconst [build, isUpdating] = useBuildWithDelayedLocs(characterCode)\n\tconst displayingCharacterCode = isLoaded(build) ? build.character.code : characterCode\n\tconst roleTabs: BuildRoleOrDummy[] = isLoaded(build) ? build.character.roles : DUMMY_ROLES\n\tconst [selectedRoleTab, setSelectedRoleTab] = useSelectable(roleTabs, [displayingCharacterCode])\n\n\tconst artifactsListBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return []\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\tif (!role) return []\n\t\tconst listTimit = 1\n\t\treturn (\n\t\t\t<ol>\n\t\t\t\t{role.artifacts.sets.map((set, i) => {\n\t\t\t\t\tif (i > listTimit) return\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={i} className=\"pt-1\">\n\t\t\t\t\t\t\t{genArtifactAdvice(set.arts, build, false)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t\t{role.artifacts.sets.length > listTimit ? (\n\t\t\t\t\t<li className=\"pt-1\">\n\t\t\t\t\t\t<A className=\"link-secondary text-muted small\" href={`/builds/` + characterCode}>\n\t\t\t\t\t\t\t{I18N_MORE_ON_BUILDS_PAGE}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</li>\n\t\t\t\t) : null}\n\t\t\t</ol>\n\t\t)\n\t}, [characterCode, build, selectedRoleTab])\n\n\tconst artifactMainStatsBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return null\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<ul className=\"mb-1 list-unstyled ms-1 pt-1 ps-1 small\">\n\t\t\t\t{CIRCLET_GOBLET_SANDS.map(ac => (\n\t\t\t\t\t<li className=\"my-1 ms-1\">\n\t\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\t\tsrc={getArtifactTypeIconSrc(ac)}\n\t\t\t\t\t\t\tisNoBg={true}\n\t\t\t\t\t\t\tclasses=\"small-avatar with-padding align-middle\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{genArtMainStatDetail(role, ac, true)}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t)\n\t}, [build, selectedRoleTab])\n\tconst artifactSubStatsBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return null\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<ol className=\"mb-1 pt-2 small\">\n\t\t\t\t{role.subStats.advices.map(advice => {\n\t\t\t\t\treturn <li>{genSimpleList(advice.codes.map(I18N_STAT_NAME))}</li>\n\t\t\t\t})}\n\t\t\t</ol>\n\t\t)\n\t}, [build, selectedRoleTab])\n\n\tconst talentsBlock = useMemo(() => {\n\t\tif (!isLoaded(build)) return null\n\t\tconst role = getRoleData(build, selectedRoleTab.code)\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ol className=\"small\">\n\t\t\t\t\t{role.talents.advices.map(advice => {\n\t\t\t\t\t\treturn <li>{arrOrItemToArr(advice).map(I18N_TALENT_NAME)}</li>\n\t\t\t\t\t})}\n\t\t\t\t</ol>\n\t\t\t</>\n\t\t)\n\t}, [build, selectedRoleTab])\n\n\tconst materialsBlock = useMemo(() => {\n\t\t//todo  \n\t\tif (!isLoaded(build)) return null\n\t\tconst materials = getAllRelated(build.maps.items, build.character.materialCodes)\n\t\treturn (\n\t\t\t<div className=\"d-flex justify-content-between flex-wrap px-2\">\n\t\t\t\t{materials.map(m => (\n\t\t\t\t\t<ItemAvatar\n\t\t\t\t\t\tclasses=\"mb-2 mx-1 small-avatar with-padding flex-shrink-0\"\n\t\t\t\t\t\tsrc={getItemIconSrc(m.code)}\n\t\t\t\t\t\tddComponent={<OtherItemCard item={m} related={build.maps} />}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t)\n\t}, [build])\n\tif (!isLoaded(build)) return <Spinner />\n\treturn (\n\t\t<div className=\"character-build-preview position-relative\">\n\t\t\t{/* <div className=\"d-none d-xl-block\">\n\t\t\t\t<CharacterPortrait src={getCharacterPortraitSrc(characterCode)} classes=\"w-100\" />\n\t\t\t</div>\n\t\t\t<div className=\"d-xl-none\">\n\t\t\t\t<CharacterPortrait\n\t\t\t\t\tsrc={getCharacterSilhouetteSrc(characterCode)}\n\t\t\t\t\tclasses=\"w-75 character-portrait-mobile\"\n\t\t\t\t/>\n\t\t\t</div> */}\n\t\t\t{isUpdating ? <CentredSpinner /> : null}\n\t\t\t<div className={isUpdating ? 'opacity-50 pe-none' : ''}>\n\t\t\t\t<div className=\"d-none d-xl-flex \">\n\t\t\t\t\t<h5 className=\"py-2 m-0 me-2 d-block \">{build.character.name}</h5>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\ttabs={roleTabs}\n\t\t\t\t\t\ttitleFunc={makeRoleTitle}\n\t\t\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\t\t\tclasses=\"mb-2 flex-grow-1\"\n\t\t\t\t\t\tkey={displayingCharacterCode}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"d-flex d-xl-none align-items-center\">\n\t\t\t\t\t<h5 className=\"mb-0 pt-2 me-2\">{build.character.name}</h5>\n\t\t\t\t\t<BtnTabGroup\n\t\t\t\t\t\ttabs={roleTabs}\n\t\t\t\t\t\ttitleFunc={makeRoleTitle}\n\t\t\t\t\t\tselectedTab={selectedRoleTab}\n\t\t\t\t\t\tonTabSelect={setSelectedRoleTab}\n\t\t\t\t\t\tclasses=\"w-100 mt-3 mb-2 btn-group-sm\"\n\t\t\t\t\t\tkey={displayingCharacterCode}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row small gy-2\">\n\t\t\t\t\t<div className=\"col-lg-4 col-12\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_ARTIFACTS}</h6>\n\t\t\t\t\t\t<div>{artifactsListBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-4 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_ART_STATS_PRIORITY}</h6>\n\t\t\t\t\t\t<div>{artifactMainStatsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-4 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_SUBSTATS_PRIORITY}</h6>\n\t\t\t\t\t\t<div>{artifactSubStatsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-4 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_TALENTS_PRIORITY}</h6>\n\t\t\t\t\t\t<div>{talentsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-lg-8 col-6\">\n\t\t\t\t\t\t<h6 className=\"opacity-75\">{I18N_ASC_MATERIALS}</h6>\n\t\t\t\t\t\t<div>{materialsBlock}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t\t<A\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"btn btn-link btn-sm w-100\"\n\t\t\t\t\t\t\thref={`/builds/` + characterCode}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{I18N_FULL_BUILD_INFO}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* TODO */}\n\t\t\t\t\t{/* <div className=\"col-6\">\n\t\t\t\t\t\t<A type=\"button\" className=\"btn btn-link btn-sm w-100\">\n\t\t\t\t\t\t\t{I18N_CHAR_LORE}\n\t\t\t\t\t\t</A>\n\t\t\t\t\t</div> */}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\nexport function BuildsPreviewsWrap({ classes = '' }: { classes?: string }): JSX.Element {\n\tconst [selectedCharacterCode, setSelectedCharacterCode] = useState<string | undefined>(undefined)\n\treturn (\n\t\t<div className={`character-build-preview ${classes}`}>\n\t\t\t<FavoriteCharacters\n\t\t\t\tonCharacterSelect={setSelectedCharacterCode}\n\t\t\t\tshoudSelectFirst={!selectedCharacterCode}\n\t\t\t\tselectedCharacterCode={selectedCharacterCode}\n\t\t\t\tnavigateToCharacter={false}\n\t\t\t\tblockLabel={I18N_CHOOSE_FROM_FAV}\n\t\t\t\tclasses=\"mb-2\"\n\t\t\t/>\n\t\t\t{selectedCharacterCode ? (\n\t\t\t\t<CharacterBuildPreview characterCode={selectedCharacterCode} />\n\t\t\t) : (\n\t\t\t\t<Spinner />\n\t\t\t)}\n\t\t</div>\n\t)\n}\n","import { AlchemyCalculator } from '#src/containers/alchemy-calculator'\nimport { FarmToday } from '#src/containers/farm-today'\nimport { RegionSwitch } from '#src/containers/region-switch'\nimport { TimeUntilDayReset } from '#src/containers/time-until-day-reset'\nimport {\n\tI18N_ALCHEMY_CALC,\n\tI18N_BUILDS,\n\tI18N_DASHBOARD,\n\tI18N_PAGE_TITLE_POSTFIX,\n\tI18N_REGION,\n\tI18N_UNTIL_DAY_RESET,\n\tI18N_WHAT_TO_FARM,\n} from '#src/i18n/i18n'\nimport { BuildsPreviewsWrap } from '#src/modules/builds/character-build-preview'\nimport { useDocumentTitle } from '#src/utils/hooks'\n\nfunction Fieldset({ children, legend, classes = '' }) {\n\treturn (\n\t\t<fieldset className={`my-2 ${classes}`}>\n\t\t\t<legend className=\"opacity-75 mb-2\">{legend}</legend>\n\t\t\t{children}\n\t\t</fieldset>\n\t)\n}\nexport function FrontPage(): JSX.Element {\n\tuseDocumentTitle(I18N_DASHBOARD + I18N_PAGE_TITLE_POSTFIX)\n\treturn (\n\t\t<div className=\"dashboard container \">\n\t\t\t<h1 className=\"my-1 letter-spacing-1\">{I18N_DASHBOARD}</h1>\n\t\t\t<div className=\"row\">\n\t\t\t\t<Fieldset legend={I18N_REGION} classes=\"col-lg-3 col-12\">\n\t\t\t\t\t<RegionSwitch />\n\t\t\t\t</Fieldset>\n\t\t\t\t<Fieldset legend={I18N_UNTIL_DAY_RESET} classes=\"col-lg-3 col-12\">\n\t\t\t\t\t<TimeUntilDayReset classes=\"fs-4\" />\n\t\t\t\t</Fieldset>\n\t\t\t\t<Fieldset legend={I18N_ALCHEMY_CALC} classes=\"col-lg-6 col-12 \">\n\t\t\t\t\t<AlchemyCalculator />\n\t\t\t\t</Fieldset>\n\t\t\t</div>\n\t\t\t<div className=\"row\">\n\t\t\t\t<Fieldset classes=\"col-lg-6 col-12\" legend={I18N_WHAT_TO_FARM}>\n\t\t\t\t\t<FarmToday />\n\t\t\t\t</Fieldset>\n\t\t\t\t<Fieldset classes=\"col-lg-6 col-12\" legend={I18N_BUILDS}>\n\t\t\t\t\t<BuildsPreviewsWrap />\n\t\t\t\t</Fieldset>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { PageWrap } from './components/page-wrap'\nimport { Footer } from './containers/footer'\nimport { Header } from './containers/header'\nimport { AboutPage } from './pages/about'\nimport { BuildsPage_BuildDetail, BuildsPage_CharSelect } from './pages/builds'\nimport { EquipmentPage } from './pages/equipment'\nimport { FrontPage } from './pages/front-page'\nimport { paths } from './routes/paths'\nimport { route, useRouter } from './routes/router'\n\nimport './App.scss'\nimport './animations.scss'\n\nconst routes = [\n\troute(paths.front, FrontPage),\n\troute(paths.builds, BuildsPage_CharSelect),\n\troute(paths.buildCharacters, BuildsPage_BuildDetail),\n\troute(paths.equipment, EquipmentPage),\n\troute(paths.about, AboutPage),\n]\n\nexport function App(): JSX.Element {\n\tconst page = useRouter(routes)\n\treturn (\n\t\t<div class=\"d-flex flex-column app-container\">\n\t\t\t<Header />\n\t\t\t<main>\n\t\t\t\t<PageWrap>{page}</PageWrap>\n\t\t\t</main>\n\t\t\t<Footer />\n\t\t</div>\n\t)\n}\n","import { useEffect } from 'preact/hooks'\n\nimport { useBuildWithDelayedLocs } from '#src/api'\nimport { Spinner } from '#src/components/spinners'\nimport { CharacterPicker } from '#src/containers/character-picker/character-picker'\nimport { FavoriteCharacters } from '#src/containers/character-picker/favorite-characters'\nimport {\n\tI18N_BUILD_RECS_FOR,\n\tI18N_CHAR_BUILD_RECS,\n\tI18N_LOADING,\n\tI18N_PAGE_TITLE_POSTFIX,\n\tI18N_RECOMMENDED_RU_ONLY,\n\tI18N_SELECT_CHAR_ABOVE,\n} from '#src/i18n/i18n'\nimport { CharacterBuildDetailed } from '#src/modules/builds/character-build-detailed'\nimport { isLoaded, useDocumentTitle } from '#src/utils/hooks'\n\nexport function BuildsPage_CharSelect(): JSX.Element {\n\tuseDocumentTitle(I18N_CHAR_BUILD_RECS + I18N_PAGE_TITLE_POSTFIX)\n\treturn (\n\t\t<div className=\"builds container\">\n\t\t\t<h1 className=\"my-1 letter-spacing-1\">{I18N_CHAR_BUILD_RECS}</h1>\n\t\t\t<h5 className=\"mt-2 mb-3 opacity-75\">{I18N_SELECT_CHAR_ABOVE}</h5>\n\t\t\t<FavoriteCharacters navigateToCharacter={true} classes=\"mb-2\" />\n\t\t\t<CharacterPicker />\n\t\t</div>\n\t)\n}\nexport function BuildsPage_BuildDetail({ code }: { code: string }): JSX.Element {\n\tconst [build, isUpdating] = useBuildWithDelayedLocs(code)\n\tuseEffect(() => {\n\t\twindow.scrollTo(0, 0)\n\t}, [])\n\tuseDocumentTitle(\n\t\tisLoaded(build)\n\t\t\t? build.character.name + ' ' + I18N_BUILD_RECS_FOR + I18N_PAGE_TITLE_POSTFIX\n\t\t\t: I18N_LOADING + I18N_PAGE_TITLE_POSTFIX,\n\t)\n\n\tif (!isLoaded(build)) return <Spinner />\n\n\treturn (\n\t\t<div className=\"builds container\">\n\t\t\t<h1 className={`my-1 letter-spacing-1 ${BUNDLE_ENV.LANG === 'en' ? 'text-capitalize' : ''}`}>\n\t\t\t\t<span className=\"d-none d-xl-inline\">{build.character.name}</span>\n\t\t\t\t<span className=\"d-xl-none\">{I18N_RECOMMENDED_RU_ONLY}</span> {I18N_BUILD_RECS_FOR}\n\t\t\t</h1>\n\t\t\t<FavoriteCharacters navigateToCharacter={true} selectedCharacterCode={code} />\n\t\t\t<CharacterBuildDetailed build={build} isUpdating={isUpdating} />\n\t\t</div>\n\t)\n}\n","import { Equipment } from '#src/modules/equipment/equipment'\n\nexport function EquipmentPage() {\n\treturn <Equipment />\n}\n","import { I18N_ABOUT_SITE_CONTENT, I18N_ABOUT_SITE_EPIGRAPH } from '#src/i18n/about-site'\r\nimport { I18N_ABOUT_SITE, I18N_PAGE_TITLE_POSTFIX } from '#src/i18n/i18n'\r\nimport { useDocumentTitle } from '#src/utils/hooks'\r\n\r\nexport function AboutPage(): JSX.Element {\r\n\tuseDocumentTitle(I18N_ABOUT_SITE + I18N_PAGE_TITLE_POSTFIX)\r\n\treturn (\r\n\t\t<div className=\"builds container\">\r\n\t\t\t<h1 className={`my-1 letter-spacing-1 ${BUNDLE_ENV.LANG === 'en' ? 'text-capitalize' : ''}`}>\r\n\t\t\t\t{I18N_ABOUT_SITE}\r\n\t\t\t</h1>\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t{/* todo   ,  */}\r\n\t\t\t\t<figure className=\"text-end\">\r\n\t\t\t\t\t<blockquote className=\"blockquote\">\r\n\t\t\t\t\t\t<p>{I18N_ABOUT_SITE_EPIGRAPH.quote}</p>\r\n\t\t\t\t\t</blockquote>\r\n\t\t\t\t\t<figcaption className=\"blockquote-footer\">\r\n\t\t\t\t\t\t{I18N_ABOUT_SITE_EPIGRAPH.footer} <cite>{I18N_ABOUT_SITE_EPIGRAPH.cite}</cite>\r\n\t\t\t\t\t</figcaption>\r\n\t\t\t\t</figure>\r\n\t\t\t\t<div className=\"col-md-7 offset-md-1\">{I18N_ABOUT_SITE_CONTENT}</div>\r\n\t\t\t\t<div className=\"text-muted text-end\">28.03.2022</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","if (process.env.NODE_ENV === 'development') {\n\trequire('preact/debug')\n}\n\n//     \nimport '#src/errors/catch'\n\nimport { render } from 'preact'\nimport { renderToString } from 'preact-render-to-string'\n\nimport { App } from './App'\n\nexport const renderPage = BUNDLE_ENV.IS_SSR\n\t? html => {\n\t\t\tconst content = renderToString(<App />, null, { pretty: false })\n\t\t\treturn html\n\t\t\t\t.replace(/(?<=<div class=\"app\">)/, () => content)\n\t\t\t\t.replace(/(?<=<title>)(.*)(?=<\\/title>)/, (_, defTitle) => document.title || defTitle)\n\t  }\n\t: render(<App />, document.querySelector('body .app') as Element)\n"],"names":["inProgress","n","l","u","t","o","r","f","e","c","s","a","h","parentNode","removeChild","v","i","arguments","length","children","call","defaultProps","y","type","props","key","ref","__k","__","__b","__e","__d","__c","__h","constructor","__v","vnode","d","_","this","context","k","indexOf","b","base","m","push","g","__r","debounceRendering","sort","some","__P","j","__n","ownerSVGElement","z","w","p","A","Array","isArray","x","P","N","M","appendChild","nextSibling","insertBefore","$","setProperty","test","H","style","cssText","replace","toLowerCase","slice","addEventListener","T","I","removeEventListener","setAttribute","removeAttribute","event","contextType","value","__E","prototype","render","O","sub","state","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","L","diffed","localName","nodeType","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","name","__html","innerHTML","C","checked","current","unmount","componentWillUnmount","S","firstChild","D","Consumer","Provider","splice","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","Promise","then","bind","resolve","setTimeout","__H","F","shift","clearTimeout","cancelAnimationFrame","requestAnimationFrame","filter","__source","__self","ContextProvider","Portal","_this","container","_container","_temp","_vnode","child","before","comparer","shouldUpdate","nextProps","updateRef","shallowDiffers","Memoed","displayName","isReactComponent","_forwarded","mustBeDefined","val","undefined","Error","mustBeNever","values","staticNever","clamp","min","max","promiseNever","isPromise","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","definition","Object","defineProperty","enumerable","get","chunkId","all","keys","reduce","promises","miniCssF","obj","prop","hasOwnProperty","url","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","timeout","nc","src","onScriptComplete","prev","onerror","onload","doneFns","fn","target","head","Symbol","toStringTag","installedChunks","installedChunkData","promise","reject","error","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","id","chunkLoadingGlobal","self","sendNewItem","level","fingerprint","rollbarBody","body","JSON","stringify","environment","code_version","platform","location","href","client","javascript","browser","navigator","userAgent","fetch","method","headers","json","resp","err","logErrorExt","anyError","silent","console","class_","trace","frames","exception","class","sendError","stack","catch","logError","window","filename","lineno","colno","reason","String","shallow","pretty","renderRootComponent","shallowHighOrder","_dirty","_nextState","Function","toString","match","E","sortAttributes","R","U","W","allAttributes","for","q","attributeHook","xml","V","voidElements","Z","B","G","J","K","Q","X","Y","join","substring","PageWrap","className","shallowRender","LINK_DISCORD_INVITE","I18N_LANG_NAMES","en","ru","I18N_LANG_NAME","I18N_PAGE_TITLE_POSTFIX","I18N_ALCHEMY_CALC","I18N_BUILDS","I18N_WEEKDAYS","I18N_WEAPONS","add","remove","weapon","character","material","I18N_ARTIFACTS","I18N_ART_STATS_PRIORITY","I18N_SUBSTATS_PRIORITY","I18N_TALENTS_PRIORITY","I18N_ASC_MATERIALS","I18N_BACK","I18N_NOTES","artTypeNamesRU","flower","plume","sands","goblet","circlet","I18N_ART_TYPE","code","statNamesRu","def","dmg","atk","hp","em","er","healing","I18N_STAT_NAME","talentTypesNamesRU","attack","skill","burst","I18N_TALENT_NAME","I18N_CONJUCTIONS","or","and","I18N_REPORT_BUG_GUIDE","I18N_PIECE_BONUS","I18N_PIECES_BONUS","I18N_MAP_CODES_NAME","teyvat","enkanomiya","I18N_CHAR_BUILD_RECS","I18N_BUILD_RECS_FOR","I18N_ABOUT_SITE","I18N_REPORT_BUG","weaponTypeNamesRU","claymore","sword","catalyst","polearm","bow","weaponObtainSourceNamesRU","wishes","events","forging","fishing","chests","quests","puzzles","investigation","playstation","I18N_WEAPON_OBTAIN_SOURCE_NAME","I18N_ART_GROUP_NAME","I18N_MS_TO_HM_WORDS","duration","minutes","Math","floor","hours","pluralizeRU","pluralizeHours","pluralizeMinutes","w0","w1","w3","arrShallowEqual","arrGetAfter","arr","item","direction","index","arrOrItemToArr","BS_BreakpointsCodes","BS_BreakpointsMap","xs","sm","md","lg","xl","xxl","BS_getCurrBreakpoint","screenWidth","find","PENDING","isLoaded","useFetch","loadFunc","args","controller","prevArgs","foceUpdate","useForceUpdate","abort","ac","AbortController","res","signal","finally","useClickAway","callback","handleClick","HTMLElement","contains","useWindowSize","windowSize","setWindowSize","width","innerWidth","height","innerHeight","breakpoint","handleResize","versions","setVal","initialValue","setValueInner","curRecord","localStorage","getItem","parse","ex","setValueAndSave","setItem","dispatchEvent","CustomEvent","detail","onStorage","log","useLocalStorage","version","setValInner","setValue","useVisibleTicker","interval","isVisible","setIsVisible","visibilityState","onVisibilityChange","onPageHide","onPageShow","useWindowVisibility","callbackInner","Date","now","useDocumentTitle","title","shouldRestoreOnUnmount","defaultTitle","modalsEl","ReportBugModal","onClickAway","setMessage","isInvalid","setIsInvalid","onMessageChange","querySelector","modalRef","tryToSendMessage","msg","alert","onClick","placeholder","rows","onInput","Footer","isReportBugModalVisible","setIsReportBugModalVisible","onRepBugBtnClick","closeRepBugModal","role","charactersShortList","ART_GROUP_CODES","paths","front","builds","buildCharacters","map","equipment","about","matchPath","path","rem","part","matched","withoutPrefix","variants","variant","prefix","startsWith","URL_LANG_PREFIX","makeUrlLangPrefix","findRoutedComponent","routes","route","comp","pathSearchHash","pathname","search","hash","lang","makeLocationHrefForLang","curPrefix","newUrl","assign","innerRef","GlobeIcon","classes","viewBox","fill","xmlns","Nav","isNavExpanded","isPageActive","routs","isOnRoute","DonationDd","LangSelect","isExpanded","setIsExpanded","ddRef","closeDd","openDd","isActiveLang","Header","setIsNavExpanded","I18N_ABOUT_SITE_EPIGRAPH","I18N_ABOUT_SITE_CONTENT","GI_ROTATION_WEEKDAY_CODES","GI_ARTIFACT_GROUP_CODES","_GI_STAT_PERCENT","_GI_STAT_DMG_PEFIXES","GI_REGION_TIMEZONE_OFFSET","concat","europe","asia","getRegionTime","regionCode","offsetHours","lastResetDate","setHours","getHours","weekdayMonSun","weekday","getUTCDay","setUTCHours","nextResetDate","setDate","getDate","weekdayCode","resetIn","resetAt","locEnc_code2map","decodeLocations","encodedLocations","downsample","parseInt","locs","mapCode","len3","decodeLocNum","str","maps","attr","Map","getAllRelated","codes","getLang","apiGetJSONFile","_map","func","apiMaterialsTimetable","useBuildWithDelayedLocs","characterCode","build","isUpdating","prevDataRef","sig","useFetchWithPrev","buildIsLoaded","fullInfo","locsInfo","items","applyItemsLocationsImmut","enemies","applyFullInfoLocationsImmut","locItems","resItems","locations","Spinner","CentredSpinner","artifactTypes","imgSrc","getArtifactTypeIconSrc","artifactTypeCode","at","isGroup","getArtifactIconSrc","artifactCode","getAllArtifacts","artsMap","getAllOrNone","BlockHeader","SimpleSelect","options","selectedOption","onOptionSelect","size","handleChange","onChange","disabled","selected","hidden","tabTitleFromName","Tabs","tabs","titleFunc","selectedTab","onTabSelect","preventDefault","BtnTabGroup","visibleTabsLength","tabsGrouped","useSelectable","tabCodes","setTabCodes","argsInner","tab","setTab","calcPosForDd","parentRect","ddRect","isAbsolute","isCentered","shouldFitInScreen","tWidth","tHeight","scrollTopFix","scrollY","centredFix","top","left","layoutPositionX","layoutPositionY","layoutPosition","ItemDetailDdPortal","targetEl","contentKey","shouldScrollToTop","wrapRef","defClassName","arrowStyle","setArrowStyle","onResize","wrapEl","pos","getBoundingClientRect","offsetWidth","elTop","scrollTo","ItemDetailDdMobilePortal","SV_SELECTED_REGION_CODE","language","curOffset","getTimezoneOffset","guessCurrentRegion","favCodes","SV_FAV_CHAR_CODES","SV_FAV_TALENT_MATERIAL_CODES","SV_FAV_WEAPON_PRIMARY_MATERIAL_CODES","DUMMY_ROLES","makeRoleTitle","isRecommended","CIRCLET_GOBLET_SANDS","getRoleData","selectedCode","roles","genArtMainStatDetail","itemCode","isShort","genSimpleList","mainStats","genNotes","notes","notesToJSX","tips","processObj","tip","split","flat","ItemLabelWithDd","artifact","getCoverArtifactForSet","artsForDd","coverArt","rarity","genArtifactAdvice","set","isLast","artifactsForDd","artifacts","LabeledItemAvatar","avatarTopEndBadge","count","avatarClasses","ddComponent","ArtifactCard","related","ItemsListGroupWrap","arts","art","isLastInList","ItemsJoinerWrap","op","ToggleSmthFav","smthCode","storageKey","tipFav","tipNotFav","favSmthCodes","setFavSmthCodes","elRef","isHovered","node","handleMouseOver","handleMouseOut","isFav","toggleFav","ToggleCharFav","ToggleWeaponPrimaryMaterialFav","ToggleTalentMaterialFav","getItemIconSrc","weaponTypes","DEF_ANCESTRY_CODES","AlchemyCalculator","ancestryCodes","setValues","onValueChange","dataset","isFirst","ItemAvatar","endRoundClass","LazyTeyvatMap","RecommendedFor","charCodes","CharacterAvatar","isNoBg","CardDescMobileWrap","br","Card","titleEl","selectorEl","bodyEl","mapEl","DdContext","ddContext","addMarkerGroupsByDomains","markerGroups","domains","domain","loc","icon","markers","addMarkerGroupsByEnemies","enemy","MapWrap","itemData","isItemFavable","TeyvatMap","selectedSource","setSelectedSource","visibleMapCodeTabs","mapCodes","Set","marker","from","selectedMapCodeTab","setMapCodeTab","selectedMapCode","setSourceAndFixMapCode","sourceSelectEl","isItemWeaponPrimaryMaterial","types","selectedArt","setSelectedArt","dataForMap","srcs","obtainSources","domainCodes","enemyCodes","sets","recommendedTo","WeaponCard","materials","materialCodes","materialOnMap","setMaterialOnMap","weaponCode","typeCode","subStat","passiveStat","OtherItemCard","isItemCharTalentMaterial","codesForCalc","reverse","unprefixTraveler","getCharacterAvatarLargeSrc","getCharacterSilhouetteSrc","badgeTopStart","badgeTopEnd","rarityClass","pointerClass","onClickLocal","codeToBadge","classesLocal","getRarityBorder","ItemLabel","ItemDd","ItemsDataContext","weapons","ddComp","coverArtifact","interactiveLabelClass","avatarTopStartBadge","CharacterPickerMobile","selectedElementCode","setSelectedElementCode","selectedWeaponTypeCode","setSelectedWeaponTypeCode","elementGroups","filteredElements","element","characters","elementCode","weaponTypeCode","el","selectElement","wt","selectWeaponType","wp","CharacterPickerDesktop","isLastRowClass","wType","CharacterPicker","shortListReversed","FavoriteCharacters","onCharacterSelect","shoudSelectFirst","navigateToCharacter","selectedCharacterCode","blockLabel","favCharCodes","charactersShortListCodes","characterCodes","charactersElems","CharacterPortrait","CharacterBuildDetailed","roleTabs","selectedRoleTab","setSelectedRoleTab","weaponListBlock","advices","advice","isInList","similar","refine","stacks","artifactsListBlock","artifactStatsAndSkillsBlock","subStats","talents","notesBlock","credits","materialsBlock","CharacterDetailDesktop","CharacterDetailMobile","cats","WeaponsList","selectedCatCode","setSelectedCatCode","Equipment","selectCat","selectedCat","FarmToday","ttData","selectedRegionCode","tomorrowCode","favTalMaterialCodes","favWeapPrimMatCodes","setSelectedTab","timetable","characterAscensions","asc","weaponMaterialCodes","europeOpt","RegionSwitch","setSelectedRegionCode","onOptSelectLocal","TimeUntilDayReset","CharacterBuildPreview","displayingCharacterCode","artifactMainStatsBlock","artifactSubStatsBlock","talentsBlock","BuildsPreviewsWrap","setSelectedCharacterCode","Fieldset","legend","I18N_DASHBOARD","I18N_LOADING","page","handled","ctrlKey","altKey","shiftKey","metaKey","button","Element","closest","URL","origin","history","pushState","handleAnchorClick","onPopState","Comp","useRouter"],"sourceRoot":""}